---
title: 设计模式---状态模式（今天CSDN竟然上不去，暂时发在这里） (从百度空间转回来的)
date: 2008-08-18 18:02:00
tags: 设计模式读书笔记
---
设计模式---状态模式（今天CSDN竟然上不去，暂时发在这里）


![58cbf8feaccd5d265d60085a.jpg](http://hiphotos.baidu.com/yansuochonglou/pic/item/58cbf8feaccd5d265d60085a.jpg)

using System;  
using System.Collections.Generic;  
using System.Text;

namespace ConsoleApplication1  
{  
abstract class State  
{  
public abstract void DoWhatIShouldDo(Worker w);  
}

class Young : State  
{  
public override void DoWhatIShouldDo(Worker w)  
{  
if(w.Age <=35)  
{  
Console.WriteLine("我年轻，逍遥自在");  
}  
else  
{  
w.State = new MiddleAge();  
w.DoWhatIShouldDo();  
}  
}  
}

class MiddleAge : State  
{  
public override void DoWhatIShouldDo(Worker w)  
{  
if (w.Age<=50 )  
{  
Console.WriteLine("人到中年");  
}  
else  
{  
w.State = new Old();  
w.DoWhatIShouldDo();  
}  
}  
}

class Old : State  
{  
public override void DoWhatIShouldDo(Worker w)  
{  
Console.WriteLine("老年生活");  
}  
}

class Worker  
{  
State state;  
int age;

public Worker()  
{  
age = 1;  
state = new Young();  
}  
  
public int Age  
{  
get  
{  
return age;  
}  
set  
{  
age = value;  
}  
}

public State State  
{  
get  
{  
return State;  
}  
set  
{  
state = value;  
}  
}

public void DoWhatIShouldDo()  
{  
state.DoWhatIShouldDo(this);  
}  
}

class Client  
{  
public static void Main()  
{  
Worker w = new Worker();  
w.Age = 5;  
w.DoWhatIShouldDo();  
w.Age = 45;  
w.DoWhatIShouldDo();  
w.Age = 80;  
w.DoWhatIShouldDo();  
Console.Read();  
}  
}  
}



