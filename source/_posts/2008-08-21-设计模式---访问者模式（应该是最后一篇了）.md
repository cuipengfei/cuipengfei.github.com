---
title: 设计模式---访问者模式（应该是最后一篇了）
date: 2008-08-21 18:00:00
tags: 设计模式读书笔记
---
![](https://p-blog.csdn.net/images/p_blog_csdn_net/cuipengfei1/EntryImages/20080821/ClassDiagram1.jpg)

  1. using  System; 
  2. using  System.Collections.Generic; 
  3. using  System.Text; 
  4.   5. namespace  ConsoleApplication1 
  6. { 
  7. abstract  class  Element 
  8. { 
  9. public  abstract  void  Accept(Visitor v); 
  10. } 
  11.   12. class  Elem1 : Element 
  13. { 
  14. public  override  void  Accept(Visitor v) 
  15. { 
  16. v.VisitElem1(  this  ); 
  17. } 
  18. } 
  19.   20. class  Elem2 : Element 
  21. { 
  22. public  override  void  Accept(Visitor v) 
  23. { 
  24. v.VisitElem2(  this  ); 
  25. } 
  26. } 
  27.   28. abstract  class  Visitor 
  29. { 
  30. public  abstract  void  VisitElem1(Elem1 e1); 
  31.   32. public  abstract  void  VisitElem2(Elem2 e2); 
  33. } 
  34.   35. class  Visitor1 : Visitor 
  36. { 
  37. public  override  void  VisitElem1(Elem1 e1) 
  38. { 
  39. Console.WriteLine(  this  .GetType().Name +  "  "  + e1.GetType().Name); 
  40. } 
  41.   42. public  override  void  VisitElem2(Elem2 e2) 
  43. { 
  44. Console.WriteLine(  this  .GetType().Name +  "  "  + e2.GetType().Name); 
  45. } 
  46. } 
  47.   48. class  Visitor2 : Visitor 
  49. { 
  50. public  override  void  VisitElem1(Elem1 e1) 
  51. { 
  52. Console.WriteLine(  this  .GetType().Name +  "  "  + e1.GetType().Name); 
  53. } 
  54.   55. public  override  void  VisitElem2(Elem2 e2) 
  56. { 
  57. Console.WriteLine(  this  .GetType().Name +  "  "  + e2.GetType().Name); 
  58. } 
  59. } 
  60.   61. class  ObjStructure 
  62. { 
  63. private  List<Element> elems =  new  List<Element>(); 
  64.   65. public  void  add(Element e) 
  66. { 
  67. elems.Add(e); 
  68. } 
  69.   70. public  void  visit(Visitor v) 
  71. { 
  72. foreach  (Element e  in  elems) 
  73. { 
  74. e.Accept(v); 
  75. } 
  76. } 
  77. } 
  78.   79. class  Client 
  80. { 
  81. public  static  void  Main() 
  82. { 
  83. ObjStructure o =  new  ObjStructure(); 
  84. o.add(  new  Elem1()); 
  85. o.add(  new  Elem2()); 
  86. o.visit(  new  Visitor1()); 
  87. o.visit(  new  Visitor2()); 
  88.   89. Console.Read(); 
  90. } 
  91. } 
  92.   93.   94. } 
  95. 

[ ![](https://profile.csdnimg.cn/5/2/5/3_cuipengfei1)
![](https://g.csdnimg.cn/static/user-reg-year/1x/11.png)
](https://blog.csdn.net/cuipengfei1)

[ 崔鹏飞 ](https://blog.csdn.net/cuipengfei1)

发布了127 篇原创文章  ·  获赞 8  ·  访问量 74万+

