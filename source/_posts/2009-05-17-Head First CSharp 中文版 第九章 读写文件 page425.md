---
title: Head First C# 中文版 第九章 读写文件 page425
date: 2009-05-17 09:42:00
tags: 我翻译的Head First C#（习作）
---
.NET  自动把文本转化为  Unicode  编码

  

C#  中用于存储文本的两种值类型  \--string  和  char--  它们的数据在内存中以  Unicode
的形式保存。这些数据被写以字节的形式到文件的时候，每一个  Unicode  字符也就被写到文件了。新建一个项目，向窗体上拖拽三个按钮，我们来使用
File.WriteAllBytes  （）和  ReadAllBytes  （）方法来感受一下  Unicode  数据到底是怎么写到文件的。

①把一个普通的字符串写到文件并把它读取回来

  

让第一个按钮使用  WriteAllText  （）方法来把字符串“  Eureka  ！”写到一个叫做“  eureka.txt
”的文件。然后创建一个叫做  eurekaBytes  的字节数组，把文件读入该数组，然后把读取来的所有字节打印输出。

  

![](https://p-blog.csdn.net/images/p_blog_csdn_net/cuipengfei1/EntryImages/20090517/2009-05-17_09-05-08.jpg)

你将会看到这些字节输出为：  69 117 114 101 107 97 33  。现在把文件在你本章早先写的简单文本编辑器中打开。它会显示为“
Eureka  ！”。

  

②让第二个按钮把字节按照十六进制数字输出

  

不仅是字符映射表可以显示十六进制。几乎是任何你见到的与编码数组有关的东西都可以以十六进制显示出来，所以知道如何使用十六进制是很有用的。把第二个按钮的事件处理
方法写的和第一个按钮一样，只修改  Console.Write  （）这一行，如下：

  

Console.Write  （“  {0  ：  x2}  ，  b  ”）；

  

这会告诉  Write  （）方法把要打印的字符串之后的第一个参数作为两个字符的十六进制书显示出来。所以它会把这七个字节以十六进制而不是十进制写出来：
45 75 72 65 6b 61 21  。

  

③让第三个按钮输出希伯来字母

  

回到字符映射表并双击  Shin  字符。这将会把该字符添加到“复制字符”框中。然后同样的添加“  Shalom  ”中的其他字母：  Lamed  （
U+05DC  ）  ,Vav(U+05D5),  最后还有  Mem  （  U+05DD
）。然后添加第三个按钮的事件处理方法。它将会和第二个按钮的事件处理方法看起来很相似，只是一点不同。点击字符映射表中的复制按钮，然后用复制来的字符覆盖掉“
Eureka  ！”，所以代码将会如下：

  

File.WriteAllText("eureka.txt","  שׁוּלּמּ  ");

  

你注意到  IDE  把这些字符倒着粘贴进去的吗？这是因为  IDE  知道希伯来文是自右向左读的，所以，无论何时它遇到希伯来文，都会倒着显示。把光标指向字
符中间，将会出现向左或者向右的箭头！这样如果你想要键入希伯来文的话就简单多了。现在运行代码，然后观察输出：  ff fe e9 05 dc 05 d5 05
dd 05  。前两个字符为“  FF FE  ”，这就是  Unicode  表示将要以两个字节的形式表示一个字符串中的每个字母。然后显示的是希伯来字母
\--  但是是倒过来的，所以  U+05E9  显示为  e9 05  。现在把文件在文本编辑器中打开  \--  看起来是对的！



[ ![](https://profile.csdnimg.cn/5/2/5/3_cuipengfei1)
![](https://g.csdnimg.cn/static/user-reg-year/1x/11.png)
](https://blog.csdn.net/cuipengfei1)





