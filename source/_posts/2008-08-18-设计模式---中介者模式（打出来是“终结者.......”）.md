---
title: 设计模式---中介者模式（打出来是“终结者.......”）
date: 2008-08-18 19:31:00
tags: 设计模式读书笔记
---
![设计模式---中介者模式（打出来是“终结者.......”）](https://p-blog.csdn.net/images/p_blog_csdn_n
et/cuipengfei1/EntryImages/20080818/ClassDiagram1.jpg)

  1. using  System; 
  2. using  System.Collections.Generic; 
  3. using  System.Text; 
  4.   5. namespace  ConsoleApplication1 
  6. { 
  7. abstract  class  FBIAgent 
  8. { 
  9. public  abstract  void  SendMessage(  string  m); 
  10.   11. public  void  ReadMessage(  string  m) 
  12. { 
  13. Console.WriteLine(m); 
  14. } 
  15. } 
  16.   17. class  AgentInRussia : FBIAgent 
  18. { 
  19. private  FBICenter center; 
  20.   21. public  AgentInRussia(FBICenter f) 
  22. { 
  23. center = f; 
  24. } 
  25.   26. public  override  void  SendMessage(  string  m) 
  27. { 
  28. center.Send(  this  ,m); 
  29. } 
  30. } 
  31.   32. class  AgentInEngland : FBIAgent 
  33. { 
  34. private  FBICenter center; 
  35. public  override  void  SendMessage(  string  m) 
  36. { 
  37. center.Send(  this  , m); 
  38. } 
  39.   40. public  AgentInEngland(FBICenter f) 
  41. { 
  42. center = f; 
  43. } 
  44. } 
  45.   46. abstract  class  FBICenter 
  47. { 
  48. public  abstract  void  Send(FBIAgent f,  string  m); 
  49.   50. } 
  51.   52. class  RealFBICenter : FBICenter 
  53. { 
  54. private  FBIAgent agentinrussia; 
  55.   56. private  FBIAgent agentinengland; 
  57.   58. public  FBIAgent russia 
  59. { 
  60. set 
  61. { 
  62. agentinrussia = value; 
  63. } 
  64. } 
  65.   66. public  FBIAgent england 
  67. { 
  68. set 
  69. { 
  70. agentinengland = value; 
  71. } 
  72. } 
  73.   74. public  override  void  Send(FBIAgent f,  string  m) 
  75. { 
  76. if  (f==agentinengland) 
  77. { 
  78. agentinrussia.ReadMessage(m); 
  79. } 
  80. else 
  81. { 
  82. agentinengland.ReadMessage(m); 
  83. } 
  84. } 
  85. } 
  86.   87. class  Client 
  88. { 
  89. public  static  void  Main() 
  90. { 
  91. RealFBICenter fc =  new  RealFBICenter(); 
  92. AgentInEngland eng =  new  AgentInEngland(fc); 
  93. AgentInRussia rus =  new  AgentInRussia(fc); 
  94. fc.england = eng; 
  95. fc.russia = rus; 
  96. eng.SendMessage(  "我在英国搞情报，hia~hia~"  ); 
  97. rus.SendMessage(  "我在俄罗斯搞情报，xia~ixa~"  ); 
  98.   99. Console.Read(); 
  100. } 
  101. } 
  102. } 
  103. 

[ ![](https://profile.csdnimg.cn/5/2/5/3_cuipengfei1)
![](https://g.csdnimg.cn/static/user-reg-year/1x/11.png)
](https://blog.csdn.net/cuipengfei1)





