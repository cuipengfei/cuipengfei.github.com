---
title: 设计模式---中介者模式（打出来是“终结者.......”）
date: 2008-08-18 19:31:00
tags: 设计模式读书笔记
---
![设计模式---中介者模式（打出来是“终结者.......”）](/images/images/p_blog_csdn_net/cuipengfei1/EntryImages/20080818/ClassDiagram1.jpg)

```
using System;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication1
{
    abstract class FBIAgent
    {
        public abstract void SendMessage(string m);

        public void ReadMessage(string m)
        {
            Console.WriteLine(m);
        }
    }

    class AgentInRussia : FBIAgent
    {
        private FBICenter center;

        public AgentInRussia(FBICenter f)
        {
            center = f;
        }

        public override void SendMessage(string m)
        {
            center.Send(this, m);
        }
    }

    class AgentInEngland : FBIAgent
    {
        private FBICenter center;

        public override void SendMessage(string m)
        {
            center.Send(this, m);
        }

        public AgentInEngland(FBICenter f)
        {
            center = f;
        }
    }

    abstract class FBICenter
    {
        public abstract void Send(FBIAgent f, string m);
    }

    class RealFBICenter : FBICenter
    {
        private FBIAgent agentinrussia;
        private FBIAgent agentinengland;

        public FBIAgent russia
        {
            set { agentinrussia = value; }
        }

        public FBIAgent england
        {
            set { agentinengland = value; }
        }

        public override void Send(FBIAgent f, string m)
        {
            if (f == agentinengland)
            {
                agentinrussia.ReadMessage(m);
            }
            else
            {
                agentinengland.ReadMessage(m);
            }
        }
    }

    class Client
    {
        public static void Main()
        {
            RealFBICenter fc = new RealFBICenter();
            AgentInEngland eng = new AgentInEngland(fc);
            AgentInRussia rus = new AgentInRussia(fc);
            fc.england = eng;
            fc.russia = rus;
            eng.SendMessage("我在英国搞情报，hia~hia~");
            rus.SendMessage("我在俄罗斯搞情报，xia~ixa~");
            Console.Read();
        }
    }
}
```
