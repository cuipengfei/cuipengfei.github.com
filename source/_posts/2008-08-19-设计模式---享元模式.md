---
title: 设计模式---享元模式
date: 2008-08-19 20:07:00
tags: 设计模式读书笔记
---

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Collections;

namespace ConsoleApplication1
{
    class MovieTheater
    {
        private Hashtable movies = new Hashtable();

        public void GiveMeAMovie(string name)
        {
            Movie m;
            if (movies.ContainsKey(name))
            {
                m = (Movie) movies[name];
            }
            else
            {
                m = new ConcreteMovie(name);
                movies.Add(name, m);
            }

            m.ShowTheMovie();
        }

        public void HowManyMoviesHaveWeOrdered()
        {
            Console.WriteLine(movies.Count);
        }
    }

    abstract class Movie
    {
        protected string name;

        public Movie(string n)
        {
            this.name = n;
        }

        public abstract void ShowTheMovie();
    }

    class ConcreteMovie : Movie
    {
        public ConcreteMovie(string n)
            : base(n)
        {
        }

        public override void ShowTheMovie()
        {
            Console.WriteLine(name);
        }
    }

    class Client
    {
        public static void Main()
        {
            MovieTheater mth = new MovieTheater();
            mth.GiveMeAMovie("Hell Boy");
            mth.GiveMeAMovie("Wanted");
            mth.GiveMeAMovie("Wall-E");
            mth.GiveMeAMovie("Hell Boy");
            mth.GiveMeAMovie("Hell Boy");
            mth.GiveMeAMovie("Wanted");
            mth.GiveMeAMovie("Wall-E");
            mth.GiveMeAMovie("Hell Boy");
            mth.HowManyMoviesHaveWeOrdered();
            Console.Read();
        }
    }
}
```
![](https://p-blog.csdn.net/images/p_blog_csdn_net/cuipengfei1/EntryImages/20080819/ClassDiagram1.jpg)



