---
title: 数据结构：用队列模拟理发店的排队情况（C#）
date: 2008-11-15 12:17:00
tags: 杂7杂8
---
题目内容：使用的排队现象，通过仿真手法评估其营业状况。  
*基本要求：设某理发馆有N把理发椅，可同时为N位顾客进行理发。   
*当顾客进门时，若有空椅，则可以立即坐下理发，否则需要依次排队等候。   
*一旦有顾客理完发离去时，排在队头的顾客便可开始理发。   
*若理发馆每天连续营业T小时，求一天内顾客在理发馆内的平均逗留时间   
*顾客排队等候的队列平均长度 

N和T在运行的时候输入

用C#写的，有注释，很混乱，请高人指教~~

  1. using  System; 
  2. using  System.Collections.Generic; 
  3. using  System.Text; 
  4. using  System.Collections; 
  5.   6. namespace  队列应用 
  7. { 
  8. class  Seat 
  9. { 
  10.   11. public  bool  IsFree; 
  12. public  Customer cus=  null  ; 
  13. public  Seat(  bool  b) 
  14. { 
  15. IsFree = b; 
  16. } 
  17. } 
  18.   19.   20. class  Customer 
  21. { 
  22. public  int  cometime; 
  23. public  int  timetogo; 
  24. public  int  cost =30-  new  Random().Next(10);  //理发需要20~30分钟 
  25.   26. public  Customer() { } 
  27. } 
  28.   29.   30. class  Program 
  31. { 
  32. static  void  Main(  string  [] args) 
  33. { 
  34.   35. System.Console.WriteLine(  "每天营业多少小时？"  ); 
  36. int  workinghours =  int  .Parse(Console.ReadLine()); 
  37. System.Console.WriteLine(  "有多少个椅子？"  ); 
  38. int  seats =  int  .Parse(Console.ReadLine()); 
  39. Process(seats,workinghours); 
  40. Console.ReadLine(); 
  41. } 
  42.   43.   44. static  void  Process (  int  num,  int  time) 
  45. { 
  46. //------------准备变量------------------------ 
  47. Queue q =  new  Queue();  //队列 
  48. Seat[] S=  new  Seat[num];  //所有的椅子 
  49. for  (  int  i = 0; i <num; i++)  //初始化椅子 
  50. { 
  51. S[i] =  new  Seat(  true  ); 
  52. S[i].cus =  null  ; 
  53. } 
  54.   55. int  somebodycome = 1;  //第一个顾客来的时间 
  56. //int count = 0;//顾客计数器 
  57. List<Customer> cuslist =  new  List<Customer>(); 
  58.   59. int  st = num;  //椅子数 
  60.   61. int  Qlen = 0;  //队列长度 
  62. int  Qchangetime = 0;  //队列长度改变次数 
  63. //------------准备变量-------------------------- 
  64.   65.   66.   67.   68.   69. for  (  int  t = 1; t <= time*60; t ++)  //时间从第一分钟开始流逝，每分钟检查状态 
  70. { 
  71. //--------检查现在有没有人需要离开-------------- 
  72. CheckLeave(S, t); 
  73. //--------检查现在有没有人需要离开-------------- 
  74.   75.   76. //-------检查排队的人是否可以找到座位--------- 
  77.   78. CheckSeat(q, S,  ref  Qlen,  ref  Qchangetime, t); 
  79. //-------检查排队的人是否可以找到座位--------- 
  80.   81.   82.   83. //-------------如果来人了，有座位就坐下，没座位就排队------------------- 
  84. if  (t  == somebodycome) 
  85. { 
  86. bool  IsSitted =  false  ;  //当前刚来的顾客是否找到了座位 
  87. Customer c =  new  Customer(); 
  88. c.cometime = t; 
  89. cuslist.Add(c); 
  90.   91.   92. foreach  (Seat s  in  S) 
  93. { 
  94. if  (s.IsFree ==  true  ) 
  95. { 
  96. s.IsFree =  false  ; 
  97. s.cus = c; 
  98. s.cus.timetogo = t+s.cus.cost; 
  99.   100. IsSitted =  true  ; 
  101. break  ; 
  102. } 
  103. } 
  104.   105. if  (IsSitted ==  false  ) 
  106. { 
  107. q.Enqueue(c); 
  108. Qlen += q.Count; 
  109. Qchangetime++; 
  110. } 
  111. else 
  112. { 
  113. IsSitted =  false  ; 
  114. } 
  115.   116. somebodycome +=10-  new  Random().Next(5);  //下一个顾客来的时间,假设5~10分钟之内会有一个 
  117. } 
  118. //------如果来人了，有座位就坐下，没座位就排队--------- 
  119.   120. } 
  121.   122. //---------加班---------- 
  123. bool  Inseat =  true  ; 
  124. //bool InQ = true; 
  125. bool  KeepWorking =  true  ; 
  126. int  curtime = time * 60 + 1; 
  127. while  (KeepWorking) 
  128. { 
  129. CheckLeave(S, curtime); 
  130. CheckSeat(q, S,  ref  Qlen,  ref  Qchangetime, curtime); 
  131.   132.   133. foreach  (Seat s  in  S) 
  134. { 
  135. if  (s.IsFree==  false  ) 
  136. { 
  137. Inseat =  true  ; 
  138. break  ; 
  139. } 
  140. else 
  141. { 
  142. Inseat =  false  ; 
  143. } 
  144. } 
  145.   146.   147. KeepWorking = Inseat; 
  148. curtime++; 
  149. } 
  150. //---------加班---------- 
  151.   152.   153.   154. //-------------- 
  155. int  no = 1; 
  156. foreach  (Customer c  in  cuslist) 
  157. { 
  158. Console.Write(  "第{0}个顾客  "  ,no); 
  159. Console.Write(  "来的时间："  +c.cometime); 
  160. Console.WriteLine(  "  走的时间:"  +c.timetogo); 
  161. no++; 
  162. }  //------------------ 
  163.   164.   165. //--------打印结果------------- 
  166. int  totalstaytime = 0; 
  167. foreach  (Customer c  in  cuslist) 
  168. { 
  169. int  staytime = c.timetogo - c.cometime; 
  170. totalstaytime += staytime; 
  171. } 
  172. int  averragestay = totalstaytime / cuslist.Count; 
  173. System.Console.WriteLine(  "平均逗留时间:"  +averragestay); 
  174. System.Console.WriteLine(  "顾客数量:"  + cuslist.Count); 
  175. if  (Qchangetime != 0) 
  176. { 
  177. int  averagelen = Qlen / Qchangetime; 
  178. Console.WriteLine(  "队列平均长度："  + averagelen); 
  179. } 
  180. else 
  181. { 
  182. Console.WriteLine(  "椅子充足，不用排队"  ); 
  183. } 
  184. Console.WriteLine(  "加班时间："  +(curtime-time*60)+  "分钟"  ); 
  185. //--------打印结果------------ 
  186. } 
  187.   188. private  static  void  CheckSeat(Queue q, Seat[] S,  ref  int  Qlen,  ref  int  Qchangetime,  int  t) 
  189. { 
  190. if  (q.Count != 0)  //如果有人排队 
  191. { 
  192. foreach  (Seat s  in  S) 
  193. { 
  194. if  (s.IsFree ==  true  ) 
  195. { 
  196. s.IsFree =  false  ; 
  197. s.cus = (Customer)q.Dequeue(); 
  198. Qlen += q.Count; 
  199. Qchangetime++; 
  200. s.cus.timetogo = t + s.cus.cost;  // 
  201. } 
  202. } 
  203. } 
  204. } 
  205.   206. private  static  void  CheckLeave(Seat[] S,  int  t) 
  207. { 
  208. foreach  (Seat s  in  S) 
  209. { 
  210. if  (s.cus !=  null  ) 
  211. { 
  212. if  (s.cus.timetogo == t) 
  213. { 
  214. s.IsFree =  true  ; 
  215. } 
  216. } 
  217. } 
  218. } 
  219. } 
  220. } 
  221. 

[ ![](https://profile.csdnimg.cn/5/2/5/3_cuipengfei1)
![](https://g.csdnimg.cn/static/user-reg-year/1x/11.png)
](https://blog.csdn.net/cuipengfei1)





