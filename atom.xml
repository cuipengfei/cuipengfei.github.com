<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å´”é¹é£çš„Blog</title>
  
  
  <link href="https://cuipengfei.me/atom.xml" rel="self"/>
  
  <link href="https://cuipengfei.me/"/>
  <updated>2025-01-04T16:00:00.000Z</updated>
  <id>https://cuipengfei.me/</id>
  
  <author>
    <name>å´”é¹é£</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Feedlyç¡¬å¹¿-å›å½’RSS</title>
    <link href="https://cuipengfei.me/blog/2025/01/05/go-back-to-rss/"/>
    <id>https://cuipengfei.me/blog/2025/01/05/go-back-to-rss/</id>
    <published>2025-01-04T16:00:00.000Z</published>
    <updated>2025-01-04T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<pre><code class="highlight mermaid">flowchart TD  subgraph è¢«åŠ¨ä¿¡æ¯æ¥æ”¶    style è¢«åŠ¨ä¿¡æ¯æ¥æ”¶ fill:#f9d6c1,stroke:#000,stroke-width:2px;    A[è¢«åŠ¨æ¥å—ä¿¡æ¯] --&gt; B[ç®—æ³•è¿‡åº¦æ§åˆ¶]    B --&gt; C[ä¿¡æ¯èŒ§æˆ¿]    C --&gt; D[æ³¨æ„åŠ›æ¶ˆè€—]  end  subgraph ä¿¡æ¯ä¸»åŠ¨æ¶ˆè´¹    style ä¿¡æ¯ä¸»åŠ¨æ¶ˆè´¹ fill:#c1e1f9,stroke:#000,stroke-width:2px;    E[å›å½’RSS] --&gt; F[æŒæ¡ä¿¡æ¯ä¸»åŠ¨æƒ]    F --&gt; G[è‡ªä¸»è®¢é˜…]    G --&gt; H[æ§åˆ¶ä¿¡æ¯æ‘„å…¥è´¨é‡]    H --&gt; I[ä¸»åŠ¨é€‰æ‹©ä¿¡æ¯æ¥æº]    I --&gt; J[é¿å…æ— ç”¨ä¿¡æ¯è½°ç‚¸]    J --&gt; K[å‡å°‘å¹²æ‰°]    K --&gt; L[ä¸“æ³¨é«˜è´¨é‡å†…å®¹]    L --&gt; M[äº«å—çº¯ç²¹é˜…è¯»ä¹è¶£]    M --&gt; N[é«˜è´¨é‡é˜…è¯»ä½“éªŒ]    N --&gt; O[æ³¨æ„åŠ›å›å½’æœ‰ä»·å€¼å†…å®¹]    O --&gt; F  end  D --&gt; E</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;pre&gt;&lt;code class=&quot;highlight mermaid&quot;&gt;flowchart TD
  subgraph è¢«åŠ¨ä¿¡æ¯æ¥æ”¶
    style è¢«åŠ¨ä¿¡æ¯æ¥æ”¶ fill:#f9d6c1,stroke:#000,stroke-width:2px;
    A[è¢«åŠ¨æ¥å—ä¿¡æ¯</summary>
      
    
    
    
    
    <category term="RSS" scheme="https://cuipengfei.me/tags/RSS/"/>
    
    <category term="Feedly" scheme="https://cuipengfei.me/tags/Feedly/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ LibreOffice å¯¼å‡ºExcel åˆ° PDF è¶…é“¾æ¥ä¸¢å¤±é—®é¢˜</title>
    <link href="https://cuipengfei.me/blog/2024/07/28/libre-jod-single-page-excel/"/>
    <id>https://cuipengfei.me/blog/2024/07/28/libre-jod-single-page-excel/</id>
    <published>2024-07-27T16:00:00.000Z</published>
    <updated>2024-07-27T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h1><p>åœ¨ä½¿ç”¨LibreOfficeçš„Calcç»„ä»¶å°†ç”µå­è¡¨æ ¼å¯¼å‡ºä¸ºPDFæ–‡ä»¶æ—¶ï¼Œå¦‚æœå¯ç”¨äº†â€œWhole sheet exportâ€ï¼ˆæ•´é¡µå¯¼å‡ºï¼‰é€‰é¡¹ï¼Œå¯¼å‡ºçš„PDFæ–‡ä»¶ä¸­çš„è¶…é“¾æ¥å°†ä¸ä¼šä¿ç•™åŸå§‹çš„URLï¼Œè€Œæ˜¯æ˜¾ç¤ºä¸ºæœ¬åœ°æ–‡ä»¶è·¯å¾„ã€‚</p><p>è¿™ä¸ªé—®é¢˜åœ¨</p><ol><li><a href="https://ask.libreoffice.org/t/web-hyperlinks-not-preserved-after-export-to-pdf/96762">LibreOffice å®˜æ–¹è®ºå›ä¸Šçš„æé—®</a></li><li><a href="https://stackoverflow.com/questions/78799273/implementing-a-custom-whole-sheet-export-via-uno-api-to-preserve-hyperlinks-in">Stack Overflow ä¸Šçš„æé—®</a></li></ol><p>ä¸Šéƒ½æœ‰è®¨è®ºã€‚</p><h1 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h1><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨LibreOfficeçš„UNO APIæ¥å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ul><li>éå†Calcæ–‡æ¡£ä¸­çš„æ¯ä¸ªå·¥ä½œè¡¨ã€‚</li><li>è®¡ç®—æ¯ä¸ªå·¥ä½œè¡¨å†…å®¹é€‚åº”ä¸€é¡µæ‰€éœ€çš„æ€»å®½åº¦å’Œé«˜åº¦ã€‚</li><li>æ ¹æ®è¿™äº›å°ºå¯¸ä¸ºæ¯ä¸ªå·¥ä½œè¡¨ç”Ÿæˆè‡ªå®šä¹‰çš„çº¸å¼ å¤§å°ã€‚</li><li>ä½¿ç”¨è‡ªå®šä¹‰çº¸å¼ å¤§å°å¯¼å‡ºPDFï¼ŒåŒæ—¶ç¡®ä¿ä¸ä½¿ç”¨â€œWhole sheet exportâ€é€‰é¡¹ï¼Œä»¥ä¿ç•™è¶…é“¾æ¥ã€‚</li></ul><h1 id="ExcelSinglePageFilterè§£å†³æ–¹æ¡ˆ"><a href="#ExcelSinglePageFilterè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ExcelSinglePageFilterè§£å†³æ–¹æ¡ˆ"></a>ExcelSinglePageFilterè§£å†³æ–¹æ¡ˆ</h1><p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œ<code>ExcelSinglePageFilter</code>Javaç±»å®ç°äº†è‡ªå®šä¹‰çš„PDFå¯¼å‡ºè¿‡æ»¤å™¨ã€‚</p><p>ä»¥ä¸‹æ˜¯è¯¥è¿‡æ»¤å™¨å¦‚ä½•è§£å†³é—®é¢˜çš„è¯¦ç»†è§£æã€‚</p><h1 id="è¿‡æ»¤å™¨åˆå§‹åŒ–ä¸æ–‡æ¡£æ£€æŸ¥"><a href="#è¿‡æ»¤å™¨åˆå§‹åŒ–ä¸æ–‡æ¡£æ£€æŸ¥" class="headerlink" title="è¿‡æ»¤å™¨åˆå§‹åŒ–ä¸æ–‡æ¡£æ£€æŸ¥"></a>è¿‡æ»¤å™¨åˆå§‹åŒ–ä¸æ–‡æ¡£æ£€æŸ¥</h1><p><code>ExcelSinglePageFilter</code>é¦–å…ˆæ£€æŸ¥ä¼ å…¥çš„æ–‡æ¡£æ˜¯å¦ä¸ºExcelæ–‡æ¡£ã€‚å¦‚æœä¸æ˜¯ï¼Œå®ƒå°†ç›´æ¥è°ƒç”¨é“¾å¼è°ƒç”¨<code>chain.doFilter</code>ç»§ç»­å¤„ç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">XSpreadsheetDocument</span> <span class="variable">xSpreadsheetDocument</span> <span class="operator">=</span> queryInterface(XSpreadsheetDocument.class, document);</span><br><span class="line"><span class="keyword">if</span> (xSpreadsheetDocument == <span class="literal">null</span>) &#123;</span><br><span class="line">    chain.doFilter(context, document);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å·¥ä½œè¡¨éå†ä¸å¤„ç†"><a href="#å·¥ä½œè¡¨éå†ä¸å¤„ç†" class="headerlink" title="å·¥ä½œè¡¨éå†ä¸å¤„ç†"></a>å·¥ä½œè¡¨éå†ä¸å¤„ç†</h1><p>æ¥ç€ï¼Œè¯¥è¿‡æ»¤å™¨éå†æ‰€æœ‰å·¥ä½œè¡¨ï¼Œå¹¶ä¸ºæ¯ä¸ªå·¥ä½œè¡¨å¼‚æ­¥æ‰§è¡Œè°ƒæ•´æ“ä½œã€‚å¯¹äºéšè—çš„å·¥ä½œè¡¨ï¼Œå®ƒå°†è·³è¿‡å¤„ç†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String[] sheetNames = xSpreadsheetDocument.getSheets().getElementNames();</span><br><span class="line">CompletableFuture[] futures = Arrays.stream(sheetNames).map(sheetName -&gt; CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">    <span class="comment">// ... çœç•¥éƒ¨åˆ†ä»£ç  ...</span></span><br><span class="line">    adjustOneSheet(sheetName, sheet, xPageStyles);</span><br><span class="line">&#125;)).toList().toArray(<span class="keyword">new</span> <span class="title class_">CompletableFuture</span>[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure><h1 id="å¤„ç†æ¯ä¸ªå·¥ä½œè¡¨"><a href="#å¤„ç†æ¯ä¸ªå·¥ä½œè¡¨" class="headerlink" title="å¤„ç†æ¯ä¸ªå·¥ä½œè¡¨"></a>å¤„ç†æ¯ä¸ªå·¥ä½œè¡¨</h1><p>å¯¹äºæ¯ä¸ªå·¥ä½œè¡¨ï¼Œä»£ç é¦–å…ˆæ£€æŸ¥å·¥ä½œè¡¨æ˜¯å¦å¯è§ï¼Œç„¶åè®¡ç®—å·¥ä½œè¡¨çš„æ€»å®½åº¦å’Œé«˜åº¦ï¼ŒåŒ…æ‹¬å•å…ƒæ ¼å’Œå›¾å½¢å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">adjustOneSheet</span><span class="params">(String sheetName, XSpreadsheet sheet, XNameAccess xPageStyles)</span> &#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—å·¥ä½œè¡¨çš„æ€»å®½åº¦å’Œé«˜åº¦</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">totalWidth</span> <span class="operator">=</span> getTotalWidth(getxColumnRowRange(sheet), getLastColumn(sheet));</span><br><span class="line">    <span class="type">int</span> <span class="variable">totalHeight</span> <span class="operator">=</span> getTotalHeight(getxColumnRowRange(sheet), getLastRow(sheet));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒ…æ‹¬å›¾å½¢å¯¹è±¡çš„å°ºå¯¸</span></span><br><span class="line">    <span class="type">Size</span> <span class="variable">graphicalSize</span> <span class="operator">=</span> getGraphicalObjectsSize(sheet);</span><br><span class="line">    totalWidth = Math.max(totalWidth, graphicalSize.Width);</span><br><span class="line">    totalHeight = Math.max(totalHeight, graphicalSize.Height);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®é¡µé¢æ ·å¼å±æ€§</span></span><br><span class="line">    <span class="type">XPropertySet</span> <span class="variable">xPageStyleProps</span> <span class="operator">=</span> getPageStyleProps(sheet, xPageStyles);</span><br><span class="line">    xPageStyleProps.setPropertyValue(<span class="string">&quot;Size&quot;</span>, <span class="keyword">new</span> <span class="title class_">Size</span>(totalWidth, totalHeight));</span><br><span class="line">    setMarginToZero(xPageStyleProps);</span><br><span class="line">    xPageStyleProps.setPropertyValue(<span class="string">&quot;ScaleToPages&quot;</span>, (<span class="type">short</span>) <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è®¡ç®—å›¾å½¢å¯¹è±¡å°ºå¯¸"><a href="#è®¡ç®—å›¾å½¢å¯¹è±¡å°ºå¯¸" class="headerlink" title="è®¡ç®—å›¾å½¢å¯¹è±¡å°ºå¯¸"></a>è®¡ç®—å›¾å½¢å¯¹è±¡å°ºå¯¸</h1><p>getGraphicalObjectsSizeæ–¹æ³•ç”¨äºè®¡ç®—å·¥ä½œè¡¨ä¸­æ‰€æœ‰å›¾å½¢å¯¹è±¡æ‰€å çš„æœ€å¤§å®½åº¦å’Œé«˜åº¦ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Size <span class="title function_">getGraphicalObjectsSize</span><span class="params">(XSpreadsheet sheet)</span> &#123;</span><br><span class="line">    <span class="type">XDrawPageSupplier</span> <span class="variable">drawPageSupplier</span> <span class="operator">=</span> queryInterface(XDrawPageSupplier.class, sheet);</span><br><span class="line">    <span class="type">XDrawPage</span> <span class="variable">drawPage</span> <span class="operator">=</span> drawPageSupplier.getDrawPage();</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> drawPage.getCount();</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxWidth</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxHeight</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">        <span class="type">XShape</span> <span class="variable">shape</span> <span class="operator">=</span> queryInterface(XShape.class, drawPage.getByIndex(i));</span><br><span class="line">        <span class="type">Point</span> <span class="variable">position</span> <span class="operator">=</span> shape.getPosition();</span><br><span class="line">        <span class="type">Size</span> <span class="variable">size</span> <span class="operator">=</span> shape.getSize();</span><br><span class="line">        maxWidth = Math.max(maxWidth, position.X + size.Width);</span><br><span class="line">        maxHeight = Math.max(maxHeight, position.Y + size.Height);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Size</span>(maxWidth, maxHeight);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è®¡ç®—æ€»å®½åº¦å’Œæ€»é«˜åº¦"><a href="#è®¡ç®—æ€»å®½åº¦å’Œæ€»é«˜åº¦" class="headerlink" title="è®¡ç®—æ€»å®½åº¦å’Œæ€»é«˜åº¦"></a>è®¡ç®—æ€»å®½åº¦å’Œæ€»é«˜åº¦</h1><p>getTotalWidthå’ŒgetTotalHeightæ–¹æ³•åˆ†åˆ«ç”¨äºè®¡ç®—å·¥ä½œè¡¨çš„æ€»å®½åº¦å’Œæ€»é«˜åº¦ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getTotalWidth</span><span class="params">(XColumnRowRange columnRowRange, <span class="type">int</span> endColumn)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">totalWidth</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt;= endColumn; j++) &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">column</span> <span class="operator">=</span> columnRowRange.getColumns().getByIndex(j);</span><br><span class="line">        <span class="type">XPropertySet</span> <span class="variable">columnProps</span> <span class="operator">=</span> queryInterface(XPropertySet.class, column);</span><br><span class="line">        totalWidth += (<span class="type">int</span>) columnProps.getPropertyValue(<span class="string">&quot;Width&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> totalWidth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getTotalHeight</span><span class="params">(XColumnRowRange columnRowRange, <span class="type">int</span> endRow)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">totalHeight</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= endRow; i++) &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">row</span> <span class="operator">=</span> columnRowRange.getRows().getByIndex(i);</span><br><span class="line">        <span class="type">XPropertySet</span> <span class="variable">rowProps</span> <span class="operator">=</span> queryInterface(XPropertySet.class, row);</span><br><span class="line">        totalHeight += (<span class="type">int</span>) rowProps.getPropertyValue(<span class="string">&quot;Height&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> totalHeight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å®Œæˆå¯¼å‡º"><a href="#å®Œæˆå¯¼å‡º" class="headerlink" title="å®Œæˆå¯¼å‡º"></a>å®Œæˆå¯¼å‡º</h1><p>æœ€åï¼Œç­‰å¾…æ‰€æœ‰å¼‚æ­¥ä»»åŠ¡å®Œæˆåï¼Œè°ƒç”¨é“¾å¼è°ƒç”¨chain.doFilterç»§ç»­æ‰§è¡Œæ ‡å‡†çš„PDFå¯¼å‡ºæµç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture.allOf(futures).join();</span><br><span class="line">chain.doFilter(context, document);</span><br></pre></td></tr></table></figure><h1 id="ä»£ç é“¾æ¥"><a href="#ä»£ç é“¾æ¥" class="headerlink" title="ä»£ç é“¾æ¥"></a>ä»£ç é“¾æ¥</h1><p>ä¸Šè¿°è§£å†³æ–¹æ¡ˆçš„åŸå§‹ä»£ç å¯ä»¥åœ¨GitHubä¸Šæ‰¾åˆ°ï¼Œé“¾æ¥ä¸ºï¼š</p><p><a href="https://github.com/cuipengfei/jodconverter-samples/blob/main/samples/spring-boot-rest/src/main/java/org/jodconverter/sample/rest/ExcelSinglePageFilter.java">https://github.com/cuipengfei/jodconverter-samples/blob/main/samples/spring-boot-rest/src/main/java/org/jodconverter/sample/rest/ExcelSinglePageFilter.java</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ExcelSinglePageFilteré€šè¿‡è‡ªå®šä¹‰çš„PDFå¯¼å‡ºé€»è¾‘ï¼ŒæˆåŠŸé¿å…äº†ä½¿ç”¨â€œWhole sheet exportâ€é€‰é¡¹ï¼Œä»è€Œè§£å†³äº†è¶…é“¾æ¥åœ¨PDFä¸­ä¸¢å¤±çš„é—®é¢˜ã€‚è¿™ç§æ–¹æ³•ä¸ä»…ä¿ç•™äº†è¶…é“¾æ¥çš„å®Œæ•´æ€§ï¼Œè€Œä¸”è¿˜æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥è°ƒæ•´æ¯ä¸ªå·¥ä½œè¡¨çš„æ˜¾ç¤ºå°ºå¯¸ï¼Œç¡®ä¿å®ƒä»¬åœ¨PDFä¸­ä»¥å•é¡µçš„å½¢å¼å‘ˆç°ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é—®é¢˜æè¿°&quot;&gt;&lt;a href=&quot;#é—®é¢˜æè¿°&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜æè¿°&quot;&gt;&lt;/a&gt;é—®é¢˜æè¿°&lt;/h1&gt;&lt;p&gt;åœ¨ä½¿ç”¨LibreOfficeçš„Calcç»„ä»¶å°†ç”µå­è¡¨æ ¼å¯¼å‡ºä¸ºPDFæ–‡ä»¶æ—¶ï¼Œå¦‚æœå¯ç”¨äº†â€œWhole sheet exportâ€ï¼ˆ</summary>
      
    
    
    
    
    <category term="LibreOffice" scheme="https://cuipengfei.me/tags/LibreOffice/"/>
    
    <category term="PDF" scheme="https://cuipengfei.me/tags/PDF/"/>
    
    <category term="JODConverter" scheme="https://cuipengfei.me/tags/JODConverter/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºLibreOfficeçš„MS Officeæ–‡æ¡£æ ¼å¼è½¬æ¢</title>
    <link href="https://cuipengfei.me/blog/2024/02/04/libre-jod/"/>
    <id>https://cuipengfei.me/blog/2024/02/04/libre-jod/</id>
    <published>2024-02-04T07:21:24.000Z</published>
    <updated>2024-02-04T07:21:24.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å°†Microsoft-Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯"><a href="#å°†Microsoft-Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯" class="headerlink" title="å°†Microsoft Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯"></a>å°†Microsoft Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯</h1><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å°†Microsoft Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼š</p><ul><li>å…¼å®¹æ€§é—®é¢˜ï¼šä¸ä¸åŒçš„åŠå…¬è½¯ä»¶æˆ–æ“ä½œç³»ç»Ÿè¿›è¡Œäº¤äº’ï¼Œå¯èƒ½éœ€è¦å°†MS Officeæ–‡ä»¶è½¬æ¢ä¸ºæ›´é€šç”¨çš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ä¸æ²¡æœ‰å®‰è£…Microsoft Officeçš„äººåˆ†äº«æ–‡æ¡£ï¼Œå°†å…¶è½¬æ¢ä¸ºPDFæ ¼å¼å¯èƒ½æ›´åˆé€‚ã€‚</li><li>å½’æ¡£å’Œå­˜æ¡£ï¼šå°†Officeæ–‡ä»¶è½¬æ¢ä¸ºæ›´ç¨³å®šã€å¯æŒä¹…ä¿å­˜çš„æ ¼å¼å¯ä»¥ç¡®ä¿æ–‡ä»¶çš„é•¿æœŸä¿å­˜å’Œå½’æ¡£ã€‚æŸäº›æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚PDF&#x2F;Aï¼‰ä¸“é—¨ç”¨äºé•¿æœŸå­˜æ¡£ç›®çš„ï¼Œä»¥ç¡®ä¿æ–‡ä»¶å†…å®¹çš„å®Œæ•´æ€§å’Œå¯è®¿é—®æ€§ã€‚</li><li>æ•°æ®æå–ï¼šä½ å¯èƒ½åªå¯¹æ–‡æ¡£ä¸­çš„ç‰¹å®šæ•°æ®æˆ–å†…å®¹æ„Ÿå…´è¶£ã€‚é€šè¿‡å°†Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼ˆå¦‚çº¯æ–‡æœ¬æˆ–CSVï¼‰ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°æå–æ‰€éœ€çš„æ•°æ®ï¼Œå¹¶åœ¨å…¶ä»–åº”ç”¨ç¨‹åºä¸­è¿›è¡Œåˆ†ææˆ–å¤„ç†ã€‚</li><li>ç½‘é¡µå‘å¸ƒï¼šå¦‚æœè¦å°†MS Officeæ–‡ä»¶å‘å¸ƒåˆ°ç½‘é¡µä¸Šï¼Œå¯èƒ½éœ€è¦å°†å…¶è½¬æ¢ä¸ºHTMLæˆ–å…¶ä»–ç½‘é¡µå‹å¥½çš„æ ¼å¼ï¼Œä»¥ç¡®ä¿æ–‡ä»¶åœ¨ç½‘é¡µä¸Šæ­£ç¡®æ˜¾ç¤ºã€‚</li></ul><h1 id="LibreOffice-å¾®è½¯Officeçš„å¼€æºæ›¿ä»£"><a href="#LibreOffice-å¾®è½¯Officeçš„å¼€æºæ›¿ä»£" class="headerlink" title="LibreOffice - å¾®è½¯Officeçš„å¼€æºæ›¿ä»£"></a>LibreOffice - å¾®è½¯Officeçš„å¼€æºæ›¿ä»£</h1><p>LibreOfficeæ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºçš„åŠå…¬å¥—ä»¶ï¼Œåœ¨æŸç§ç¨‹åº¦ä¸Šå¯ä»¥è¢«è§†ä¸ºå¾®è½¯Officeçš„å¼€æºæ›¿ä»£å“ã€‚</p><ul><li>LibreOffice Writerï¼šå¯¹åº”äºMicrosoft Wordã€‚</li><li>LibreOffice Calcï¼šå¯¹åº”äºMicrosoft Excelã€‚</li><li>LibreOffice Impressï¼šå¯¹åº”äºMicrosoft PowerPointã€‚</li></ul><p><img data-src="/images/libre/image.png" alt="alt text"></p><h1 id="LibreOfficeæ”¯æŒçš„è½¬æ¢æ ¼å¼"><a href="#LibreOfficeæ”¯æŒçš„è½¬æ¢æ ¼å¼" class="headerlink" title="LibreOfficeæ”¯æŒçš„è½¬æ¢æ ¼å¼"></a>LibreOfficeæ”¯æŒçš„è½¬æ¢æ ¼å¼</h1><p>LibreOfficeæ”¯æŒå¹¿æ³›çš„è½¬æ¢æ ¼å¼ã€‚å…·ä½“è¯·å‚è€ƒå¦‚ä¸‹çš„è¡¨æ ¼ï¼š</p><table aligh="center">    <tr><th align="left">Format Family</th><th align="left">From (any of)</th><th align="left">To (any of)</th></tr>    <tr valign="top">        <th align="left">Text</th>        <td>            <samp><b>*.odt</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Text<br>            <samp><b>*.ott</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Text Template<br>            <samp><b>*.sxw</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenOffice.org 1.0 Text<br>            <samp><b>*.rtf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Rich Text Format<br>            <samp><b>*.doc</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Microsoft Word<br>            <samp><b>*.docx</b>&nbsp;&nbsp;&nbsp;</samp>Microsoft Word XML<br>            <samp><b>*.wpd</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>WordPerfect<br>            <samp><b>*.txt</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Plain Text<br>            <samp><b>*.html</b>&nbsp;&nbsp;&nbsp;</samp>HTML        </td>        <td>            <samp><b>*.pdf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Portable Document Format<br>            <samp><b>*.odt</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Text<br>            <samp><b>*.ott</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Text Template<br>            <samp><b>*.sxw</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenOffice.org 1.0 Text<br>            <samp><b>*.rtf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Rich Text Format<br>            <samp><b>*.doc</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Microsoft Word<br>            <samp><b>*.docx</b>&nbsp;&nbsp;&nbsp;</samp>Microsoft Word XML<br>            <samp><b>*.txt</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Plain Text<br>            <samp><b>*.html</b>&nbsp;&nbsp;&nbsp;</samp>HTML<br>            <samp><b>*.wiki</b>&nbsp;&nbsp;&nbsp;</samp>MediaWiki wikitext        </td>    </tr>    <tr valign="top">        <th align="left">Spreadsheet</th>        <td>            <samp><b>*.ods</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Spreadsheet<br>            <samp><b>*.ots</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Spreadsheet Template<br>            <samp><b>*.sxc</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenOffice.org 1.0 Spreadsheet<br>            <samp><b>*.xls</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Microsoft Excel<br>            <samp><b>*.xlsx</b>&nbsp;&nbsp;&nbsp;</samp>Microsoft Excel XML<br>            <samp><b>*.csv</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Comma-Separated Values<br>            <samp><b>*.tsv</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Tab-Separated Values        </td>        <td>            <samp><b>*.pdf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Portable Document Format<br>            <samp><b>*.ods</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Spreadsheet<br>            <samp><b>*.ots</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Spreadsheet Template<br>            <samp><b>*.sxc</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenOffice.org 1.0 Spreadsheet<br>            <samp><b>*.xls</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Microsoft Excel<br>            <samp><b>*.xlsx</b>&nbsp;&nbsp;&nbsp;</samp>Microsoft Excel XML<br>            <samp><b>*.csv</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Comma-Separated Values<br>            <samp><b>*.tsv</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Tab-Separated Values<br>            <samp><b>*.html</b>&nbsp;&nbsp;&nbsp;</samp>HTML        </td>    </tr>    <tr valign="top">        <th align="left">Presentation</th>        <td>            <samp><b>*.odp</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Presentation<br>            <samp><b>*.otp</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Presentation Template<br>            <samp><b>*.sxi</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenOffice.org 1.0 Presentation<br>            <samp><b>*.ppt</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Microsoft PowerPoint<br>            <samp><b>*.pptx</b>&nbsp;&nbsp;&nbsp;</samp>Microsoft PowerPoint XML        </td>        <td>            <samp><b>*.pdf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Portable Document Format<br>            <samp><b>*.swf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Macromedia Flash<br>            <samp><b>*.odp</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Presentation<br>            <samp><b>*.otp</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Presentation Template<br>            <samp><b>*.sxi</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenOffice.org 1.0 Presentation<br>            <samp><b>*.ppt</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Microsoft PowerPoint<br>            <samp><b>*.pptx</b>&nbsp;&nbsp;&nbsp;</samp>Microsoft PowerPoint XML<br>            <samp><b>*.html</b>&nbsp;&nbsp;&nbsp;</samp>HTML        </td>    </tr>    <tr valign="top">        <th align="left">Drawing</th>        <td>            <samp><b>*.odg</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Drawing<br>            <samp><b>*.otg</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>OpenDocument Drawing Template        </td>        <td>            <samp><b>*.svg</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Scalable Vector Graphics<br>            <samp><b>*.swf</b>&nbsp;&nbsp;&nbsp;&nbsp;</samp>Macromedia Flash        </td>    </tr></table><h1 id="LibreOfficeçš„headlessæ¨¡å¼"><a href="#LibreOfficeçš„headlessæ¨¡å¼" class="headerlink" title="LibreOfficeçš„headlessæ¨¡å¼"></a>LibreOfficeçš„headlessæ¨¡å¼</h1><p>ä¸å¸¸è§çš„Chromiumçš„headlessæ¨¡å¼ç±»ä¼¼ï¼ŒLibreOfficeä¹Ÿæä¾›headlessæ¨¡å¼ã€‚</p><ul><li>æ²¡æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰ï¼šæ— è®ºæ˜¯LibreOfficeçš„headlessæ¨¡å¼è¿˜æ˜¯Chromiumçš„headlessæ¨¡å¼ï¼Œéƒ½åœ¨æ²¡æœ‰GUIçš„æƒ…å†µä¸‹è¿è¡Œï¼Œä¸ä¼šæ˜¾ç¤ºå¯è§çš„çª—å£æˆ–ç”¨æˆ·ç•Œé¢ã€‚</li><li>å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰æ§åˆ¶ï¼šé€šè¿‡å‘½ä»¤è¡Œæ¥å£è¿›è¡Œæ§åˆ¶å’Œæ“ä½œã€‚å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ç‰¹å®šçš„å‘½ä»¤å’Œå‚æ•°æ¥æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡å’Œæ“ä½œã€‚</li><li>è‡ªåŠ¨åŒ–å’Œæ‰¹å¤„ç†ï¼šLibreOfficeçš„headlessæ¨¡å¼å’ŒChromiumçš„headlessæ¨¡å¼éƒ½é€‚ç”¨äºè‡ªåŠ¨åŒ–å’Œæ‰¹å¤„ç†ä»»åŠ¡ã€‚</li><li>æœåŠ¡å™¨ç¯å¢ƒä¸­çš„åº”ç”¨ï¼šé€‚ç”¨äºåœ¨æœåŠ¡å™¨ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</li></ul><p>è¿™å°±ç»™åœ¨<strong>æœåŠ¡ç«¯è‡ªåŠ¨åŒ–è¿›è¡Œæ–‡æ¡£ç±»å‹è½¬æ¢</strong>æä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚</p><h1 id="èµ„æºæ± ç®¡ç†ä¸å®¹å™¨åŒ–-JodConverter"><a href="#èµ„æºæ± ç®¡ç†ä¸å®¹å™¨åŒ–-JodConverter" class="headerlink" title="èµ„æºæ± ç®¡ç†ä¸å®¹å™¨åŒ– - JodConverter"></a>èµ„æºæ± ç®¡ç†ä¸å®¹å™¨åŒ– - JodConverter</h1><p>JodConverteræ˜¯ä¸€ä¸ªç”¨äºå°†Officeæ–‡æ¡£è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„Javaåº“ã€‚å®ƒæ”¯æŒä¸LibreOfficeï¼ˆä¹Ÿå¯ä»¥æ˜¯OpenOfficeï¼‰è¿›è¡Œé›†æˆã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±ç›´æ¥ä¸headlessçš„LibreOfficeç›´æ¥é€šä¿¡æ¥å®Œæˆæ–‡æ¡£æ ¼å¼è½¬æ¢ï¼Œä¸è¿‡ç”±JodConverteræ¥ä»£åŠ³çš„å¥½å¤„æ˜¯å¾ˆæ˜æ˜¾çš„ï¼š</p><ul><li>èµ„æºæ± åŒ–</li><li>å®¹å™¨åŒ–</li></ul><p>JODConverter çš„è¿›ç¨‹ç®¡ç†å™¨ï¼ˆProcess Managerï¼‰åœ¨èµ„æºæ± å†…ç»´æŠ¤ LibreOffice è¿›ç¨‹ã€‚<br>å°† LibreOffice è¿›ç¨‹ä¿æŒåœ¨èµ„æºæ± å†…ï¼Œå¯ä»¥é¿å…æ¯æ¬¡è¿›è¡Œæ–‡æ¡£è½¬æ¢æ—¶éƒ½éœ€è¦å¯åŠ¨å’Œç»ˆæ­¢ LibreOffice è¿›ç¨‹çš„å¼€é”€ã€‚<br>å®ƒå¯ä»¥æ£€æµ‹åˆ°è¿›ç¨‹çš„å¥åº·çŠ¶æ€ï¼Œä¾‹å¦‚è¿›ç¨‹å¼‚å¸¸é€€å‡ºæˆ–å´©æºƒï¼Œç„¶åé‡‡å–ç›¸åº”çš„æªæ–½ï¼Œå¦‚é‡æ–°å¯åŠ¨è¿›ç¨‹ã€‚</p><p>JODConverter è¿˜æä¾›ä¸€ä¸ªåŸºäºDebiançš„åŸºç¡€docker imageï¼Œå…¶ä¸­å·²ç»åŒ…å«äº†LibreOfficeã€‚</p><p>æˆ‘ä»¬çš„è°ƒç”¨JODConverterçš„Javaåº”ç”¨åªéœ€è¦åŸºäºè¯¥é•œåƒbuildå‡ºæ¥å°±å¥½ã€‚</p><p><img data-src="/images/libre/libreoffice_logos_printed_on_dockers.png" alt="alt text"></p><h1 id="MS-Officeå­˜é‡æ–‡ä»¶çš„å…¼å®¹æ€§-å­—ä½“çš„å¼€æºæ›¿ä»£"><a href="#MS-Officeå­˜é‡æ–‡ä»¶çš„å…¼å®¹æ€§-å­—ä½“çš„å¼€æºæ›¿ä»£" class="headerlink" title="MS Officeå­˜é‡æ–‡ä»¶çš„å…¼å®¹æ€§ - å­—ä½“çš„å¼€æºæ›¿ä»£"></a>MS Officeå­˜é‡æ–‡ä»¶çš„å…¼å®¹æ€§ - å­—ä½“çš„å¼€æºæ›¿ä»£</h1><p><img data-src="/images/libre/compare.png" alt="alt text"></p><p>ä¸Šé¢è¿™å¼ å›¾å·¦ä¾§æ˜¯åŸç‰ˆçš„PPTï¼Œå³ä¾§æ˜¯ç”¨JOD + LibreOfficeè½¬æ¢å‡ºæ¥çš„PDFã€‚</p><p>å¯ä»¥çœ‹åˆ°å³ä¾§è½¬æ¢å‡ºPDFï¼Œæ–‡å­—ä¹‹é—´å‡ºç°äº†äº’ç›¸äº¤å‰é‡å çš„ç°è±¡ï¼Œæ•´ä¸ªæ ·å¼éƒ½ä¹±æ‰äº†ã€‚<br>è¿™å…¶å®å¹¶ä¸æ˜¯JODæˆ–è€…æ˜¯LibreOfficeçš„bugã€‚</p><p>è€Œæ˜¯ç”±äºå·¦ä¾§çš„PPTå½“ä¸­ä½¿ç”¨äº†ä¸€äº›å¾®è½¯çš„å•†ç”¨å­—ä½“ã€‚<br>è€ŒLibreOfficeè¿è¡Œåœ¨dockeré‡Œé¢ï¼Œå®ƒæ˜¯æ‹¿ä¸åˆ°è¿™äº›å¾®è½¯çš„å•†ç”¨å­—ä½“çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸åº”è¯¥æŠŠæœ‰å•†ç”¨ç‰ˆæƒçš„å­—ä½“ç½®å…¥docker imageä¸­ã€‚</p><p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›<strong>å¼€æºçš„å­—ä½“æ¥ä»£æ›¿å¾®è½¯çš„å•†ç”¨å­—ä½“</strong>ã€‚</p><p>ä¸‹å›¾æ¥è‡ªäºLibreOfficeçš„ä¸€ç¯‡åšå®¢ï¼š <a href="https://blog.documentfoundation.org/blog/2020/09/08/libreoffice-tt-replacing-microsoft-fonts/">https://blog.documentfoundation.org/blog/2020/09/08/libreoffice-tt-replacing-microsoft-fonts/</a></p><p><img data-src="https://blog.documentfoundation.org/wp-content/uploads/2020/09/Options-LibreOffice-Fonts.png" alt="font"></p><p>LibreOfficeæä¾›äº†ä¸€ä¸ªFont Replacement Tableçš„åŠŸèƒ½ã€‚</p><p>å·¦ä¾§Fontåˆ—æ˜¯å•†ç”¨å­—ä½“ï¼Œå³ä¾§Replace withåˆ—æ˜¯å¼€æºå­—ä½“ã€‚<br>ä¾‹å¦‚ï¼šå½“LibreOfficeè§åˆ°ä¸€ä¸ªpptæ–‡ä»¶å†…çš„æŸæ®µæ–‡å­—ä½¿ç”¨äº†Arialå­—ä½“æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨ç”¨Arimoå­—ä½“å»æ¸²æŸ“è¿™æ®µæ–‡å­—ã€‚<br>è¿™æ ·ï¼Œæ—¢èƒ½å¤Ÿå°½é‡ä¿æŒè§†è§‰æ•ˆæœçš„ä¸€è‡´æ€§ï¼Œä¹Ÿé¿å…ä½¿ç”¨å•†ç”¨å­—ä½“ã€‚</p><p>ä¸‹å›¾æ˜¯ä½¿ç”¨äº†å¼€æºå­—ä½“æ›¿ä»£åçš„è½¬æ¢æ•ˆæœï¼Œå³ä¾§çš„PDFå’Œå·¦ä¾§çš„PPTè§†è§‰å·®å¼‚å·²ç»ä¸å¤ªå¤§äº†ã€‚<br><img data-src="/images/libre/compare2.png" alt="alt text"></p><p>ä½œä¸ºä¸€ä¸ªLibreOffice<strong>æ¡Œé¢åº”ç”¨çš„ä½¿ç”¨è€…</strong>å¯ä»¥æŒ‰ç…§ä¸Šè¿°è¯´æ˜æ¥åšé…ç½®ï¼Œä»è€Œæœ€å¤§ç¨‹åº¦çš„å»å…¼å®¹å¾®è½¯çš„å•†ç”¨å­—ä½“ã€‚<br>è€Œå½“æˆ‘ä»¬ä½¿ç”¨headlessæ¨¡å¼æ—¶è¯¥å¦‚ä½•åšå‡ºç­‰æ•ˆçš„é…ç½®å‘¢ï¼Ÿ</p><h1 id="LibreOffice-User-Profile"><a href="#LibreOffice-User-Profile" class="headerlink" title="LibreOffice - User Profile"></a>LibreOffice - User Profile</h1><p>ä¸Šé¢æåˆ°çš„é…ç½®é¡¹ï¼Œä¼šè¢«ä¿å­˜åœ¨LibreOffice User Profileå†…ï¼Œåœ¨ä¸åŒçš„OSå†…ä¿å­˜çš„è·¯å¾„ä¸ºï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Windows</span><br><span class="line">%APPDATA%\libreoffice\<span class="number">4</span>\<span class="keyword">user</span> <span class="title">(LibreOffice</span> <span class="number">4</span> <span class="keyword">and</span> above)</span><br><span class="line"></span><br><span class="line">GNU/Linux</span><br><span class="line">/home/<span class="tag">&lt;user name&gt;</span>/.config/libreoffice/<span class="number">4</span>/<span class="keyword">user</span> <span class="title">(LibreOffice</span> <span class="number">4</span> <span class="keyword">and</span> above)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŠŠå¼€æºå­—ä½“æ–‡ä»¶ä»¥åŠä¿å­˜ä¸‹æ¥çš„é…ç½®æ–‡ä»¶å†…ç½®å…¥docker imageå†…ã€‚<br>å¹¶é€šè¿‡JODæŒ‡å®šå¯åŠ¨LibreOfficeæ—¶çš„å‚æ•°ï¼Œè®©headlessæ¨¡å¼ä¸‹è¿è¡Œçš„LibreOfficeåŠ è½½åˆ°æ­£ç¡®çš„é…ç½®æ–‡ä»¶ï¼Œè¿›è€Œä¹Ÿèƒ½è¾¾æˆä¸Šå›¾æ‰€ç¤ºä¸€æ ·è½¬æ¢çš„æ•ˆæœã€‚</p><p><a href="https://github.com/cuipengfei/docker-image-jodconverter-examples/blob/909d9c62859b9c55b49afca0c7df7e04546042cc/Dockerfile#L38-L44">å¦‚ä¸‹Dockerfileç¤ºä¾‹</a>ä¸­æŠŠå¼€æºå­—ä½“å’Œé…ç½®æ–‡ä»¶copyè¿›Docker image</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># support more fonts</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> cjk-fonts/* /usr/share/fonts/cjk/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> condensed-fonts/* /usr/share/fonts/condensed/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ms-sub-fonts/* /usr/share/fonts/ms-sub-fonts/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add user profile config files</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./profile/LibreOffice/4/user /tmp/jodconverter/user</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/cuipengfei/jodconverter-samples/blob/98c2a6d73d3d9dfc88b0c7122b065dcd39e9ae61/samples/spring-boot-rest/src/main/resources/application.yml#L22-L26">å¦‚ä¸‹ç¤ºä¾‹</a>ä¸­æŒ‡å®štemplate-profile-dir</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jodconverter:</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">port-numbers:</span> <span class="number">2002</span><span class="string">,2003</span></span><br><span class="line">    <span class="attr">template-profile-dir:</span> <span class="string">/tmp/jodconverter</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥ç¡®ä¿JODConverteråœ¨å¯åŠ¨LibreOfficeè¿›ç¨‹çš„æ—¶å€™å¯ä»¥æ˜ç¡®åœ°å‘Šè¯‰LibreOfficeå»åŠ è½½å“ªä¸€ä»½é…ç½®æ–‡ä»¶ã€‚</p><h1 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h1><p><a href="https://github.com/jodconverter/jodconverter/wiki/Getting-Started">JODConverter Wiki</a></p><p><a href="https://github.com/jodconverter/docker-image-jodconverter-runtime/pkgs/container/jodconverter-runtime">jodconverter-runtime dockeråŸºç¡€é•œåƒ</a></p><p><a href="https://help.libreoffice.org/latest/en-US/text/shared/guide/pdf_params.html">LibreOffice PDFè½¬æ¢æ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°</a></p><p><a href="https://ask.libreoffice.org/t/libreoffice-xls-to-pdf-conversion-breaks-single-page-content-into-multiple-pages-on-ubuntu-18-04/49104/2">å®½åº¦è¿‡å¤§çš„Excelè½¬PDFçš„é—®é¢˜</a></p><p><a href="https://blog.documentfoundation.org/blog/2020/09/08/libreoffice-tt-replacing-microsoft-fonts/">å¾®è½¯å­—ä½“å…¼å®¹æ€§é—®é¢˜</a></p><p><a href="https://wiki.documentfoundation.org/UserProfile#Default_locations">LibreOffice User Profileé»˜è®¤è·¯å¾„</a></p><p><a href="https://github.com/cuipengfei/docker-image-jodconverter-examples/blob/909d9c62859b9c55b49afca0c7df7e04546042cc/Dockerfile#L38-L44">æŠŠè‡ªå®šä¹‰çš„å­—ä½“ä¸User ProfileåŠ å…¥Docker Image</a></p><p><a href="https://github.com/cuipengfei/jodconverter-samples/blob/98c2a6d73d3d9dfc88b0c7122b065dcd39e9ae61/samples/spring-boot-rest/src/main/resources/application.yml#L22-L26">ç»™JODConverteræŒ‡å®šUser Profileè·¯å¾„</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å°†Microsoft-Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯&quot;&gt;&lt;a href=&quot;#å°†Microsoft-Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;å°†Microsoft Officeæ–‡ä»¶è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼çš„åœºæ™¯&quot;&gt;&lt;/a</summary>
      
    
    
    
    
    <category term="LibreOffice" scheme="https://cuipengfei.me/tags/LibreOffice/"/>
    
    <category term="JOD" scheme="https://cuipengfei.me/tags/JOD/"/>
    
  </entry>
  
  <entry>
    <title>Spring Integration JDBCåˆ†å¸ƒå¼é” - Transactionsä¸Threads</title>
    <link href="https://cuipengfei.me/blog/2023/12/25/spring-integration-jdbc-distributed-lock-with-transaction-and-threads/"/>
    <id>https://cuipengfei.me/blog/2023/12/25/spring-integration-jdbc-distributed-lock-with-transaction-and-threads/</id>
    <published>2023-12-25T03:16:17.000Z</published>
    <updated>2023-12-25T03:16:17.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜"><a href="#ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜" class="headerlink" title="ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜"></a>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜</h1><p>Spring Integration JDBCåˆ†å¸ƒå¼é”çš„å®ç°ä¼šéœ€è¦ä½¿ç”¨ä¸€ä¸ªserializableçº§åˆ«çš„äº‹åŠ¡æ¥<strong>è·å–é”</strong>ã€‚</p><p>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å°è¯•è·å–é”ï¼Œè¿™äº›äº‹åŠ¡ä¹‹é—´å¯èƒ½ä¼šå‡ºç°é¡ºåºé—®é¢˜ã€‚</p><p>å…·ä½“è€Œè¨€ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.postgresql.util.PSQLException: ERROR: could <span class="keyword">not</span> serialize access due <span class="built_in">to</span> <span class="built_in">read</span>/<span class="built_in">write</span> dependencies <span class="keyword">among</span> transactions</span><br></pre></td></tr></table></figure><p>å‘ç”Ÿè¿™æ ·çš„é—®é¢˜å…¶å®ä¹Ÿä¸å¯æ€•ï¼Œå› ä¸ºJDBCé”ä¼šè¿›è¡Œé‡è¯•ã€‚</p><p>ç„¶è€Œï¼Œå½“ä½¿ç”¨JPA Transaction Manageræ—¶ï¼Œç”±äºæŸäº›å¼‚å¸¸ç±»å‹çš„åŸå› ï¼ŒJDBCé”æ— æ³•åœ¨å‘ç”Ÿè¿™ç§é”™è¯¯çš„æƒ…å†µä¸‹è¿›è¡Œé‡è¯•ã€‚</p><p>å¯ä»¥åœ¨ä»¥ä¸‹GitHub Issueä¸­æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š<br><a href="https://github.com/spring-projects/spring-integration/issues/3733">https://github.com/spring-projects/spring-integration/issues/3733</a></p><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç é‡ç°æ­¤é—®é¢˜ï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem1Service.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem1Service.java</a></p><h1 id="ä½¿ç”¨Data-Source-Transaction-Manageræ¥workaroundç¬¬ä¸€ä¸ªé—®é¢˜"><a href="#ä½¿ç”¨Data-Source-Transaction-Manageræ¥workaroundç¬¬ä¸€ä¸ªé—®é¢˜" class="headerlink" title="ä½¿ç”¨Data Source Transaction Manageræ¥workaroundç¬¬ä¸€ä¸ªé—®é¢˜"></a>ä½¿ç”¨Data Source Transaction Manageræ¥workaroundç¬¬ä¸€ä¸ªé—®é¢˜</h1><p>å¯ä»¥æ˜ç¡®æŒ‡å®šè®©JDBCé”ä¸ä½¿ç”¨JPA Transaction Managerï¼Œè€Œæ˜¯ä½¿ç”¨Data Source Transaction Manageræ¥ç»•è¿‡æ­¤é—®é¢˜ã€‚</p><p>å…·ä½“ä»£ç è¯·å‚è€ƒï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/configs/CustomJDBCLockConfigs.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/configs/CustomJDBCLockConfigs.java</a></p><p>å¯ä»¥æ‰§è¡Œè¯¥ä»£ç ä»¥è§‚å¯Ÿworkaroundçš„æ•ˆæœï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem1FixService.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem1FixService.java</a></p><h1 id="ç¬¬äºŒä¸ªé—®é¢˜ï¼šåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å…ˆä½¿ç”¨JpaTransactionManagerå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åå°è¯•ç”¨DataSourceTransactionManagerè·å–JDBCé”æ‰€å¯¼è‡´çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å˜åŒ–çš„é—®é¢˜"><a href="#ç¬¬äºŒä¸ªé—®é¢˜ï¼šåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å…ˆä½¿ç”¨JpaTransactionManagerå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åå°è¯•ç”¨DataSourceTransactionManagerè·å–JDBCé”æ‰€å¯¼è‡´çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å˜åŒ–çš„é—®é¢˜" class="headerlink" title="ç¬¬äºŒä¸ªé—®é¢˜ï¼šåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å…ˆä½¿ç”¨JpaTransactionManagerå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åå°è¯•ç”¨DataSourceTransactionManagerè·å–JDBCé”æ‰€å¯¼è‡´çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å˜åŒ–çš„é—®é¢˜"></a>ç¬¬äºŒä¸ªé—®é¢˜ï¼šåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å…ˆä½¿ç”¨JpaTransactionManagerå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åå°è¯•ç”¨DataSourceTransactionManagerè·å–JDBCé”æ‰€å¯¼è‡´çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å˜åŒ–çš„é—®é¢˜</h1><p>è¯¥é—®é¢˜çš„æ˜¾è‘—ç‰¹å¾æ˜¯ï¼šå¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šæ ‡æ³¨äº†@Transactionalï¼Œç„¶ååœ¨è¯¥æ–¹æ³•å†…éƒ¨å…ˆæ‰§è¡Œäº†ä¸€äº›JPAçš„SQLæ“ä½œï¼Œç„¶åå†å°è¯•è·å–JDBCåˆ†å¸ƒå¼é”ï¼Œå°±ä¼šå‡ºç°æ— æ³•æ›´æ”¹äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é—®é¢˜ã€‚</p><p>é—®é¢˜çš„å…³é”®åœ¨äºå¹¶è¡Œæµï¼ˆparallel streamï¼‰å¹¶ä¸æ€»æ˜¯ä»…åˆ©ç”¨å…¶è‡ªå·±çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œå®ƒä¹Ÿä¼šåˆ©ç”¨å½“å‰çº¿ç¨‹ã€‚<br>è€Œæ°å¥½è½åœ¨å½“å‰çº¿ç¨‹ä¸Šçš„é‚£ä¸€æ¬¡å°è¯•è·å–JDBCåˆ†å¸ƒå¼é”çš„æ“ä½œå°±ä¼šå‡ºç°æ— æ³•æ›´æ”¹äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é—®é¢˜ã€‚</p><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç”¨æ¥è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜è€Œå¼•å…¥çš„DataSourceTransactionManagerçš„æ–‡æ¡£ä¸­æåŠå®ƒå…·æœ‰å¦‚ä¸‹è¡Œä¸ºï¼š</p><blockquote><p>Note: The DataSource that this transaction manager operates on needs to return independent Connections. The Connections typically come from a connection pool but the DataSource must not return specifically scoped or constrained Connections. This transaction manager will associate Connections with thread-bound transactions, according to the specified propagation behavior. It assumes that a separate, independent Connection can be obtained even during an ongoing transaction.</p></blockquote><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç è§‚å¯Ÿparallel streamçš„è¡Œä¸ºï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/TestParallelStreamThreads.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/TestParallelStreamThreads.java</a></p><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç é‡ç°è¯¥é—®é¢˜ï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem2Service.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem2Service.java</a></p><h1 id="ç¬¬äºŒä¸ªé—®é¢˜çš„ä¸å®Œå–„è§£å†³æ–¹æ³•ï¼šå¼ºåˆ¶parallel-streamä¸ä½¿ç”¨å½“å‰çº¿ç¨‹"><a href="#ç¬¬äºŒä¸ªé—®é¢˜çš„ä¸å®Œå–„è§£å†³æ–¹æ³•ï¼šå¼ºåˆ¶parallel-streamä¸ä½¿ç”¨å½“å‰çº¿ç¨‹" class="headerlink" title="ç¬¬äºŒä¸ªé—®é¢˜çš„ä¸å®Œå–„è§£å†³æ–¹æ³•ï¼šå¼ºåˆ¶parallel streamä¸ä½¿ç”¨å½“å‰çº¿ç¨‹"></a>ç¬¬äºŒä¸ªé—®é¢˜çš„ä¸å®Œå–„è§£å†³æ–¹æ³•ï¼šå¼ºåˆ¶parallel streamä¸ä½¿ç”¨å½“å‰çº¿ç¨‹</h1><p>åœ¨è§£å†³è¯¥é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°è¯•äº†ä¸€ç§ä¸å¤ªæ˜æ™ºçš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œä¹Ÿè®°å½•ä¸€ä¸‹ã€‚</p><p>æˆ‘æœ€åˆçš„æƒ³æ³•æ˜¯ï¼Œæ—¢ç„¶parallel streamä¼šåˆ©ç”¨å½“å‰çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´è½åœ¨å½“å‰çº¿ç¨‹ä¸Šçš„é‚£ä¸€æ¬¡è·å–é”çš„æ“ä½œå¤±è´¥ï¼Œé‚£ä¹ˆæˆ‘å¹²è„†å¼ºåˆ¶å®ƒä¸è¦ä½¿ç”¨å½“å‰çº¿ç¨‹ã€‚ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ç§éå¸¸ç®€å•ç²—æš´çš„åšæ³•ã€‚</p><p>å°½ç®¡è¿™æ ·åšå¯ä»¥æˆåŠŸè·å–JDBCé”ï¼Œä½†å®ƒä¹Ÿä¼šå¯¼è‡´ä¸€éƒ¨åˆ†SQLæ¸¸ç¦»åœ¨äº‹åŠ¡ä¹‹å¤–æ‰§è¡Œã€‚<br>ä¸ä»…ä»…æ˜¯è¿™ä¸ªè§£å†³æ–¹æ³•ï¼Œ<strong>ä¸Šè¿°çš„ä¸‰ä»½ä»£ç ä¹Ÿéƒ½ä¼šæœ‰è¿™ä¸ªé—®é¢˜</strong>ã€‚</p><p>ä¸å¤ªç†æƒ³çš„è§£å†³æ–¹æ³•çš„ä»£ç å¦‚ä¸‹ï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem2BadFixService.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem2BadFixService.java</a></p><h1 id="ç¬¬äºŒä¸ªé—®é¢˜çš„è¾ƒä¼˜è§£å†³æ–¹æ³•ï¼šç¼©å°äº‹åŠ¡èŒƒå›´ï¼Œé¿å…å°†ä¸šåŠ¡æ“ä½œå’Œè·å–JDBCé”çš„æ“ä½œæ··åˆåœ¨åŒä¸€ä¸ªè¢«-Transactionalæ ‡æ³¨çš„æ–¹æ³•å†…"><a href="#ç¬¬äºŒä¸ªé—®é¢˜çš„è¾ƒä¼˜è§£å†³æ–¹æ³•ï¼šç¼©å°äº‹åŠ¡èŒƒå›´ï¼Œé¿å…å°†ä¸šåŠ¡æ“ä½œå’Œè·å–JDBCé”çš„æ“ä½œæ··åˆåœ¨åŒä¸€ä¸ªè¢«-Transactionalæ ‡æ³¨çš„æ–¹æ³•å†…" class="headerlink" title="ç¬¬äºŒä¸ªé—®é¢˜çš„è¾ƒä¼˜è§£å†³æ–¹æ³•ï¼šç¼©å°äº‹åŠ¡èŒƒå›´ï¼Œé¿å…å°†ä¸šåŠ¡æ“ä½œå’Œè·å–JDBCé”çš„æ“ä½œæ··åˆåœ¨åŒä¸€ä¸ªè¢«@Transactionalæ ‡æ³¨çš„æ–¹æ³•å†…"></a>ç¬¬äºŒä¸ªé—®é¢˜çš„è¾ƒä¼˜è§£å†³æ–¹æ³•ï¼šç¼©å°äº‹åŠ¡èŒƒå›´ï¼Œé¿å…å°†ä¸šåŠ¡æ“ä½œå’Œè·å–JDBCé”çš„æ“ä½œæ··åˆåœ¨åŒä¸€ä¸ªè¢«@Transactionalæ ‡æ³¨çš„æ–¹æ³•å†…</h1><p><strong>ä¸Šè¿°å››ä»½ä»£ç éƒ½å­˜åœ¨ä¸€ä¸ªå…±åŒçš„ç¼ºç‚¹</strong>ï¼Œå³@Transactionalæ³¨è§£çš„èŒƒå›´å¤ªå¹¿ã€‚</p><p>è¿™å®¹æ˜“å¯¼è‡´JPA Transaction Managerçš„èŒƒç•´ä»¥åŠç”¨äºè·å–JDBCåˆ†å¸ƒå¼é”çš„Data Source Transaction Managerçš„èŒƒç•´äº’ç›¸äº¤å‰ã€‚</p><p>å½“è¿™ä¸¤è€…æ··åœ¨ä¸€èµ·æ—¶ï¼Œå¾ˆå®¹æ˜“å‡ºç°DataSourceTransactionManagerè¯•å›¾å»æ”¹å˜ä¸€ä¸ªå·²ç»è¢«openè¿‡çš„transactionçš„éš”ç¦»çº§åˆ«çš„é—®é¢˜ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜çš„è¾ƒä¼˜è§£å†³æ–¹æ³•çš„ä»£ç è¯·å‚è€ƒï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem2GoodFixService.java">https://github.com/cuipengfei/Spikes/blob/master/jpa/lock-transaction-threads/src/main/java/com/github/spring/example/service/Problem2GoodFixService.java</a></p><h1 id="ç”¨å›¾æ¥æ€»ç»“ä¸€ä¸‹"><a href="#ç”¨å›¾æ¥æ€»ç»“ä¸€ä¸‹" class="headerlink" title="ç”¨å›¾æ¥æ€»ç»“ä¸€ä¸‹"></a>ç”¨å›¾æ¥æ€»ç»“ä¸€ä¸‹</h1><pre><code class="highlight mermaid">flowchart TD        style dstm fill:lightgreen,stroke:#333,stroke-width:4px    style nrt fill:#FFCCCB,stroke:#333,stroke-width:4px    jl[JDBCåˆ†å¸ƒå¼é”]    str[Serializableçº§åˆ«çš„äº‹åŠ¡]    mt[å¤šä¸ªçº¿ç¨‹]    jtm[JPA Transaction Manager]    dstm[â¤ï¸Data Source Transaction Managerâ¤ï¸]    nrt[ğŸª³æ— æ³•é‡è¯•è·å–é”ğŸª³]    se[Serialization Error]    se2[Serialization Error]    subgraph åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜    jl--&gt;|é»˜è®¤ä½¿ç”¨|str    mt--&gt;|åŒæ—¶è·å–|jl    jl--&gt;|æ°å¥½ç”¨äº†|jtm    str--&gt;|å®¹æ˜“æ’è½¦è€Œå¯¼è‡´|se    jtm--&gt;|holdä¸ä½|se    se--&gt;|ä»è€Œå¯¼è‡´|nrt    jl--&gt;|æ›¿æ¢æˆä½¿ç”¨|dstm    dstm--&gt;|å¯ä»¥holdä½|se2    se2--&gt;|ä»è€Œè§£å†³|nrt    end</code></pre><pre><code class="highlight mermaid">flowchart TD        style nd fill:lightgreen,stroke:#333,stroke-width:4px    style ile fill:#FFCCCB,stroke:#333,stroke-width:4px    st[åŒä¸€ä¸ªçº¿ç¨‹ä¸­]    t[äº‹åŠ¡]    t2[äº‹åŠ¡]    tm[ä¸€ä¸ªèŒƒå›´å¾ˆå®½çš„æ ‡æ³¨äº†@Transactionalçš„æ–¹æ³•]    js[JPAçš„SQLæ“ä½œ]    tl[è·å–JDBCåˆ†å¸ƒå¼é”]    js2[JPAçš„SQLæ“ä½œ]    tl2[è·å–JDBCåˆ†å¸ƒå¼é”]    ps[Parallel Stream]    op[å…¶è‡ªå·±çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹]    ct[å½“å‰çº¿ç¨‹]    ile[ğŸª³æ— æ³•æ›´æ”¹äº‹åŠ¡éš”ç¦»çº§åˆ«çš„é—®é¢˜ğŸª³]    nd[â¤ï¸æ­£ç¡®åšæ³•åº”è¯¥æ˜¯ç¼©å°@Transactionalçš„èŒƒå›´â¤ï¸]    subgraph åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­å…ˆä½¿ç”¨JpaTransactionManagerå¯åŠ¨ä¸€ä¸ªäº‹åŠ¡ç„¶åå°è¯•ç”¨DataSourceTransactionManagerè·å–JDBCé”æ‰€å¯¼è‡´çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å˜åŒ–çš„é—®é¢˜    ps--&gt;|å¹¶ä¸æ€»æ˜¯ä»…åˆ©ç”¨|op    ps--&gt;|ä¹Ÿä¼šåˆ©ç”¨|ct    ct--&gt;|é‚£ä¹ˆå°±ä¼šåœ¨|st    st--&gt;|è·‘|tm    tm--&gt;|å…ˆæ‰§è¡Œäº†ä¸€äº›|js    tm--&gt;|ç„¶åå†å°è¯•|tl    js--&gt;|å·²ç»openäº†|t    tl--&gt;|å†å»è¯•å›¾æ›´æ”¹å…¶éš”ç¦»ç­‰çº§|t    t--&gt;|ä»è€Œå¯¼è‡´|ile    nd--&gt;|å¯ä»¥åŠæ—¶å…³é—­|t2    t2--&gt;|é¿å…æŠŠäºŒè€…æ··åœ¨ä¸€èµ·|js2    t2--&gt;|é¿å…æŠŠäºŒè€…æ··åœ¨ä¸€èµ·|tl2    js2--&gt;|ä»è€Œé¿å…|ile    tl2--&gt;|ä»è€Œé¿å…|ile    end</code></pre><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>ä¸Šé¢çš„é—®é¢˜éƒ½æ˜¯ç”±äºä¸šåŠ¡ä»£ç å’Œè·å–é”çš„ä»£ç äºŒè€…åŒæ—¶ä¾èµ–äºåŒä¸€ä¸ªæ•°æ®åº“ã€‚</p><p>è€ŒSpring Integrationçš„åˆ†å¸ƒå¼é”é™¤äº†å¯ä»¥ä½¿ç”¨JDBCï¼Œå…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨Redisæˆ–å…¶ä»–åº•å±‚æŠ€æœ¯ã€‚<br>å¦‚æœæŠŠä¸Šè¿°ä»£ç ä¸­çš„JdbcLockRegistryå…¨éƒ¨æ›¿æ¢ä¸ºRedisLockRegistryï¼Œè€Œä¿æŒå…¶å®ƒä»£ç ä¸å˜ï¼Œæ‰€æœ‰é”™è¯¯éƒ½ä¼šæ¶ˆå¤±ï¼Œä¸ä¼šå†é‡ç°ã€‚</p><p>å› ä¸ºæ— è®ºç”¨åˆ°äº†å“ªä¸€ä¸ªçº¿ç¨‹ï¼Œå“ªä¸€ä¸ªDB Transactionï¼Œä¹Ÿæ— è®º@Transactionalæ ‡è®°çš„å®½æˆ–è€…çª„ï¼ŒRedisæ€»æ˜¯ä¸ä¼šå’ŒJDBC&#x2F;DBæ’è½¦çš„ã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹ä¸Šè¿°ä»£ç ä¸­çš„æ­¤å¤„æ¥è¯•ç”¨Redisï¼š<br><a href="https://github.com/cuipengfei/Spikes/blob/c887a6f802bbfffc45ee29cbb91dac731243b7cd/jpa/lock-transaction-threads/src/main/resources/application.properties#L17-L18">https://github.com/cuipengfei/Spikes/blob/c887a6f802bbfffc45ee29cbb91dac731243b7cd/jpa/lock-transaction-threads/src/main/resources/application.properties#L17-L18</a></p><h2 id="Spring-Boot-3"><a href="#Spring-Boot-3" class="headerlink" title="Spring Boot 3"></a>Spring Boot 3</h2><p>å¦‚æœå‡çº§åˆ°Spring Boot 3.1.5 + JDK 17ï¼Œåˆ™Spring Integration JDBCä¼šå‡åˆ°6.1.4(ä¸Šè¿°ä»£ç ç”¨çš„æ˜¯5.x)ï¼Œç”šè‡³ä¸ç”¨æ›¿æ¢æˆData Source Transaction Managerï¼Œä¸Šè¿°é—®é¢˜ä¹Ÿä¼šæ¶ˆå¤±ã€‚</p><p>å› ä¸ºè¿™ä¸€ç‰ˆæœ¬çš„Spring Integration JDBCçš„åˆ†å¸ƒå¼é”å®ç°åœ¨acquire lockæ—¶ä¸å†ä½¿ç”¨serializableçš„äº‹åŠ¡ï¼Œè€Œæ˜¯æ”¹æˆäº†read committedã€‚</p><p>è¿™æ ·ï¼Œè‡ªç„¶å°±è§„é¿äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸å†æœ‰serializableäº‹åŠ¡æ’è½¦ã€‚</p><p>è€Œç”±äºä¸å†éœ€è¦ç»™é”ä½¿ç”¨Data Source Transaction Managerï¼Œè‡ªç„¶ä¹Ÿå°±è§£å†³äº†ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸å†æœ‰åŒä¸€ä¸ªçº¿ç¨‹ä¸Šä¸¤ä¸ªtransaction managersæ‰“æ¶çš„é—®é¢˜ã€‚<br>ä¸è¿‡ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œç¼©å°@Transactionalçš„èŒƒå›´ä»ç„¶æ˜¯å€¼å¾—å»ºè®®çš„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šåœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶è¿è¡Œéš”ç¦»çº§åˆ«ä¸ºserializableçš„äº‹åŠ¡è€Œå¯¼è‡´çš„æ— æ³•é‡è¯•è·å–é”çš„é—®é¢˜&quot; class=&quot;headerlink&quot;</summary>
      
    
    
    
    
    <category term="Java" scheme="https://cuipengfei.me/tags/Java/"/>
    
    <category term="åˆ†å¸ƒå¼" scheme="https://cuipengfei.me/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
    <category term="é”" scheme="https://cuipengfei.me/tags/%E9%94%81/"/>
    
  </entry>
  
  <entry>
    <title>å†…å­˜æ¶¨ä¸Šå»ä¸è‚¯ä¸‹æ¥ - æœªå¿…æ˜¯å†…å­˜æ³„æ¼</title>
    <link href="https://cuipengfei.me/blog/2023/08/26/not-mem-leak/"/>
    <id>https://cuipengfei.me/blog/2023/08/26/not-mem-leak/</id>
    <published>2023-08-26T13:45:00.000Z</published>
    <updated>2023-08-26T13:45:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸€ä¸ªKubernetesï¼ˆK8sï¼‰é›†ç¾¤ä¸­ï¼Œéƒ¨ç½²äº†Prometheuså’ŒGrafanaç”¨äºç›‘æ§é›†ç¾¤æœ¬èº«å’Œåº”ç”¨çš„çŠ¶æ€ã€‚</p><p>åœ¨å…¶ä¸­ä¸€ä¸ªJavaåº”ç”¨å¯¹åº”çš„Podçº§åˆ«è§‚å¯Ÿåˆ°äº†å†…å­˜ä¸Šå‡çš„ç°è±¡ã€‚å…·ä½“è€Œè¨€ï¼Œå½“è¯¥åº”ç”¨åˆšå¯åŠ¨æ—¶ï¼Œå†…å­˜å ç”¨å¹¶ä¸é«˜ã€‚å¦‚æœä¸å‘é€è¯·æ±‚ç»™åº”ç”¨ï¼Œå†…å­˜å°†ä¿æŒåœ¨å¯åŠ¨æ—¶çš„æ°´å¹³ä¸Šã€‚</p><p>å¦‚æœå¤§é‡å‘é€è¯·æ±‚ç»™åº”ç”¨å¹¶åœ¨çŸ­æ—¶é—´å†…æŒç»­å‘é€ï¼Œå†…å­˜ä¼šè¿…é€Ÿå¢åŠ ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æ­£å¸¸çš„ã€‚</p><p>ä¸€æ—¦å†…å­˜å¢åŠ ä¹‹åï¼Œå³ä½¿åœæ­¢å‘é€è¯·æ±‚å’Œå‹åŠ›ï¼Œå†…å­˜ä½¿ç”¨ä¹Ÿä¸ä¼šä¸‹é™ï¼Œä¸€ç›´ä¿æŒåœ¨é«˜å³°æ°´å¹³ã€‚</p><p>ä¸Šé¢çš„çŠ¶å†µæ˜¯ç”±Grafanaä¸­è§‚å¯Ÿåˆ°çš„ã€‚</p><p>è§‚å¯Ÿåˆ°çš„ç°è±¡çœ‹èµ·æ¥åƒæ˜¯å†…å­˜æ³„æ¼ï¼Œä½†å®é™…ä¸Šå¹¶ä¸ä¸€å®šæ˜¯å†…å­˜æ³„æ¼ã€‚</p><p>åŸå› æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><h1 id="1-åœ¨K8sä¸­è¿è¡Œçš„Prometheusé»˜è®¤åªä½¿ç”¨äº†Node-Exporter"><a href="#1-åœ¨K8sä¸­è¿è¡Œçš„Prometheusé»˜è®¤åªä½¿ç”¨äº†Node-Exporter" class="headerlink" title="1 åœ¨K8sä¸­è¿è¡Œçš„Prometheusé»˜è®¤åªä½¿ç”¨äº†Node Exporter"></a>1 åœ¨K8sä¸­è¿è¡Œçš„Prometheusé»˜è®¤åªä½¿ç”¨äº†Node Exporter</h1><p>è¿™æ„å‘³ç€Prometheusæ”¶é›†çš„æ•°æ®æ˜¯ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦æ¥çœ‹è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè€Œä¸æ˜¯ä»Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰è¿›ç¨‹å†…éƒ¨è§‚å¯Ÿã€‚</p><p>å¦‚æœæƒ³è¦ä»JVMå†…éƒ¨çš„è§†è§’è§‚å¯Ÿå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œä¾‹å¦‚å †çš„å¤§å°å’Œä½¿ç”¨æƒ…å†µï¼Œå°±éœ€è¦è®©åº”ç”¨å®¹å™¨å†…åŒ…å«æœ‰Prometheusçš„jmx exporterã€‚</p><h1 id="2-å…³é”®æ˜¯è¦è§‚å¯Ÿå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µ"><a href="#2-å…³é”®æ˜¯è¦è§‚å¯Ÿå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="2 å…³é”®æ˜¯è¦è§‚å¯Ÿå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µ"></a>2 å…³é”®æ˜¯è¦è§‚å¯Ÿå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µ</h1><p>è¦æ£€æŸ¥å’Œç¡®è¯ŠJavaåº”ç”¨çš„å†…å­˜æ³„æ¼ï¼Œä¸èƒ½ä»…ä»…ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦è§‚å¯Ÿæ•´ä¸ªè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œè®¤ä¸ºå†…å­˜æ²¡æœ‰é‡Šæ”¾å°±æ˜¯æ³„æ¼ã€‚è¿™ç§è§‚å¯Ÿæ–¹å¼æ˜¯ä¸å‡†ç¡®çš„ã€‚</p><p>åº”è¯¥ä»JVMå†…éƒ¨è§‚å¯Ÿå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œå³ä½¿è¿›è¡Œäº†åƒåœ¾å›æ”¶ï¼ˆGCï¼‰ï¼Œå †å†…å­˜ä»ç„¶æ— æ³•ä¸‹é™æ˜¯ä¸€ä¸ªæ˜ç¡®çš„å¾å…†ã€‚</p><p>ä¾‹å¦‚ï¼Œå †ä½¿ç”¨é‡ï¼ˆheap usageï¼‰åŸºæœ¬ä¸Šæ¥è¿‘å †å¤§å°ï¼ˆheap sizeï¼‰ï¼Œå¹¶ä¸”å †ä½¿ç”¨é‡å‡ºç°äº†é¢‘ç¹çš„å°é”¯é½¿æ³¢åŠ¨ï¼Œè¿™åŸºæœ¬ä¸Šè¡¨æ˜GCåœ¨å°è¯•æ¸…ç†æ—§çš„å†…å­˜ï¼Œä½†æ— æ³•æˆåŠŸæ¸…ç†ï¼Œè¿™å°±æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„è¿¹è±¡äº†ã€‚</p><p>å› ä¸ºJVMæœ‰æ—¶å€™ä¸æ„¿æ„é‡Šæ”¾ä»æ“ä½œç³»ç»Ÿé‚£é‡Œè¦æ¥çš„å†…å­˜ã€‚å› æ­¤ï¼Œä»…ä»…æ ¹æ®ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦è§‚å¯Ÿå†…å­˜æ˜¯å¦å¢åŠ è€Œä¸ä¸‹é™æ¥è¯Šæ–­ä¸ºJavaçš„å†…å­˜æ³„æ¼æ˜¯ä¸å‡†ç¡®çš„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ä¸€ä¸ªKubernetesï¼ˆK8sï¼‰é›†ç¾¤ä¸­ï¼Œéƒ¨ç½²äº†Prometheuså’ŒGrafanaç”¨äºç›‘æ§é›†ç¾¤æœ¬èº«å’Œåº”ç”¨çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å…¶ä¸­ä¸€ä¸ªJavaåº”ç”¨å¯¹åº”çš„Podçº§åˆ«è§‚å¯Ÿåˆ°äº†å†…å­˜ä¸Šå‡çš„ç°è±¡ã€‚å…·ä½“è€Œè¨€ï¼Œå½“è¯¥åº”ç”¨åˆšå¯åŠ¨æ—¶ï¼Œå†…å­˜å ç”¨å¹¶ä¸é«˜ã€‚å¦‚æœä¸å‘é€è¯·æ±‚ç»™åº”ç”¨ï¼Œå†…å­˜å°†ä¿æŒåœ¨å¯</summary>
      
    
    
    
    
    <category term="Java" scheme="https://cuipengfei.me/tags/Java/"/>
    
    <category term="jvm" scheme="https://cuipengfei.me/tags/jvm/"/>
    
    <category term="å†…å­˜" scheme="https://cuipengfei.me/tags/%E5%86%85%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>Spring Integration JDBCåˆ†å¸ƒå¼é” - TTL</title>
    <link href="https://cuipengfei.me/blog/2023/07/29/spring%20integration%20jdbc%20distributed%20lock/"/>
    <id>https://cuipengfei.me/blog/2023/07/29/spring%20integration%20jdbc%20distributed%20lock/</id>
    <published>2023-07-28T16:30:00.000Z</published>
    <updated>2023-07-28T16:30:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨Spring Integrationæä¾›çš„åŸºäºJDBCå®ç°çš„åˆ†å¸ƒå¼é”ã€‚</p><p>åœ¨å®è·µçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€äº›æœ‰è¶£çš„é—®é¢˜ï¼Œç°åœ¨åœ¨æ­¤è®°å½•å’Œæ€»ç»“ä¸€ä¸‹ã€‚</p><p>ä¸€å…±é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªå’Œtime to liveæœ‰å…³ï¼Œç¬¬äºŒä¸ªè¿˜æ˜¯å’Œtime to liveæœ‰å…³ã€‚</p><h1 id="ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç”±äºtime-to-liveé»˜è®¤å€¼ä¸å¤Ÿé•¿è€Œå¯¼è‡´è¢«åŠ¨å¤±å»é”çš„é—®é¢˜"><a href="#ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç”±äºtime-to-liveé»˜è®¤å€¼ä¸å¤Ÿé•¿è€Œå¯¼è‡´è¢«åŠ¨å¤±å»é”çš„é—®é¢˜" class="headerlink" title="ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç”±äºtime to liveé»˜è®¤å€¼ä¸å¤Ÿé•¿è€Œå¯¼è‡´è¢«åŠ¨å¤±å»é”çš„é—®é¢˜"></a>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç”±äºtime to liveé»˜è®¤å€¼ä¸å¤Ÿé•¿è€Œå¯¼è‡´è¢«åŠ¨å¤±å»é”çš„é—®é¢˜</h1><pre><code class="highlight mermaid">sequenceDiagramactor event_initiatorparticipant instance_1participant instance_2event_initiator-&gt;&gt;instance_1: do somethingnote over instance_1: instance 1 è·å¾—äº† lockinstance_1-&gt;&gt;instance_1: start doing its thingevent_initiator-&gt;&gt;instance_2: do another thingnote over instance_2: instance 2 ç­‰å¾… locknote over instance_2: ç­‰ ......note over instance_2: ç­‰ ......note over instance_1: lockçš„è¶…æ—¶æ—¶é—´TTLåˆ°ï¼Œinstance 1è¿˜æ²¡å¹²å®Œæ´»ï¼Œä½†æ˜¯å®ƒå¤±å»äº† lock&lt;br&gt;å¤±å»ä¸åŒäºä¸»åŠ¨release&lt;br&gt;å¤±å»lockåï¼Œinstance 1è¿˜ä¼šç»§ç»­å¹²æ´»&lt;br&gt;è€Œè¿™äº›æ´»é‡Œé¢å¯èƒ½ä¼šæœ‰SQLå†™æ“ä½œnote over instance_2: instance 2 è·å¾—äº† lockinstance_2-&gt;&gt;instance_2: start doing its thingnote over instance_1,instance_2: æ­¤æ—¶äºŒè€…åŒæ—¶å¹²æ´»ï¼Œæœ‰æ’è½¦çš„é£é™©ï¼Œå› ä¸ºäºŒè€…å¹²æ´»çš„å…ˆåé¡ºåºæ²¡æœ‰ä¿è¯&lt;br&gt; instance 1å°šæœªæŠŠå®ƒå¹²å®Œæ´»åæ‰èƒ½ç¡®å®šçš„çŠ¶æ€å†™å…¥DBï¼Œè€Œinstance 2å·²ç»å¼€å§‹å¹²æ´»äº†note over event_initiator,instance_2: ä¸ºäº†é™ä½é£é™©ï¼Œå¯ä»¥ï¼š &lt;br&gt; â‘  æƒ³åŠæ³•å°½é‡è®©instance 1èƒ½åœ¨è¶…æ—¶å‰å¹²å®Œæ´» &lt;br&gt; â‘¡ ä»¥é˜²ä¸‡ä¸€å¯ä»¥è€ƒè™‘åœ¨åˆé€‚çš„æ—¶é—´èŠ‚ç‚¹å»¶é•¿é”çš„è¿‡æœŸæ—¶é—´</code></pre><p>æ ¹æ®ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå®ä¾‹ã€‚</p><p>äº‹ä»¶çš„è§¦å‘è€…é¦–å…ˆè®©ç¬¬ä¸€ä¸ªå®ä¾‹å»å¤„ç†ä¸€ä¸ªäº‹ä»¶ã€‚ç¬¬ä¸€ä¸ªå®ä¾‹è·å–äº†ä¸€ä¸ªé”å¹¶å¼€å§‹æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ã€‚</p><p>æ­¤æ—¶ï¼Œäº‹ä»¶çš„è§¦å‘è€…åˆè®©ç¬¬äºŒä¸ªå®ä¾‹å»å¤„ç†å¦ä¸€ä¸ªäº‹ä»¶ã€‚ç¬¬äºŒä¸ªå®ä¾‹ä¹Ÿæƒ³è·å–åŒä¸€ä¸ªé”ï¼Œä½†ç”±äºç¬¬ä¸€ä¸ªå®ä¾‹å·²ç»å¼€å§‹å¤„ç†äº†ï¼Œç¬¬äºŒä¸ªå®ä¾‹æ— æ³•è·å–é”ï¼Œåªèƒ½ç­‰å¾…ã€‚</p><p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªå®ä¾‹ä¼šåœ¨å®Œæˆä»»åŠ¡åé‡Šæ”¾é”ï¼Œç„¶åç¬¬äºŒä¸ªå®ä¾‹å°±å¯ä»¥è·å–é”å¹¶å¼€å§‹æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœç”±äºæŸç§åŸå› ç¬¬ä¸€ä¸ªå®ä¾‹å¤„ç†ä»»åŠ¡çš„é€Ÿåº¦å¤ªæ…¢ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>å› ä¸ºSpring Integration JDBCåˆ†å¸ƒå¼é”ä¼šéµå¾ªTime to Liveçš„å‚æ•°ï¼Œè¯¥å‚æ•°ç¡®å®šäº†åœ¨è·å–é”åæœ€é•¿å¯æŒæœ‰é”çš„æ—¶é—´ã€‚</p><p>å¦‚æœè¶…å‡ºäº†è¿™ä¸ªæ—¶é—´ï¼Œè€Œå¦ä¸€ä¸ªäººæƒ³è¦è·å–è¯¥é”ï¼Œåˆ™å¯ä»¥è·å–åˆ°é”ã€‚<strong>è¿™æ˜¯ä¸ºäº†é¿å…é”çš„æŒæœ‰è€…æŒ‚æ‰è€Œå¯¼è‡´å…¶ä»–äººå…¨éƒ¨å¹²ç­‰çš„é˜²æ­»é”æœºåˆ¶ã€‚</strong></p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±ä¼šæœ‰ä¸¤ä¸ªäººåŒæ—¶è¿è¡Œã€‚</p><p>æˆ‘ä»¬æœ¬æ„æ˜¯è®©é”ä¿æŠ¤èµ„æºä»¥é¿å…åŒæ—¶è®¿é—®ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œèµ„æºä¼šè¢«åŒæ—¶è®¿é—®ã€‚</p><p>å¦‚æœè¿™äº›è®¿é—®ä¸­æ¶‰åŠåˆ°è¯»å–å…±äº«çŠ¶æ€ä»¥å†³å®šåç»­è¡Œä¸ºä»¥åŠå†™å…¥å…¶ä»–äººå¯èƒ½ä¼šè¯»å–çš„çŠ¶æ€çš„æ“ä½œï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ··ä¹±ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è¿›è¡Œä¸¤ä¸ªæ“ä½œã€‚</p><h2 id="ç»™time-to-liveä¸€ä¸ªåˆç†çš„å€¼"><a href="#ç»™time-to-liveä¸€ä¸ªåˆç†çš„å€¼" class="headerlink" title="ç»™time to liveä¸€ä¸ªåˆç†çš„å€¼"></a>ç»™time to liveä¸€ä¸ªåˆç†çš„å€¼</h2><p>å®é™…ä¸Šï¼Œç›¸å½“äºéœ€è¦å¯¹è¿è¡Œæ—¶é—´è¿›è¡Œåˆç†çš„ä¼°ç®—ï¼Œç„¶åå°½é‡å°†time to liveè®¾ç½®ä¸ºèƒ½å¤Ÿè¦†ç›–è¯¥ä¼°ç®—å€¼çš„æ•°å€¼ã€‚</p><p>æŠŠè¿™ä¸ªä¼°ç®—å‡ºæ¥çš„æ•°å­—èµ‹å€¼ç»™default lock repositoryçš„time to liveå°±å¥½äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Specify the time (in milliseconds) to expire deadlocks.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> timeToLive the time to expire deadlocks.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTimeToLive</span><span class="params">(<span class="type">int</span> timeToLive)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.ttl = Duration.ofMillis(timeToLive);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/spring-projects/spring-integration/blob/7dcc0bb125eb5d72d9dc6cec0cc91bd4114336be/spring-integration-jdbc/src/main/java/org/springframework/integration/jdbc/lock/DefaultLockRepository.java#L190-L196">DefaultLockRepository</a></p><h2 id="é€‰æ‹©åœ¨åˆé€‚çš„æ—¶æœºrenew"><a href="#é€‰æ‹©åœ¨åˆé€‚çš„æ—¶æœºrenew" class="headerlink" title="é€‰æ‹©åœ¨åˆé€‚çš„æ—¶æœºrenew"></a>é€‰æ‹©åœ¨åˆé€‚çš„æ—¶æœºrenew</h2><p>å³ä½¿æˆ‘ä»¬è¿›è¡Œäº†åˆç†çš„ä¼°ç®—ï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªä¼°è®¡å€¼ï¼Œä¸æ˜¯ç»å¯¹ç²¾ç¡®çš„å€¼ã€‚</p><p>æ¢è¨€ä¹‹ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿è¡Œæ—¶é—´ä»å¯èƒ½å»¶ç»­åˆ°time to liveè¿‡æœŸä¹‹åï¼Œä»è€Œé¢ä¸´ä¸¤ä¸ªäººåŒæ—¶è®¿é—®çš„é£é™©ã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™è¿›è¡Œrenewæ“ä½œã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨æ‰§è¡Œè€—æ—¶è¾ƒé•¿çš„æ“ä½œä¹‹å‰è°ƒç”¨lock registryçš„renewLockæ–¹æ³•ï¼Œè¿™æ ·å°±ç›¸å½“äºåœ¨æ‰§è¡Œè€—æ—¶è¾ƒé•¿çš„æ“ä½œä¹‹å‰é‡æ–°è·å–äº†ä¸€æ¬¡é”ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RenewableLockRegistry</span> <span class="keyword">extends</span> <span class="title class_">LockRegistry</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Renew the time to live of the lock is associated with the parameter object.</span></span><br><span class="line"><span class="comment"> * The lock must be held by the current thread</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> lockKey The object with which the lock is associated.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">renewLock</span><span class="params">(Object lockKey)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/spring-projects/spring-integration/blob/7dcc0bb125eb5d72d9dc6cec0cc91bd4114336be/spring-integration-core/src/main/java/org/springframework/integration/support/locks/RenewableLockRegistry.java#L28-L37">RenewableLockRegistry</a></p><h1 id="ç¬¬äºŒä¸ªé—®é¢˜ï¼štime-to-liveå¯¹äºè¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆçš„"><a href="#ç¬¬äºŒä¸ªé—®é¢˜ï¼štime-to-liveå¯¹äºè¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆçš„" class="headerlink" title="ç¬¬äºŒä¸ªé—®é¢˜ï¼štime to liveå¯¹äºè¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆçš„"></a>ç¬¬äºŒä¸ªé—®é¢˜ï¼štime to liveå¯¹äºè¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆçš„</h1><pre><code class="highlight mermaid">sequenceDiagramactor event_initiatorparticipant instance_1participant instance_2event_initiator-&gt;&gt;instance_1: do somethingnote over instance_1: instance 1 è·å¾—äº† lockinstance_1-&gt;&gt;instance_1: start doing its thingevent_initiator-&gt;&gt;instance_2: do another thingnote over instance_2: instance 2 ç­‰å¾… locknote over instance_2: ç­‰ ......note over instance_2: ç­‰ ......note over instance_1:instance 1çš„å½“å‰çº¿ç¨‹ç”±äºæŸç§åŸå› å¡æ­»äº†ï¼Œæ²¡æœºä¼šé‡Šæ”¾é”note over instance_1: lockçš„è¶…æ—¶æ—¶é—´TTLåˆ°note over instance_2: instance 2 è·å¾—äº† lockinstance_2-&gt;&gt;instance_2: start doing its thingnote over event_initiator,instance_2: instance 1çš„çº¿ç¨‹ç”±äºæŸç§åŸå› å¡æ­»è€Œæ²¡æœºä¼šé‡Šæ”¾é”&lt;br&gt;åœ¨TTLè¿‡åinstance 2å¯ä»¥æ‹¿åˆ°é”å¹¶åšäº‹&lt;br&gt;è¿™æ˜¯æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„äº‹æƒ…ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥é¿å…ç”±äºä¸€ä¸ªçº¿ç¨‹å¡æ­»ä¸é‡Šæ”¾é”è€Œå¯¼è‡´åˆ«äººå¹²ç­‰çš„å±€é¢</code></pre><p>åœ¨ä¸Šè¿°å›¾ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†ä¸¤ä¸ªå®ä¾‹ï¼Œå³åœ¨ä¸åŒæœºå™¨ï¼ˆæˆ–å®¹å™¨ï¼‰ä¸Šè¿è¡Œçš„ä¸¤ä¸ªä¸åŒJavaè¿›ç¨‹ã€‚è¿™æ˜¯è·¨è¿›ç¨‹åä½œçš„æƒ…å†µï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦<strong>åˆ†å¸ƒå¼</strong>é”çš„ä¸»è¦åŸå› ã€‚</p><p>åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œtime to liveæ˜¯æœ‰æ•ˆçš„ã€‚å®ƒå¯ä»¥é˜²æ­¢ä¸€ä¸ªè¿›ç¨‹æ— æ³•é‡Šæ”¾é”ï¼Œä»è€Œå¯¼è‡´å…¶ä»–è¿›ç¨‹ä¸€ç›´ç­‰å¾…é”è€Œæ— æ³•ç»§ç»­å·¥ä½œçš„å±€é¢çš„å‡ºç°ã€‚</p><p>åœ¨è·¨è¿›ç¨‹åä½œä¸­ï¼Œtime to liveå¯ä»¥å‘æŒ¥ä½œç”¨ï¼Œé‚£å¯¹äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹ï¼Œ<strong>æ˜¯å¦åŒæ ·æœ‰æ•ˆå‘¢ï¼Ÿ</strong></p><p>ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼Œå¦‚æœèƒ½å°†å…¶è®¾è®¡æˆåŒæ ·æœ‰æ•ˆçš„ï¼Œåˆ™å¯ä»¥å‡è½»ä½¿ç”¨è€…çš„è®¤çŸ¥è´Ÿæ‹…ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨Spring Integration JDBCçš„åˆ†å¸ƒå¼é”å®ç°ä¸­ï¼Œtime to live<strong>å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚å®ƒå¯¹äºåŒä¸€ä¸ªJavaè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆçš„ã€‚</strong></p><p>ä¸‹é¢çš„å›¾æ˜¯ä¸€ä¸ªå®ƒä¸ä¼šç”Ÿæ•ˆçš„å…·ä½“ä¾‹å­ã€‚ </p><pre><code class="highlight mermaid">sequenceDiagramactor event_initiatorevent_initiator-&gt;&gt;instance_1: do somethinginstance_1-&gt;&gt;instance_1_thread_1: åˆ†é…å·¥ä½œç»™çº¿ç¨‹1note over instance_1_thread_1: instance 1 - thread 1 è·å¾—äº† lockinstance_1_thread_1-&gt;&gt;instance_1_thread_1: start doing its thingevent_initiator-&gt;&gt;instance_1: do another thinginstance_1-&gt;&gt;instance_1_thread_2: åˆ†é…å·¥ä½œç»™çº¿ç¨‹2note over instance_1_thread_2: instance 1 - thread 2 ç­‰å¾… locknote over instance_1_thread_2: ç­‰ ......note over instance_1_thread_2: ç­‰ ......note over instance_1_thread_1: thread 1ç”±äºæŸç§åŸå› å¡æ­»äº†ï¼Œæ²¡æœºä¼šé‡Šæ”¾é”note over instance_1_thread_1: lockçš„è¶…æ—¶æ—¶é—´TTLåˆ°note over instance_1_thread_2: thread 2 ä»ç„¶è·è·å–ä¸åˆ° locknote over instance_1_thread_2: ç»§ç»­ç­‰ä¹Ÿæ²¡ç”¨</code></pre><p>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç¬¬äºŒä¸ªçº¿ç¨‹æˆ–åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä»»ä½•å…¶ä»–çº¿ç¨‹ï¼Œå³ä½¿ç»§ç»­ç­‰å¾…é”ï¼Œä¹Ÿæ— æµäºäº‹ã€‚è¿™ä¹Ÿè§£é‡Šäº†time to liveåœ¨è¿™ç§æƒ…å†µä¸‹çš„æ— æ•ˆæ€§ã€‚</p><p><a href="https://github.com/cuipengfei/Spikes/blob/master/jpa/spring-jdbc-distributed-lock-issue/src/test/java/com/github/spring/example/LockTest.java">è¿™ä»½ä»£ç å¯ä»¥é‡ç°ä¸Šé¢ä¸¤å¹…å›¾æ‰€æè¿°çš„åœºæ™¯</a></p><p>è¦è§£å†³è¿™ç§æƒ…å†µä¸‹çš„é—®é¢˜ï¼Œåˆ™éœ€è¦ç”¨åˆ°ä¸‹é¢æåˆ°çš„è¿™ä¸ªexpireUnusedOlderThanæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ExpirableLockRegistry</span> <span class="keyword">extends</span> <span class="title class_">LockRegistry</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Remove locks last acquired more than &#x27;age&#x27; ago that are not currently locked.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> age the time since the lock was last obtained.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IllegalStateException if the registry configuration does not support this feature.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">expireUnusedOlderThan</span><span class="params">(<span class="type">long</span> age)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/spring-projects/spring-integration/blob/7dcc0bb125eb5d72d9dc6cec0cc91bd4114336be/spring-integration-core/src/main/java/org/springframework/integration/support/locks/ExpirableLockRegistry.java#L27-L36">ExpirableLockRegistry </a></p><p>å¦‚æœä¸€ä¸ªJavaè¿›ç¨‹ä¸­çš„ä¸€ä¸ªçº¿ç¨‹å› ä¸ºæŸç§åŸå› å¡æ­»äº†ï¼Œä»è€Œæ— æ³•é‡Šæ”¾é”ã€‚<br>åœ¨TTLè¿‡æœŸä¹‹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨å°è¯•è·å–åŒä¸€ä¸ªé”ä¹‹å‰ï¼Œå¯ä»¥è°ƒç”¨expireUnusedOlderThanæ¥å¼ºåˆ¶é‡Šæ”¾è¯¥é”ã€‚<br>ç„¶åå†å°è¯•è·å–é”ï¼Œå°±å¯ä»¥æˆåŠŸè·å–å¹¶ç»§ç»­å·¥ä½œã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¸æŠŠtime-to-liveè®¾è®¡çš„æ›´å…·æœ‰æ¦‚å¿µä¸Šçš„ä¸€è‡´æ€§ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸æŠŠtime-to-liveè®¾è®¡çš„æ›´å…·æœ‰æ¦‚å¿µä¸Šçš„ä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸æŠŠtime to liveè®¾è®¡çš„æ›´å…·æœ‰æ¦‚å¿µä¸Šçš„ä¸€è‡´æ€§ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸æŠŠtime to liveè®¾è®¡çš„æ›´å…·æœ‰æ¦‚å¿µä¸Šçš„ä¸€è‡´æ€§ï¼Ÿ</h2><p>å½“æ¶‰åŠåˆ°è·¨è¶Šä¸¤ä¸ªè¿›ç¨‹æ—¶ï¼Œtime to liveä¼šå‘æŒ¥ä½œç”¨ã€‚ä½†æ˜¯å¯¹äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´ï¼Œtime to liveå°±ä¸å†æœ‰æ•ˆã€‚è¿™ç§åŒä¸€ä¸ªæ¦‚å¿µåœ¨ä¸åŒçš„åœºæ™¯ä¸‹è¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼Œç¼ºä¹æ¦‚å¿µä¸Šçš„ä¸€è‡´æ€§ï¼Œè¿™å¯èƒ½ä¼šå¢åŠ ä½¿ç”¨è€…çš„è®¤çŸ¥è´Ÿæ‹…ã€‚</p><p>é‚£Springä¸ºä»€ä¹ˆè¦æŠŠå®ƒè®¾è®¡æˆè¿™æ ·å‘¢ï¼Ÿ</p><p>ä»¥ä¸‹æ˜¯æˆ‘çš„<strong>è§£è¯»</strong>ï¼š</p><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚æœä¸¤ä¸ªè¿›ç¨‹æƒ³è¦è·å¾—åŒä¸€ä¸ªé”ï¼Œé‚£ä¹ˆæ¥å¾—æ™šä¸€äº›çš„è¿›ç¨‹å®é™…ä¸Šå¹¶ä¸çŸ¥é“å‰ä¸€ä¸ªè¿›ç¨‹ç›®å‰å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Œå®ƒæ˜¯å¦å·²ç»æ­»äº¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œtime to liveæˆä¸ºäº†<strong>å†³ç­–çš„å”¯ä¸€ä¾æ®</strong>ã€‚å¦‚æœtime to liveè¿˜æ²¡æœ‰è¿‡æœŸï¼Œé‚£ä¹ˆæ¥å¾—æ™šçš„è¿›ç¨‹è®¤ä¸ºå®ƒä¸åº”è¯¥è·å–è¯¥é”ã€‚ä¸€æ—¦time to liveè¿‡æœŸï¼Œåç»­è¿›ç¨‹å°†æŠŠé”ç½®äºè‡ªå·±çš„æ§åˆ¶ä¹‹ä¸‹ï¼Œè€Œä¸ç®¡å‰ä¸€ä¸ªè¿›ç¨‹æ˜¯å¦ä»ç„¶æ´»ç€ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç”±äº<strong>ç¼ºå°‘å…¶ä»–çš„å†³ç­–ä¾æ®</strong>ï¼Œè¿™ç§æƒ…å†µä¸‹åªèƒ½é€‰æ‹©ä¾ç…§time to liveæ¥ç®€å•ç²—æš´çš„åŠäº‹ã€‚</p><p>ç„¶è€Œï¼Œå¯¹äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´ï¼Œæƒ…å†µå°±ä¸åŒäº†ã€‚å®ƒä»¬å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´(ä»å®ç°å±‚é¢æ¥è®²ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ˜¯å…±äº«<strong>åŒä¸€ä»½registryå’Œrepository</strong>çš„)ã€‚å¦‚æœåç»­çº¿ç¨‹å‘ç°å‰ä¸€ä¸ªçº¿ç¨‹åœ¨TTLè¿‡åè¿˜æ²¡æœ‰é‡Šæ”¾é”ï¼Œåˆ™é»˜è®¤è®¤ä¸ºå‰ä¸€ä¸ªçº¿ç¨‹ä»ç„¶æœ‰ç»§ç»­å·¥ä½œçš„èƒ½åŠ›ï¼Œå› æ­¤å®ƒé»˜è®¤ä¸ä¼šå¼ºåˆ¶æŠ¢å é”ã€‚é™¤éä»–åœ¨TTLä¹‹åç­‰è¿‡ä¸€æ®µæ—¶é—´ä¹‹åè§‰å¾—ç­‰ä¸åŠäº†ï¼Œè¿™æ—¶å€™ä»–<strong>å¯ä»¥é€‰æ‹©</strong>å¼ºåˆ¶æŠŠé”æŠ¢è¿‡æ¥ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå°±åƒåœ¨å¤ä»£<strong>ç¼ºä¹æ— çº¿ç”µé€šä¿¡</strong>çš„æˆ˜äº‰ä¸­ã€‚ä¸€æ”¯å°é˜Ÿå»æ‰§è¡Œä»»åŠ¡ï¼Œå¦ä¸€æ”¯å°é˜Ÿå¾…å‘½ã€‚ä¸‰ä¸ªå°æ—¶åï¼Œä¸è®ºå…ˆå‰çš„å°é˜Ÿæ˜¯å¦æˆåŠŸï¼Œåç»­å°é˜Ÿéƒ½å¿…é¡»å‡ºå‘å‚åŠ æˆ˜æ–—ã€‚å› ä¸ºé™¤äº†è¿™ä¸‰ä¸ªå°æ—¶ä¹‹å¤–ï¼Œä½ æ²¡æœ‰å…¶ä»–çš„å†³ç­–ä¾æ®ã€‚åªè¦æ—¶é—´åˆ°äº†ï¼Œæˆ‘å°±å¼€å§‹è¡ŒåŠ¨ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯åŒä¸€æ”¯å°é˜Ÿä¸­çš„ä¸¤ä¸ªå£«å…µï¼Œåé¢çš„å£«å…µå®é™…ä¸Šå¯ä»¥åœ¨ç›®è§†è·ç¦»å†…çœ‹åˆ°å‰é¢çš„å£«å…µæ˜¯å¦ä»ç„¶åœ¨æ‰§è¡Œä»»åŠ¡ã€‚å› æ­¤ï¼Œ<strong>å³ä¾¿æ˜¯æˆ˜å‹è¡ŒåŠ¨å¤ªæ…¢</strong>äº†ï¼Œä»–ä¹Ÿå¯ä»¥é€‰æ‹©å¤šç­‰å¾…ä¸€ä¼šï¼Œè®©å‰é¢çš„å£«å…µå¯ä»¥ç»§ç»­å®Œæˆä»»åŠ¡ã€‚å½“ç„¶ï¼Œå¦‚æœåé¢çš„å£«å…µç­‰ä¸åŠäº†ï¼Œæƒ³è¦ç«‹å³è¡ŒåŠ¨ï¼Œä»–ä¹Ÿå¯ä»¥é€‰æ‹©è¿™æ ·åšã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåé¢çš„å£«å…µ<strong>å…·æœ‰æ›´å¤šçš„å†³ç­–ä¾æ®</strong>ï¼Œå› æ­¤ä»–å¯ä»¥é€‰æ‹©å¤šç­‰å¾…ä¸€æ®µæ—¶é—´æˆ–ç«‹å³é‡‡å–è¡ŒåŠ¨ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç”±äºtime to liveé»˜è®¤å€¼ä¸å¤Ÿé•¿ï¼Œè€Œå¯¼è‡´åœ¨è¿˜ä¸è¯¥å¤±å»é”çš„æ—¶é—´ç‚¹ä¸Šè¿‡æ—©åœ°å¤±å»äº†é”ï¼ˆ<strong>é˜²æ­»é”æœºåˆ¶è¿‡æ—©åœ°ä»‹å…¥äº†</strong>ï¼‰ï¼Œè§£å†³æ–¹æ³•æ˜¯æŠŠTTLè®¾ç½®çš„è¶³å¤Ÿå¤§ï¼Œä»¥åŠåœ¨åˆé€‚çš„æ—¶æœºåšrenewä»è€Œé¿å…è¿‡æ—©åœ°å¤±å»é”ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜ï¼štime to liveå¯¹äºè¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜¯<strong>ä¸ä¼šé»˜è®¤ç”Ÿæ•ˆ</strong>çš„ï¼Œä»è€Œå¯¼è‡´åº”è¯¥å¤±å»é”çš„æ—¶é—´å·²ç»è¿‡äº†ï¼Œä½†å¡ä½çš„çº¿ç¨‹è¿˜æ²¡æœ‰é‡Šæ”¾é”ï¼Œè¿›è€Œå¯¼è‡´åç»­çš„çº¿ç¨‹æ‹¿ä¸åˆ°é”çš„æƒ…å†µã€‚è§£å†³æ–¹æ³•æ˜¯<strong>å¯ä»¥é€‰æ‹©</strong>è®©åŒä¸€ä¸ªè¿›ç¨‹å†…çš„åæ¥è€…çº¿ç¨‹ä½¿ç”¨expireUnusedOlderThanæ¥å¼ºåˆ¶å‰¥å¤ºé”(åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸¤ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­åæ¥çš„é‚£ä¸ªå…·æœ‰æ›´é«˜çš„è‡ªç”±è£é‡æƒï¼Œä¸å¿…åªä¾æ®TTLä¸€ä¸ªæŒ‡æ ‡æ¥è¡Œäº‹)ã€‚</p><pre><code class="highlight mermaid">mindmap  root(Spring Integration JDBC Distributed Lock)    é»˜è®¤TTLå¤ªçŸ­        è®¾ç½®é•¿ä¸€äº›        renew    å¡æ­»äº†ï¼Œæ²¡æœºä¼šé‡Šæ”¾é”        å…¶å®ƒè¿›ç¨‹å¯ä»¥åœ¨TTLè¿‡åæ‹¿åˆ°é”        åŒä¸€ä¸ªè¿›ç¨‹å†…çš„å…¶å®ƒçº¿ç¨‹å¯ä»¥é€‰æ‹©ä½¿ç”¨expireUnusedOlderThan</code></pre><p>é”çš„äº‹ï¼Œè¯¥å¤±å»å°±å¤±å»ï¼Œä¸å¤±å»ä¹Ÿå¼ºåˆ¶å¤±å»ã€‚</p><p>é”çš„äº‹ï¼Œä¸è¯¥å¤±å»å°±ä¸èƒ½å¤±å»ï¼Œè¦å¤±å»ä¹Ÿä¸è®¸å¤±å»ã€‚</p><p><img data-src="/../images/spring-lock/LiuLuoGuo.jpg" alt="llg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘åœ¨é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨Spring Integrationæä¾›çš„åŸºäºJDBCå®ç°çš„åˆ†å¸ƒå¼é”ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®è·µçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€äº›æœ‰è¶£çš„é—®é¢˜ï¼Œç°åœ¨åœ¨æ­¤è®°å½•å’Œæ€»ç»“ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å…±é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªå’Œtime to liveæœ‰å…³ï¼Œç¬¬äºŒä¸ªè¿˜æ˜¯å’Œtime to </summary>
      
    
    
    
    
    <category term="Java" scheme="https://cuipengfei.me/tags/Java/"/>
    
    <category term="åˆ†å¸ƒå¼" scheme="https://cuipengfei.me/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
    <category term="é”" scheme="https://cuipengfei.me/tags/%E9%94%81/"/>
    
  </entry>
  
  <entry>
    <title>å½“æµ‹è¯•ä»£ç ä½¿ç”¨éšæœºç”Ÿæˆçš„è¾“å…¥æ•°æ®æ—¶ï¼Œè¯¥å¦‚ä½•å»åšå‡ºæ–­è¨€</title>
    <link href="https://cuipengfei.me/blog/2023/03/18/generative-tests/"/>
    <id>https://cuipengfei.me/blog/2023/03/18/generative-tests/</id>
    <published>2023-03-18T14:34:00.000Z</published>
    <updated>2023-03-18T14:34:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ä»½æœ‰æ„æ€çš„ä»£ç "><a href="#ä¸€ä»½æœ‰æ„æ€çš„ä»£ç " class="headerlink" title="ä¸€ä»½æœ‰æ„æ€çš„ä»£ç "></a>ä¸€ä»½æœ‰æ„æ€çš„ä»£ç </h1><p>æœ€è¿‘çœ‹åˆ°äº†ä¸€ä»½<span style="color:orange;">ä½¿ç”¨éšæœºç”Ÿæˆçš„æ•°æ®ä½œä¸ºæµ‹è¯•è¾“å…¥</span>çš„æœ‰è¶£ä»£ç ï¼ŒæŠŠå…¶å¤§è‡´æ€è·¯ç”¨ä¼ªä»£ç æè¿°å¦‚ä¸‹ </p><h2 id="éœ€è¦è¢«æµ‹çš„å®ç°ä»£ç "><a href="#éœ€è¦è¢«æµ‹çš„å®ç°ä»£ç " class="headerlink" title="éœ€è¦è¢«æµ‹çš„å®ç°ä»£ç "></a>éœ€è¦è¢«æµ‹çš„å®ç°ä»£ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">calculateSomething</span>(<span class="params">inputData</span>) &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨inputDataæ¥è®¡ç®—ç»“æœ</span></span><br><span class="line">    <span class="comment">// å‡è£…è¿™é‡Œæœ‰ä¸€äº›å¾ˆå¤æ‚çš„é€»è¾‘</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯è¢«æµ‹çš„å‡½æ•°ï¼Œåœ¨æ­¤ä¸ç®¡å®ƒç®—çš„æ˜¯ä»€ä¹ˆï¼Œæ€»ä¹‹å®ƒæ¥å—inputï¼Œè¿”å›resultã€‚</p><h2 id="æµ‹è¯•ä»£ç çš„helpers"><a href="#æµ‹è¯•ä»£ç çš„helpers" class="headerlink" title="æµ‹è¯•ä»£ç çš„helpers"></a>æµ‹è¯•ä»£ç çš„helpers</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateInputData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// ç”¨æ¥ç”Ÿæˆæµ‹è¯•æ‰€éœ€çš„inputæ•°æ®</span></span><br><span class="line">    <span class="comment">// æ‰€ç”Ÿæˆçš„æ•°æ®å…·æœ‰ä¸€å®šçš„éšæœºæ€§</span></span><br><span class="line">    <span class="keyword">return</span> randomlyGeneratedInputData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fuction <span class="title function_">calculateExpectedResult</span>(<span class="params">inputData</span>)&#123;</span><br><span class="line">    <span class="comment">// ç”¨æ¥è®¡ç®—assertionæ‰€éœ€è¦çš„expectedå€¼</span></span><br><span class="line">    <span class="keyword">return</span> expectedResult;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æµ‹è¯•ä»£ç çš„helperå‡½æ•°ï¼Œä¸€ä¸ªç”¨æ¥ç”Ÿæˆæµ‹è¯•æ‰€éœ€çš„inputï¼Œä¸€ä¸ªç”¨æ¥è®¡ç®—expectedçš„å€¼ã€‚</p><h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> repeatTimes = <span class="number">100</span>; <span class="comment">//æ€»ä¹‹æ˜¯ä¸€ä¸ªè¾ƒå¤§çš„æ•°å­—ï¼Œä¸ä¸€å®šéå¾—æ˜¯100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;repeatTimes; i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> randomInputData = <span class="title function_">generateInputData</span>(); <span class="comment">//ç”Ÿæˆå…·æœ‰ä¸€å®šéšæœºæ€§çš„è¾“å…¥</span></span><br><span class="line">    <span class="keyword">var</span> expected = <span class="title function_">calculatedExpectedResult</span>(randomInputData); <span class="comment">//ç”¨æµ‹è¯•helperç®—å‡ºexpected</span></span><br><span class="line">    <span class="keyword">var</span> actual = <span class="title function_">calculateSomething</span>(randomInputData); <span class="comment">//ç”¨è¢«æµ‹æ–¹æ³•ç®—å‡ºactual</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">expect</span>(actual).<span class="title function_">toEqual</span>(expected); <span class="comment">//æ–­è¨€äºŒè€…ç›¸ç­‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯æµ‹è¯•ä»£ç ï¼Œåå¤è¿è¡Œå¤šæ¬¡ï¼Œæ¯æ¬¡éƒ½ç”Ÿæˆå…·æœ‰éšæœºæ€§çš„inputï¼Œç„¶åæŠŠinputä¼ é€’ç»™<code>calculatedExpectedResult</code>å’Œ<code>calculateSomething</code>ï¼Œæœ€åæ–­è¨€äºŒè€…è¿”å›å€¼æ˜¯ä¸€è‡´çš„ã€‚</p><p>è¿™ä»½ä»£ç å’Œå¸¸è§çš„æµ‹è¯•ä¸åŒï¼Œ<span style="color:orange;">å®ƒä½¿ç”¨çš„input dataä¸æ˜¯é¢„å…ˆè®¾å®šå¥½çš„</span>ï¼Œè€Œæ˜¯è¿è¡Œæ—¶éšæœºç”Ÿæˆçš„ã€‚è¿™ä¹Ÿæ˜¯å®ƒæœ‰è¶£çš„åŸå› ã€‚</p><h1 id="å¦‚ä½•è§£è¯»æµ‹è¯•ç»“æœ"><a href="#å¦‚ä½•è§£è¯»æµ‹è¯•ç»“æœ" class="headerlink" title="å¦‚ä½•è§£è¯»æµ‹è¯•ç»“æœ"></a>å¦‚ä½•è§£è¯»æµ‹è¯•ç»“æœ</h1><p>é€šå¸¸æ¥è¯´ï¼Œå½“æµ‹è¯•é€šè¿‡æ—¶ï¼Œå®ƒæ„å‘³ç€é’ˆå¯¹ç»™å®šçš„è¾“å…¥ï¼Œç¨‹åºç»™å‡ºäº†<strong>ç¬¦åˆé¢„æœŸ</strong>çš„è¾“å‡ºã€‚</p><p>ä½†æ˜¯å¯¹äºè¿™ä¸€ä»½ä»£ç æ¥è¯´ï¼Œå´å¹¶éå¦‚æ­¤ã€‚å› ä¸º<span style="color:orange;">å®ƒçš„expectedå€¼æ˜¯ç”±ä¸€ä¸ªhelperå‡½æ•°è®¡ç®—å¾—æ¥ï¼Œè€Œéæ˜¯ä¸€ä¸ªå·²ç»è¢«éªŒè¯è¿‡æ˜¯æ­£ç¡®çš„å€¼</span>ã€‚</p><p>é‚£ä¹ˆï¼Œ<span style="color:orange;">å¦‚æœä¸Šè¿°çš„æµ‹è¯•ä»£ç èƒ½å¤Ÿæ‰§è¡Œé€šè¿‡ï¼Œå®ƒæ˜¯åœ¨ä¼ é€’ä»€ä¹ˆä¿¡æ¯ç»™å¼€å‘è€…å‘¢ï¼Ÿ</span></p><ul><li><p>å®ƒæ„å‘³ç€<code>calculatedExpectedResult</code>è¿™ä¸ªhelperå‡½æ•°å’Œ<code>calculateSomething</code>è¿™ä¸ªè¢«æµ‹å‡½æ•°ä¹‹é—´ï¼Œå…·æœ‰<span style="color:orange;">è¾ƒé«˜çš„ç›¸ä¼¼æ€§</span>ï¼ŒäºŒè€…é’ˆå¯¹<span style="color:orange;">å¤šç»„</span>ä¸€æ ·çš„è¾“å…¥ï¼Œå¯ä»¥ç»™å‡ºä¸€æ ·çš„è¾“å‡º</p></li><li><p>å¦‚æœæˆ‘ä»¬æŠŠ<code>repeatTimes</code>çš„æ•°å€¼<span style="color:orange;">è°ƒåˆ°éå¸¸é«˜</span>ï¼Œæµ‹è¯•è¿˜èƒ½é€šè¿‡çš„è¯ï¼Œé‚£å°±è¯´æ˜<code>calculatedExpectedResult</code>è¿™ä¸ªhelperå‡½æ•°å’Œ<code>calculateSomething</code>è¿™ä¸ªè¢«æµ‹å‡½æ•°ä¹‹é—´çš„<span style="color:orange;">ç›¸ä¼¼æ€§éå¸¸é«˜ï¼Œç®€ç›´å¯ä»¥è¾¾åˆ°åŒåµåŒèƒèƒç”šè‡³æ˜¯å…‹éš†ä½“è¿™ç§ä»¥å‡ä¹±çœŸçš„ç¨‹åº¦</span></p></li></ul><p><span style="color:orange;"><strong>è¿™æ˜¯æˆ‘ä»¬éœ€è¦çš„å—ï¼Ÿ</strong></span></p><p><span style="color:orange;">æˆ‘ä»¬<strong>éœ€è¦å»æ¢å¯»ä¸–ç•Œä¸Šæ˜¯å¦å­˜åœ¨é‚£ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¡Œä¸ºå¯ä»¥åšåˆ°å’Œ<code>calculateSomething</code>æå…¶è´´è¿‘å—ï¼Ÿ</strong></span></p><p>æˆ‘è®¤ä¸ºæˆ‘ä»¬æ˜¯ä¸éœ€è¦çš„ã€‚</p><p>æˆ‘ä»¬éœ€è¦çš„æ˜¯å»éªŒè¯<code>calculateSomething</code>çš„è¡Œä¸ºæ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚è€Œä¸æ˜¯å»éªŒè¯æˆ‘èƒ½å†™å‡ºå¦ä¸€ä¸ªå’Œå®ƒçš„è¡Œä¸ºå¾ˆåƒçš„å‡½æ•°æ¥ã€‚</p><p>è¿™å°±å¦‚åŒæ˜¯ï¼šå¦‚æœæˆ‘å»æµ‹è¯•æ´—è¡£æœºçš„è¯ï¼Œæˆ‘å¸Œæœ›éªŒè¯çš„æ˜¯æŸæ¬¾æ´—è¡£æœºå¯ä»¥æŠŠè¡£æœæ´—æ¶¤å¹²å‡€ï¼Œå¹¶ä¸”ä¸ä¼šæŸä¼¤è¡£ç‰©ã€‚</p><p>è€Œä¸æ˜¯å¸Œæœ›éªŒè¯å­˜åœ¨å¦ä¸€å°æ´—è¡£æœºå’Œæˆ‘æ‰‹é‡Œè¿™ä¸€å°è¡¨ç°ä¸€æ ·ã€‚</p><p>è¦ä¸ç„¶çš„è¯ï¼Œæˆ‘è¯´ä¸å®šä¼šå¾—åˆ°ä¸¤å°æ´—ä¸å¹²å‡€è¡£æœï¼Œè¿˜ä¼šæŸä¼¤å¸ƒæ–™çš„æ´—è¡£æœºğŸ˜„</p><h1 id="å½“æµ‹è¯•ä»£ç ä½¿ç”¨éšæœºç”Ÿæˆçš„è¾“å…¥æ•°æ®æ—¶ï¼Œè¯¥å¦‚ä½•å»åšå‡ºæ–­è¨€"><a href="#å½“æµ‹è¯•ä»£ç ä½¿ç”¨éšæœºç”Ÿæˆçš„è¾“å…¥æ•°æ®æ—¶ï¼Œè¯¥å¦‚ä½•å»åšå‡ºæ–­è¨€" class="headerlink" title="å½“æµ‹è¯•ä»£ç ä½¿ç”¨éšæœºç”Ÿæˆçš„è¾“å…¥æ•°æ®æ—¶ï¼Œè¯¥å¦‚ä½•å»åšå‡ºæ–­è¨€"></a>å½“æµ‹è¯•ä»£ç ä½¿ç”¨éšæœºç”Ÿæˆçš„è¾“å…¥æ•°æ®æ—¶ï¼Œè¯¥å¦‚ä½•å»åšå‡ºæ–­è¨€</h1><p>ä¸Šé¢çš„ä»£ç è™½ç„¶åšçš„å¹¶ä¸å¦¥å½“ï¼Œä½†æ˜¯æƒ³è¦ç”¨éšæœºç”Ÿæˆçš„inputæ•°æ®å»åšæµ‹è¯•å…¶å®<strong>å¹¶ä¸æ˜¯ä¸€ä¸ªä¸åˆç†çš„æƒ³æ³•</strong>ã€‚</p><p>å½“æˆ‘ä»¬äººå·¥ç¼–åˆ¶çš„æµ‹è¯•æ•°æ®å¯¹äºæ•´ä½“æ ·æœ¬ç©ºé—´æ¥è¯´æ˜¾å¾—å¤ªå°æ—¶ï¼Œç”¨éšæœºæ•°æ®å»ä½œä¸ºinputæ•°æ®ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„è¡¥å……ã€‚</p><p>å…¶å…³é”®åœ¨äºï¼Œ<span style="color:orange;"><strong>å½“æˆ‘ä»¬ç»™inputå¼•å…¥äº†éšæœºæ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å»assertå…¶outputæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Ÿ</strong></span></p><p>å¦‚æœæˆ‘ä»¬è¿˜æ˜¯æƒ³è¦å’Œå¸¸è§„æµ‹è¯•ä¸€æ ·ï¼Œä¸¥æ ¼åœ°å»assertè¾“å‡ºçš„å€¼å’Œé¢„æœŸ<strong>ç›¸ç­‰</strong>ï¼Œé‚£ä¹ˆå°±ä¼šé™·å…¥ä¸Šè¿°ä»£ç çš„è¯¯åŒºé‡Œã€‚</p><p>ä½†æ˜¯å¦‚æœæ€è·¯æ¢ä¸€ä¸‹ï¼Œä¸ä¸€å®šéå¾—å¼ºæ±‚èƒ½å¤Ÿä¸¥æ ¼åœ°å»assertè¾“å‡ºçš„å€¼å’Œé¢„æœŸ<strong>ç›¸ç­‰</strong>ï¼Œè€Œæ˜¯å»assertè¾“å‡ºå€¼ç¬¦åˆä¸€å®šçš„è§„åˆ™ã€‚<br>è¿™æ ·ï¼Œå°±æ— éœ€åœ¨æµ‹è¯•ä»£ç é‡Œé‡å¤å»å®ç°ä¸€éï¼Œè€Œåªéœ€è¦æè¿°æˆ‘ä»¬é¢„æœŸè¾“å…¥å’Œè¾“å‡ºä¹‹é—´ç¬¦åˆå“ªç§è§„åˆ™ã€‚</p><h1 id="Property-Based-Testing"><a href="#Property-Based-Testing" class="headerlink" title="Property Based Testing"></a>Property Based Testing</h1><p>è€Œè¿™ï¼Œæ°å¥½å°±æ˜¯Property Based Testingã€‚</p><p>Property Based Testingæ˜¯ä¸€ç§åŸºäºå±æ€§è§„çº¦çš„æµ‹è¯•æ–¹æ³•ï¼Œé€šè¿‡ä½¿ç”¨éšæœºè¾“å…¥æ•°æ®æ¥éªŒè¯ç¨‹åºçš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸçš„å±æ€§è§„çº¦ã€‚</p><p>åœ¨ Property Based Testing ä¸­ï¼Œ<span style="color:orange;">æµ‹è¯•ç”¨ä¾‹æ˜¯åŸºäºå±æ€§è§„çº¦è‡ªåŠ¨ç”Ÿæˆçš„</span>ã€‚</p><p>Property Based Testing çš„åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li><p>å®šä¹‰å±æ€§è§„çº¦ï¼šå®šä¹‰ç¨‹åºçš„è¡Œä¸ºåº”è¯¥æ»¡è¶³çš„å±æ€§è§„çº¦ï¼Œè¿™äº›è§„çº¦é€šå¸¸æ˜¯<span style="color:orange;"><strong>é€šç”¨çš„ã€å¯é‡ç”¨çš„ã€æŠ½è±¡</strong>çš„ï¼Œè€Œ<strong>ä¸æ˜¯ç‰¹å®šçš„æµ‹è¯•ç”¨ä¾‹</strong></span>ã€‚</p></li><li><p>ç”Ÿæˆéšæœºæ•°æ®ï¼šé€šè¿‡éšæœºæ•°æ®ç”Ÿæˆå™¨ç”Ÿæˆéšæœºæ•°æ®ï¼Œå¹¶å°†éšæœºæ•°æ®è¾“å…¥åˆ°ç¨‹åºä¸­ã€‚</p></li><li><p>æ£€æŸ¥å±æ€§è§„çº¦ï¼šå°†å®é™…è¾“å‡ºä¸å®šä¹‰çš„å±æ€§è§„çº¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç¨‹åºçš„è¾“å‡ºç¬¦åˆå±æ€§è§„çº¦ï¼Œåˆ™æµ‹è¯•é€šè¿‡ï¼Œå¦åˆ™æµ‹è¯•å¤±è´¥ã€‚</p></li><li><p>ä¿®å¤ä»£ç ï¼šå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåˆ™éœ€è¦å¯¹ç¨‹åºè¿›è¡Œä¿®å¤ï¼Œç›´åˆ°ç¨‹åºèƒ½å¤Ÿç¬¦åˆæ‰€æœ‰å±æ€§è§„çº¦ã€‚</p></li></ul><p>ä¸€äº›å¸¸ç”¨çš„ Property Based Testing æ¡†æ¶åŒ…æ‹¬ QuickCheckã€Hypothesisã€ScalaCheckã€fast-check ç­‰ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€æ®µä½¿ç”¨Property Based Testingçš„æ ·ä¾‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fc = <span class="built_in">require</span>(<span class="string">&#x27;fast-check&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Property-Based Testingï¼Œæµ‹è¯•åŠ æ³•å‡½æ•°</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;åŠ æ³•æ»¡è¶³äº¤æ¢å¾‹&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(), fc.<span class="title function_">integer</span>(), <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, y) === <span class="title function_">add</span>(y, x);</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;åŠ 0ä¸å½±å“ç»“æœ&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(), <span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, <span class="number">0</span>) === x;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æ­£æ•°åŠ è´Ÿæ•°ï¼Œç»“æœå°äºåŸæ•°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(<span class="number">1000</span>, <span class="number">1</span>), fc.<span class="title function_">integer</span>(-<span class="number">1</span>, -<span class="number">1000</span>), <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, y) &lt; x;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;è´Ÿæ•°åŠ æ­£æ•°ï¼Œç»“æœå¤§äºåŸæ•°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(-<span class="number">1000</span>, -<span class="number">1</span>), fc.<span class="title function_">integer</span>(<span class="number">1</span>, <span class="number">1000</span>), <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, y) &gt; x;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;è´Ÿæ•°åŠ è´Ÿæ•°ï¼Œç»“æœå°äºåŸæ•°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(-<span class="number">1000</span>, -<span class="number">1</span>), fc.<span class="title function_">integer</span>(-<span class="number">1000</span>, -<span class="number">1</span>), <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, y) &lt; x;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æ­£æ•°åŠ æ­£æ•°ï¼Œç»“æœå¤§äºåŸæ•°&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(<span class="number">1</span>, <span class="number">1000</span>), fc.<span class="title function_">integer</span>(<span class="number">1</span>, <span class="number">1000</span>), <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, y) &gt; x;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;ä»»ä½•æ•°åŠ è‡ªå·±ï¼Œç»“æœæ˜¯ä¸¤å€&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fc.<span class="title function_">assert</span>(fc.<span class="title function_">property</span>(fc.<span class="title function_">integer</span>(), <span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">add</span>(x, x) === x * <span class="number">2</span>;</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­æ‰€ä½¿ç”¨çš„fast-check(fc)ä¼šå¸®åŠ©æˆ‘ä»¬<span style="color:orange;">ç”Ÿæˆå¤§é‡çš„</span>å…·æœ‰éšæœºæ€§çš„è¾“å…¥æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶<span style="color:orange;">æ²¡æœ‰å»assert addçš„è¿”å›å€¼ç­‰äºæŸä¸ªå…·ä½“çš„æ•°å­—</span>ï¼Œè€Œæ˜¯å»åˆ¤æ–­<span style="color:orange;">addè¿™ä¸ªå‡½æ•°åœ¨å…¶è¾“å…¥å€¼ç¬¦åˆç‰¹å®šè§„åˆ™æ—¶å…¶è¿”å›å€¼ç¬¦åˆæˆ‘ä»¬é€šè¿‡fcå®šä¹‰çš„è§„å¾‹</span>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸€ä»½æœ‰æ„æ€çš„ä»£ç &quot;&gt;&lt;a href=&quot;#ä¸€ä»½æœ‰æ„æ€çš„ä»£ç &quot; class=&quot;headerlink&quot; title=&quot;ä¸€ä»½æœ‰æ„æ€çš„ä»£ç &quot;&gt;&lt;/a&gt;ä¸€ä»½æœ‰æ„æ€çš„ä»£ç &lt;/h1&gt;&lt;p&gt;æœ€è¿‘çœ‹åˆ°äº†ä¸€ä»½&lt;span style=&quot;color:orange;&quot;&gt;ä½¿ç”¨éšæœºç”Ÿæˆçš„æ•°æ®ä½œä¸º</summary>
      
    
    
    
    
    <category term="testing" scheme="https://cuipengfei.me/tags/testing/"/>
    
  </entry>
  
  <entry>
    <title>å¢ç‘Ÿç»æµå­¦</title>
    <link href="https://cuipengfei.me/blog/2022/10/28/loser-economy/"/>
    <id>https://cuipengfei.me/blog/2022/10/28/loser-economy/</id>
    <published>2022-10-28T08:48:00.000Z</published>
    <updated>2022-10-28T08:48:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img data-src="https://img14.360buyimg.com//n0/jfs/t1/176451/22/10402/376750/60a37fb7E23ecc0e3/aa8754102dc19767.jpg"></p><h1 id="æ­¤ä¹¦è®²ä»€ä¹ˆ"><a href="#æ­¤ä¹¦è®²ä»€ä¹ˆ" class="headerlink" title="æ­¤ä¹¦è®²ä»€ä¹ˆ"></a>æ­¤ä¹¦è®²ä»€ä¹ˆ</h1><p>é©¬å…‹æ€ã€Šèµ„æœ¬è®ºã€‹è®²çš„ä¸‰ä»¶äº‹ï¼š</p><ul><li>åŸå§‹ç§¯ç´¯é æš´åŠ›</li><li>è´«å¯Œå·®è·ä¼šæ‰©å¤§</li><li>æœ€ç»ˆè‡ªæ¯</li></ul><h1 id="ç»æµä¸æ”¿æ²»"><a href="#ç»æµä¸æ”¿æ²»" class="headerlink" title="ç»æµä¸æ”¿æ²»"></a>ç»æµä¸æ”¿æ²»</h1><p>ç»æµå­¦æ˜¯æœ‰é˜¶çº§å±æ€§çš„ã€‚</p><p>å“ªä¸ªé˜¶çº§ç°åœ¨è¯´äº†ç®—ï¼Œå“ªä¸ªé˜¶çº§çš„ç»æµå­¦å°±æµè¡Œã€‚</p><p>åä¹‹äº¦ç„¶ï¼Œå¯ä»¥é€šè¿‡è§‚å¯Ÿå“ªä¸ªå­¦è¯´æµè¡Œæ¥å€’æ¨è°è¯´äº†ç®—ã€‚</p><ul><li>åœ°ä¸»ï¼š é‡å†œä¸»ä¹‰</li><li>å•†äººï¼š é‡å•†ä¸»ä¹‰</li><li>æ–°å…´èµ„äº§é˜¶çº§ï¼š è‡ªç”±å¸‚åœºå’ŒåŠ³åŠ¨ä»·å€¼è®º</li><li>å·¥äººé˜¶çº§ï¼š åŠ³åŠ¨ä»·å€¼è®º</li><li>èµ„äº§é˜¶çº§å·åœŸé‡æ¥ï¼š è¾¹é™…æ•ˆç”¨ä»·å€¼è®º</li></ul><p>ä¸åŒçš„é˜¶çº§æœ‰ä¸åŒçš„ä»·å€¼ç†è®ºï¼Œè¿™å°±å¦‚åŒä¸åŒçš„å®—æ•™ä¿¡ä»°å¯¹å–„è¡Œçš„å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚<br>ç»Ÿæ²»é˜¶çº§çš„ç»æµå­¦ï¼Œæ˜¯ä¸ºç»Ÿæ²»é˜¶çº§å¯»æ‰¾åˆæ³•æ€§çš„ã€‚è¢«ç»Ÿæ²»é˜¶çº§çš„ç»æµå­¦ï¼Œè‡ªç„¶æ˜¯ä¸ºè¢«ç»Ÿæ²»é˜¶çº§ç”³è¯‰çš„ï¼Œé¡ºä¾¿æ§è¯‰å¯¹æ–¹ã€‚<br>å¸‚åœºæ˜¯ä¸æ˜¯çœŸçš„æœ‰æ•ˆï¼Œåˆ°åº•ä»€ä¹ˆåˆ›é€ ä»·å€¼ï¼Œå…¶å®å°±çœ‹è°æ¥è§£é‡Šã€‚</p><p>æŒ‰ç…§å¢ç‘Ÿç»æµå­¦ï¼ŒåœŸåœ°æ²¡æœ‰ä»·å€¼ã€‚åœŸåœ°çš„æ‰€æœ‰åˆ¶ï¼Œä½¿åœŸåœ°æ‰€æœ‰è€…æœ‰æƒå‘åœ¨åœŸåœ°ä¸Šç”Ÿæ´»å·¥ä½œçš„äººè¦æ±‚è´¡èµ‹ã€‚åœŸåœ°æ‰€æœ‰æƒè¶Šå„æ–­ï¼Œè¦æ±‚çš„åœ°ç§Ÿå°±è¶Šé«˜ã€‚åœŸåœ°å„æ–­ç¨‹åº¦é«˜çš„åœ°æ–¹ï¼Œç»å¯¹åœ°ç§Ÿå°±é«˜ã€‚<strong>æ‰€ä»¥æˆ¿å­çš„æ˜‚è´µå¹¶ä¸æ˜¯åœŸåœ°çš„ä»·å€¼æ˜‚è´µï¼Œè€Œæ˜¯åœŸåœ°çš„æ‰€æœ‰æƒé«˜åº¦å„æ–­ï¼Œå¯¼è‡´åœ°ç§Ÿæ˜‚è´µã€‚</strong></p><h1 id="å±æœºçš„è¡¨å¾ä¸å¯¹å…¶çš„è§£é‡Š"><a href="#å±æœºçš„è¡¨å¾ä¸å¯¹å…¶çš„è§£é‡Š" class="headerlink" title="å±æœºçš„è¡¨å¾ä¸å¯¹å…¶çš„è§£é‡Š"></a>å±æœºçš„è¡¨å¾ä¸å¯¹å…¶çš„è§£é‡Š</h1><ul><li>å¦ˆå¦ˆï¼Œå¤©è¿™ä¹ˆå†·ï¼Œæˆ‘ä»¬å®¶ä¸ºä»€ä¹ˆä¸ç”Ÿç«å‘¢ï¼Ÿ</li><li>å› ä¸ºä½ çˆ¸çˆ¸å¤±ä¸šäº†ï¼Œæˆ‘ä»¬æ²¡æœ‰é’±å»ä¹°ç…¤ã€‚</li><li>å°å­©ç»§ç»­é—®ï¼šâ€œå¦ˆå¦ˆï¼Œçˆ¸çˆ¸ä¸ºä»€ä¹ˆå¤±ä¸šå‘¢ï¼Ÿâ€</li><li>ä»–å¦ˆå¦ˆè¯´ï¼šâ€œå› ä¸ºä½ çˆ¸çˆ¸çš„ç…¤çŸ¿å€’é—­äº†ã€‚ã€</li><li>å°å­©æ¥ç€é—®ï¼šâ€œå¦ˆå¦ˆï¼Œçˆ¸çˆ¸çš„ç…¤çŸ¿ä¸ºä»€ä¹ˆä¼šå€’é—­å‘¢ï¼Ÿâ€</li><li>ä»–å¦ˆå¦ˆè¯´ï¼šâ€œå› ä¸ºæ²¡æœ‰äººä¹°ä½ çˆ¸çˆ¸çš„ç…¤çŸ¿çš„ç…¤ï¼Œç…¤å–ä¸å‡ºå»ï¼Œæ‰€ä»¥ç…¤çŸ¿å€’é—­äº†ã€‚â€</li></ul><p>ä¸å°å»ºæ—¶æœŸçš„å±æœºä¸åŒï¼Œèµ„æœ¬ä¸»ä¹‰æ¡ä»¶ä¸‹çš„å±æœºçš„ç‰¹ç‚¹ï¼š</p><ul><li>ä¸æ˜¯äº§å“ä¸è¶³è€Œæ˜¯äº§å“è¿‡å‰©</li><li>ä¸æ˜¯åŠ³åŠ¨åŠ›è¢«é€æ”¯è€Œæ˜¯åŠ³åŠ¨åŠ›è¢«é—²ç½®</li><li>ä¸æ˜¯æ²¡ç¨‚é£Ÿåƒï¼Œè€Œæ˜¯äº§èƒ½è¿‡å‰©å¯¼è‡´ä¼ä¸šç ´äº§ï¼Œç„¶åå¤§å®¶ä¸‹å²—ï¼Œæ²¡é’±ä¹°ç²®é£Ÿåƒ</li><li>äº§èƒ½æœ‰çš„æ˜¯ï¼Œå°±æ˜¯æ²¡é”€è·¯ï¼›ç²®é£Ÿæœ‰çš„æ˜¯ï¼Œå°±æ˜¯æ²¡é’±ä¹°ï¼›åŠ³åŠ¨åŠ›æœ‰çš„æ˜¯ï¼Œå°±æ˜¯æ²¡æ´»å¹²</li><li>è¿™ç§å±æœºæœ‰å¾ˆå¼ºçš„å‘¨æœŸæ€§ï¼ŒæŒ‰æ—¶è¢­å‡»ç»æµ</li></ul><p>å·¥ä¸šåŒ–çš„èµ„æœ¬ä¸»ä¹‰ç”Ÿäº§çš„ç‰¹ç‚¹æ˜¯æ‰€æœ‰çš„äººï¼Œéƒ½ä¸ºåˆ«äººç”Ÿäº§å•†å“ï¼Œæ‰€æœ‰çš„äººéƒ½æ¶ˆè´¹åˆ«äººç”Ÿäº§çš„å•†å“ã€‚</p><p>å·¥äººä¸€æ—¦å¤±ä¸šå°±å¾ˆéš¾æ‰¾åˆ°åŸæœ‰å·¥èµ„å¾…é‡æ°´å¹³ç±»ä¼¼çš„å·¥ä½œã€‚å› ä¸ºå…¨ç¤¾ä¼šçš„èµ„æœ¬å®¶å‡ ä¹åœ¨ä¸€å¤œä¹‹é—´è§‰å¾—ä»–ä»¬çš„åŠ³åŠ¨ä¸å€¼é’±äº†ã€‚åˆ°å¤„éƒ½æ˜¯å †ç§¯çš„å•†å“ï¼Œè€æ¿åšä»€ä¹ˆä¹Ÿä¸èµšé’±ï¼Œç´¢æ€§åœäº§ï¼Œè€æ¿ä¸ç”Ÿäº§ï¼Œå·¥äººçš„åŠ³åŠ¨ä¹Ÿå°±ä¸å€¼é’±äº†ï¼Œå¯¹è€æ¿å°±æ²¡æœ‰ç”¨äº†ã€‚</p><p>ç¨³æ‹¿ç»æµå­¦å‡è®¾å·¥äººå·¥èµ„æ°´å¹³ä¸‹é™ï¼Œè€æ¿ä¼šå¢åŠ åŠ³åŠ¨åŠ›çš„éœ€æ±‚ã€‚é—®é¢˜æ˜¯ï¼Œè€æ¿çš„éœ€æ±‚ä¸äº§å“çš„é”€å”®æœ‰å…³ï¼Œå½“é”€å”®æƒ…å†µä¸æ”¹å–„çš„æ—¶å€™ï¼Œå·¥äººå·¥èµ„å†ä¾¿å®œï¼Œè€æ¿ä¹Ÿæ²¡æœ‰å…´è¶£å¤šé›‡äººã€‚</p><p>ç¤¾ä¼šé‡‘å­—å¡”çš„å¹³çº§ä¹‹é—´æ˜¯å¯ä»¥è‡ªåŠ¨è°ƒèŠ‚çš„ï¼Œä½†æ˜¯ä¸Šä¸‹çº§ä¹‹é—´å´ä¸èƒ½è‡ªç”±è°ƒèŠ‚ã€‚å½“ç¤¾ä¼šéœ€è¦çš„äº§å“ä¸èµ„æœ¬å®¶æä¾›çš„äº§å“ä¸å¯¹ç§°çš„æ—¶å€™ï¼Œèµ„æœ¬å®¶èƒ½è‡ªè¡Œæ”¹å˜äº§å“ç»“æ„ã€‚å½“ç¤¾ä¼šéœ€è¦çš„åŠ³åŠ¨åŠ›ä¸å·¥äººèƒ½æä¾›çš„åŠ³åŠ¨åŠ›ä¸å¯¹ç§°çš„æ—¶å€™ï¼Œå·¥äººèƒ½è‡ªåŠ¨æ”¹è¡Œã€‚<strong>ä½†æ˜¯å½“å¡”çš„ä¸Šçº§ä¸æ„¿æ„æŠ•èµ„å’Œæ¶ˆè´¹çš„æ—¶å€™ï¼Œå¡”çš„ä¸‹çº§å´æ²¡æœ‰èƒ½åŠ›å»ä»£æ›¿ä¸Šçº§æŠ•èµ„æˆ–æ¶ˆè´¹ã€‚è¿™æ‰æ˜¯çœŸæ­£çš„å›°éš¾ã€‚</strong></p><h2 id="å‡¯æ©æ–¯"><a href="#å‡¯æ©æ–¯" class="headerlink" title="å‡¯æ©æ–¯"></a>å‡¯æ©æ–¯</h2><p>1936å¹´ï¼Œå‡¯æ©æ–¯åœ¨ä»–çš„è‘—ä½œã€Šå°±ä¸šã€åˆ©æ¯å’Œè´§å¸é€šè®ºã€‹ä¸­æå‡ºåœ¨èµ„æœ¬ä¸»ä¹‰åˆ¶åº¦ä¸‹ä¸æ˜¯äº§å“åšå¾—å‡ºå°±å–å¾—æ‰ï¼Œæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†äº§å“æ³¨å®šæ— æ³•æ¶ˆè´¹ï¼Œå¦‚æ­¤å¿…ç„¶å¯¼è‡´èµ„æœ¬å®¶å‹ç¼©ç”Ÿäº§ï¼Œå·¥äººå¤±ä¸šã€‚ä¸ºäº†æŒ½æ•‘èµ„æœ¬ä¸»ä¹‰ï¼Œå¤šä½™çš„äº§å“éœ€è¦æ”¿åºœå¸®åŠ©æ¶ˆè´¹æ‰ï¼Œç”šè‡³æ˜¯æµªè´¹æ‰ã€‚æ— æ³•æ¶ˆè´¹çš„äº§å“çš„é‡éšç€è´«å¯Œå·®è·çš„å¢å¤§è€Œå¢å¤§ï¼Œæ¢å¥è¯è¯´ï¼Œè´«å¯Œå·®è·è¶Šå¤§çš„ç»æµä½“ï¼Œå¤±ä¸šé—®é¢˜è¶Šä¸¥é‡ã€‚</p><p>æ¶ˆè´¹éœ€æ±‚ä¸è¶³å’ŒæŠ•èµ„éœ€æ±‚ä¸è¶³å°†äº§ç”Ÿå¤§é‡çš„å¤±ä¸šï¼Œå½¢æˆç”Ÿäº§è¿‡å‰©çš„ç»æµå±æœºã€‚</p><p>å½“æŠ•èµ„çš„åˆ©æ¶¦è¿˜ä¸å¦‚åˆ©ç‡çš„æ—¶å€™ï¼Œèµ„æœ¬å®¶å°±éƒ½ä¸æŠ•èµ„ï¼ŒæŒå¸è§‚æœ›ï¼Œè½¬è€Œå­˜é“¶è¡Œåƒåˆ©æ¯ã€‚å¦‚æœè¿™ä¸ªæ—¶å€™åˆ©ç‡é«˜ï¼Œé‚£ä¹ˆæŠ•èµ„å°±éå¸¸å°‘äº†ã€‚<br>å…¶å®è¿˜æ˜¯æ¶ˆè´¹éœ€æ±‚ä¸è¶³ã€‚å› ä¸ºæŠ•èµ„éœ€æ±‚å½’æ ¹åˆ°åº•å®Œå…¨ä»°ä»—æ¶ˆè´¹å“çš„é”€å”®æƒ…å†µã€‚</p><p>è§Šæ©æ–¯ä¸»ä¹‰æ˜¯ç”¨é€šèƒ€æ¢å°±ä¸šï¼šåé—ç—‡å°±æ˜¯é€šè´§è†¨èƒ€ã€‚</p><h2 id="å¼—é‡Œå¾·æ›¼"><a href="#å¼—é‡Œå¾·æ›¼" class="headerlink" title="å¼—é‡Œå¾·æ›¼"></a>å¼—é‡Œå¾·æ›¼</h2><p>åœ¨å¼—é‡Œå¾·æ›¼çœ‹æ¥ï¼Œæ”¿åºœ</p><ul><li>ç¬¬ä¸€è¦åŠ¡æ˜¯å›½é˜²</li><li>ç¬¬äºŒè¦åŠ¡æ˜¯ä¿è¯å¥‘çº¦çš„å®æ–½</li><li>è€Œè´¢å¯Œåˆ†é…åˆ™å±äºæ˜¯ä¸€ä¸ªäººè®¤ä¸ºæœ‰ç›Šï¼Œå¦ä¸€ä¸ªäººè®¤ä¸ºæ˜¯æœ‰å®³çš„</li></ul><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ¢ä¸€ä¸ªè§’åº¦çœ‹å¼—é‡Œå¾·æ›¼çš„è¦æ±‚çš„è¯ï¼Œå°±ä¼šå‘ç°ä¸‰ä»¶äº‹è¯´èµ·æ¥å† å†•å ‚çš‡ï¼š</p><ul><li>ç¬¬ä¸€æ˜¯ä¸è¦å¤–æ¥åŠ¿åŠ›å¹²æ¶‰ç¨³æ‹¿</li><li>ç¬¬äºŒæ˜¯è¦æ±‚æ³•å¾‹æ˜¯ä¿è¯å¥‘çº¦çš„æ‰§è¡Œï¼Œä¸è¦æ’æ‰‹ç¨³æ‹¿åˆ©ç”¨å¥‘çº¦åˆæ³•åœ°æŠ¢åŠ«å¢ç‘Ÿ </li><li>ç¬¬ä¸‰æ˜¯ä¸è¦è¯•å›¾è§¦ç¢°ï¼Œç”šè‡³è¿”è¿˜æŠ¢æ¥çš„èµƒç‰©</li></ul><p>å¯¹å¼±è€…æ¥è¯´ï¼Œä¸å¼ºè€…è´¹å„æ³¼èµ–å°±æ˜¯æœ€å¤§çš„ä¸å…¬å¹³ã€‚è‡ªæ„¿å’ŒåŒæ–¹è·åˆ©ï¼Œåªæœ‰åœ¨åŒæ–¹ç»æµåœ°ä½æ¥è¿‘çš„æ—¶å€™æ‰èƒ½å­˜åœ¨ã€‚</p><p>å…³ç¨ä¿æŠ¤äº†å¹¼å¹´æ—¶æœŸçš„ç¾å›½èµ„æœ¬ï¼Œé¿å…è¢«è‹±å›½èµ„æœ¬åå™¬ï¼Œé¿å…æˆä¸ºè‹±å›½çš„ç»æµæ®–æ°‘åœ°</p><p><strong>å¼—é‡Œå¾·æ›¼å’Œå‡¯æ©æ–¯çš„ç†è®ºå†²çªï¼Œä¸æå˜‰å›¾å’Œé©¬å°”è¨æ–¯çš„å†²çªå¼‚æ›²åŒå·¥ã€‚éƒ½æ˜¯ä¸¤ä¸ªé›†å›¢åœ¨äº‰å¤ºç»æµä¸»å¯¼æƒã€‚</strong></p><p>è´¢äº§å…·æœ‰è‡ªæˆ‘æ±‡é›†çš„æ•ˆåº”ï¼Œå¤å¾€ä»Šæ¥å°å†œç»æµå°±æ²¡æœ‰é•¿æœŸç¨³å®šå­˜åœ¨è¿‡ã€‚å°å†œå¦‚æœä¸èƒ½è¿›åŒ–ä¸ºå¤§åœ°ä¸»ï¼Œé‚£ä¹ˆè¿Ÿæ—©ä¼šè¢«åœ°ä¸»åå¹¶ã€‚</p><p>èµ„æœ¬ä¸»ä¹‰ç¤¾ä¼šçš„çŸ›ç›¾çš„æ ¸å¿ƒä¸æ˜¯ç”Ÿäº§åŠ›çš„å‘å±•ï¼Œè€Œæ˜¯èµ„æœ¬ä¸»ä¹‰åˆ†é…åˆ¶åº¦ã€‚</p><p>è‡ªç”±å¸‚åœºåŠ ç§æœ‰äº§æƒï¼Œåªè¦ä¸€ä»£äººå°±èƒ½åœ¨ç¤¾ä¼šä¸Šå»ºç«‹èµ·äººä¸äººä¹‹é—´ä¸å¯é€¾è¶Šçš„é¸¿æ²Ÿã€‚èƒ½åŠ›çš„ç«äº‰æœ€å¤šåœ¨ä¸€ä»£äººä¹‹åŒå‘æŒ¥ä½œç”¨ï¼Œä¸€ä»£äººä¹‹åèµ„äº§ç¡®ç«‹ç»Ÿæ²»åœ°ä½ã€‚</p><p>å…¶å®ï¼Œå¯¹å¤§èµ„æœ¬å®¶æ¥è®²ï¼Œå‘¨æœŸæ€§çš„ç»æµå±æœºæœªå¿…æ˜¯åäº‹ã€‚ç»æµå±æœºå¯ä»¥ä¿ƒè¿›èµ„æœ¬æ±‡èšåˆ°å¼ºè€…ä¹Ÿå°±æ˜¯å¤§èµ„æœ¬å®¶æ‰‹ä¸­ã€‚</p><p>è®¤è¯†ç»æµå±æœºå¹¶ä¸å¤æ‚ï¼Œè§£å†³ç»æµå±æœºï¼ˆè‡³å°‘ä»ç†è®ºä¸Šï¼‰ä¹Ÿä¸å¤æ‚ï¼Œå¤æ‚çš„æ˜¯åé¢çº è‘›çš„åˆ©ç›Šã€‚ç»æµå±æœºè¢­æ‰°äººç±»å°†è¿‘ 200 å¹´äº†ï¼Œè§£å†³çš„åŠæ³•ï¼Œæ— è®ºæ˜¯ä¹¦é¢è¿˜æ˜¯å®æˆ˜çš„éƒ½ä¸å°‘ï¼š</p><ul><li>å¸Œç‰¹å‹’çš„è§£å†³æ–¹å¼æ˜¯å¯»æ±‚ç”Ÿå­˜ç©ºé—´ã€‚ä»ç»æµæ®–æ°‘åœ°è·å¾—å»‰ä»·çš„åŸææ–™ï¼Œè¿‡å‰©çš„äº§å“å‘ç»æµæ®–æ°‘åœ°å€¾é”€ã€‚</li><li>å‡¯æ©æ–¯çš„è§£å†³æ–¹å¼ï¼Œæ˜¯æ”¿åºœå°é’±ï¼Œç”±æ”¿åºœåˆ›é€ éœ€æ±‚ã€‚å¤šä½™çš„äº§èƒ½æµªè´¹æ‰ï¼Œèµ„æœ¬å®¶ä¸æ˜¯æ²¡é’±ä¸ç”Ÿäº§ï¼Œä¸é›‡ç”¨å·¥äººå—ï¼Ÿç”¨å°é’æœºç»™ä»–ä»¬é’±å°±æ˜¯äº†ã€‚æ”¿åºœæœ‰å°é’æœºè¿˜æ„æ²¡é’±æ”¯ä»˜ï¼Ÿåæœæ˜¯é€šè´§è†¨èƒ€æˆ–è€…èµ„äº§æ³¡æ²«ã€‚</li><li>ç½—æ–¯ç¦çš„è§£å†³æ–¹æ¡ˆï¼Œæ˜¯ç»™å·¥äººæ›´å¤§çš„æƒåˆ©ï¼Œæ”¯æŒä»–ä»¬ä¸èµ„æœ¬å®¶æ–—äº‰ã€‚å¢åŠ è´¢äº§ç¨è®©ç¨³æ‹¿å‡ºè¡€ï¼Œé€šè¿‡è½¬ç§»æ”¯ä»˜ï¼Œç»™å¢ç‘Ÿæ›´å¤šçš„ç¦åˆ©ã€‚</li></ul><p>è¿™ä¹ˆå¤šæ–¹æ³•ï¼Œå¤šæ•°æ•ˆæœéƒ½ä¸å¥½ã€‚è¿™æ˜¯å› ä¸ºç¨³æ‹¿å¤„äºå¡”å°–çš„åœ°ä½ï¼Œç›´æ¥è°ƒèŠ‚æ€»é‡è€Œä¸è§¦åŠ¨åˆ†é…æ¨¡å¼çš„è§£å†³æ–¹æ¡ˆï¼Œä¸è¿‡æ˜¯ç»™ç¨³æ‹¿æ›´å¤šçš„å‘è´¢çš„æœºä¼šï¼Œå¯¼è‡´æ›´ä¸¥é‡çš„åˆ†é…ä¸å…¬ã€‚å¦‚æœè§¦åŠ¨åˆ†é…æ¨¡å¼ï¼Œåˆéš¾å…é­åˆ°ç¨³æ‹¿çš„å¼ºå¤§é˜»ç¢ï¼Œå¾ˆå¯èƒ½åŠé€”è€ŒåºŸã€‚</p><h1 id="èµ„äº§çš„å±æ€§"><a href="#èµ„äº§çš„å±æ€§" class="headerlink" title="èµ„äº§çš„å±æ€§"></a>èµ„äº§çš„å±æ€§</h1><p>å¯¹äº§æ¥è¯´ï¼Œå…·ä½“é€‰æ‹©å“ªç§æ–¹å¼ï¼Œå–å†³äºå“ªç§æ–¹å¼æ¥é’±æœ€å®¹æ˜“ï¼Œæˆ–è€…è¯´é£é™©æ›´å°ï¼Œæ•ˆç‡æ›´é«˜ã€‚äº§æ˜¯å¦å‘å±•ç”Ÿäº§ï¼Œå¹¶ä¸ç¡®å®šï¼Œæ˜¯å¦ä¼šæ”¹å–„å¤šæ•°äººçš„ç”Ÿæ´»åˆ™æ›´ä¸ç¡®å®šã€‚æˆ‘ä»¬æ²¡æœ‰ä»»ä½•ç†ç”±è®¤ä¸ºï¼Œäº§æƒæ˜æ™°åŠ è‡ªç”±å¸‚åœºç»æµä¸€å®šä¼šå‘å±•ç”Ÿäº§åŠ›ï¼Œæä¾›æ›´å¤šç‰©ç¾ä»·å»‰çš„äº§å“ã€‚</p><p>å¯¹è‹è”è¿™æ ·çš„å‰ç¤¾ä¼šä¸»ä¹‰å›½å®¶æ¥è¯´ï¼Œå®Œå…¨å¸‚åœºåŒ–å’Œäº§æƒç§æœ‰åŒ–ï¼ˆæˆ–è€…è¯´äº§æƒæ˜æ™°åŒ–ï¼‰çš„ç»“æœï¼Œå”¯ä¸€èƒ½ç¡®å®šçš„å°±æ˜¯ç§äººäº§æƒè¿…é€Ÿè†¨èƒ€ï¼Œå‡ºç°ä¸€æ‰¹äººé€ å¯¡å¤´ï¼Œå…¶ä½™çš„å¤šæ•°äººåˆ™æ²¦ä¸ºè¿™äº›å¯¡å¤´çš„å¥´éš¶ã€‚</p><p>ç¨³æ‹¿ç»æµå­¦è¿½æ±‚å¸•ç´¯æ‰˜æœ€ä¼˜ï¼Œè®¤ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹å„ç§èµ„æºå¾—åˆ°æœ€æœ‰æ•ˆåœ°åˆ©ç”¨ï¼Œç´§ç¼ºèµ„æºè·å¾—æœ€å¤§ä»·å€¼ã€‚ç¨³æ‹¿ç»æµå­¦è®¤ä¸ºï¼Œè‡ªç”±çš„å¸‚åœºï¼Œæœ€ç»ˆä¼šè¾¾åˆ°å¸•ç´¯æ‰˜æœ€ä¼˜ï¼šå°±æ˜¯ä¸å¯èƒ½å†æ”¹å–„æŸäº›äººçš„å¢ƒå†µï¼Œè€Œä¸ä½¿ä»»ä½•å…¶ä»–äººå—æŸã€‚åœ¨å¸‚åœºä¸­ï¼Œç¤¾ä¼šçš„å„ç±»äººç¾¤åœ¨ä¸æ–­è¿½æ±‚è‡ªèº«åˆ©ç›Šæœ€å¤§åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿æ•´ä¸ªç¤¾ä¼šçš„ç»æµèµ„æºå¾—åˆ°æœ€åˆç†çš„é…ç½®ã€‚</p><p>è‡ªç”±å¸‚åœºä¼šå¯¼è‡´å¸•ç´¯æ‰˜æœ€ä¼˜ï¼Œè¿™æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚ä½†æ˜¯è¿™ç§å¸•ç´¯æ‰˜æœ€ä¼˜ï¼Œå´ä¸æ˜¯å¤šæ•°äººä¹‹ç¦â€”æ—¢ä¸æ˜¯å¢ç‘Ÿä¹‹ç¦ï¼Œä¹Ÿä¸æ˜¯ç¨³æ‹¿ä¹‹ç¦ã€‚è‡ªç”±çš„å¸‚åœºæœ€ç»ˆä¼šé€ æˆè´¢äº§çš„é«˜åº¦é›†ä¸­ï¼Œæ‹¥æœ‰è¿™äº›äº§çš„ç¨³æ‹¿å¯¹ç¤¾ä¼šæ€»äº§å“æœ‰æå¤§çš„åˆ†é…æƒã€‚æ•°é‡ä¼—å¤šçš„å¢ç‘Ÿï¼Œå´åªæœ‰æå…¶æœ‰é™çš„åˆ†é…æƒã€‚æ‰€ä»¥ï¼Œ<strong>æ¯æ¬¡å¤©ä¸‹å¤§ä¹±ä»¥å‰ï¼Œç¤¾ä¼šéƒ½å¤„äºæˆ–æ¥è¿‘å¸•æš´æ‰˜æœ€ä¼˜çš„çŠ¶æ€</strong>ï¼šä¸ä¼¤å®³åœ°ä¸»çš„åˆ©ç›Šï¼Œå†œæ°‘å°±æ— æ³•æ”¹ç€è‡ªå·±çš„ç”Ÿæ´»ï¼Œå°±è¦æ­»äºé¥¥å¯’äº¤è¿«ï¼Œè¿™æ—¶å†œæ°‘å°±ä¸å†å°Šé‡å¸‚åœºäº¤æ˜“è§„åˆ™ï¼Œé‡‡ç”¨æš´åŠ›æ¨ç¿»äº§çš„æƒå¨ã€‚</p><h2 id="äºšå½“æ–¯å¯†-ç§‘æ–¯"><a href="#äºšå½“æ–¯å¯†-ç§‘æ–¯" class="headerlink" title="äºšå½“æ–¯å¯† &amp; ç§‘æ–¯"></a>äºšå½“æ–¯å¯† &amp; ç§‘æ–¯</h2><p>äºšå½“.æ–¯å¯†æå‡ºï¼Œä¸ªäººæ»¡è¶³ç§æ¬²çš„æ´»åŠ¨å°†ä¿ƒè¿›ç¤¾ä¼šç¦åˆ©ï¼Œåªè¦è‡ªç”±æ”¾ä»»ï¼Œå¸‚åœºçš„çœ‹ä¸è§çš„æ‰‹å‘æŒ¥ä½œç”¨ï¼Œæœ€ç»ˆå°±å°†å®ç°å…¨ç¤¾ä¼šçš„å¯Œè¶³ã€‚ç§‘æ–¯æå‡ºåªè¦äº§æƒæ˜æ™°ï¼ŒæŠŠä¸€åˆ‡äº¤ç»™å¸‚åœºä¸­çœ‹ä¸è§çš„æ‰‹æ¥å‘æŒ¥ä½œç”¨ï¼›ç„¶åå°±èƒ½å»ºç«‹å®‰å®ç¥¥å’Œçš„ç¤¾ä¼šï¼Œä¸€åˆ‡éƒ½ä¼šä¸‡äº‹å¤§å‰ã€‚<br>åœ¨æ–¯å¯†çš„æ—¶ä»£ï¼Œæ­£æ˜¯å¤§é¥¼è¿…çŒ›å˜å¤§çš„æ—¶ä»£ã€‚é‚£æ—¶èµ„æœ¬ä¸»ä¹‰åˆšåˆšç™»åœºä¸ä¹…ï¼Œæ¯ä¸€ä¸ªèµ„æœ¬å®¶çš„èµ„æœ¬é‡éƒ½å¾ˆå°ï¼Œç¤¾ä¼šä¸­è¿˜æœ‰å¤§é‡å°å»ºæ®‹ä½™ã€‚èµ„æœ¬ä¸»ä¹‰å¤„äºè‡ªç”±ç«Ÿäº‰æ—¶æœŸï¼Œæ­£åœ¨ç»å†ç¬¬ä¸€æ¬¡äº§ä¸šé©å‘½ï¼Œä»æ‰‹å·¥ä½œåŠå‘å¤§å·¥å‚è¿‡æ¸¡ï¼ŒåŠ³åŠ¨è€…è¿˜æœ‰å½“å°è€æ¿æˆ–è€…å½“é›‡ç”¨å·¥äººçš„é¸æ“‡ã€‚é‚£æ—¶å¯¹äº§æ¥è¯´æœ€æœ‰æ•ˆç‡çš„è‡ªæˆ‘å¢å€¼çš„æ‰‹æ®µæ˜¯å‘å±•ç”Ÿäº§åŠ›ï¼Œèµ„æœ¬ä¸»ä¹‰ç›¸å¯¹å°å»ºæ®‹ä½™æ¥è¯´æå¤§åœ°æ¨åŠ¨äº†ç”Ÿäº§åŠ›å‘å±•ï¼Œæ‰€ä»¥è¿™æ ·è¯´å¹¶ä¸ä¸ºè¿‡ã€‚ç»è¿‡200å¤šå¹´ä»¥åï¼Œåˆ°ä»Šå¤©è¿˜è¿™æ ·è¯´ï¼Œé‚£å°±æ˜¯å½»å¤´å½»å°¾çš„èƒ¡è¯´äº†ã€‚</p><p>ç¨³æ‹¿ç»æµå­¦æå‡ºåªè¦äº¤æ˜“å°±èƒ½æ”¹å–„å…¨ç¤¾ä¼šçš„ç¦åˆ©ã€‚å¢ç‘Ÿç»æµå­¦è®¤ä¸ºæ”¹å–„ç¦åˆ©çš„è¿‡ç¨‹å¤æ‚å¾—å¤šã€‚ä»·å€¼æ¥è‡ªç”Ÿäº§åŠ³åŠ¨ï¼Œå¸‚åœºå¹¶ä¸åˆ›é€ ä»·å€¼ã€‚ä¸ªäººä¹Ÿè®¸å¯ä»¥é€šè¿‡ç‚’æˆ¿å­ç‚’åœ°çš®è·å¾—æå¤§çš„æ”¶ç›Šï¼Œä½†æ˜¯ç¤¾ä¼šæ€»ä½“ç”Ÿæ´»ä¸ä¼šæ”¹å–„ï¼Œå› ä¸ºæ€»æ¶ˆè´¹å“çš„é‡ï¼Œæ— è®ºæ˜¯äº§é‡ï¼Œè¿˜æ˜¯é”€å”®é‡éƒ½å¹¶æ²¡å¢åŠ ã€‚</p><p>å¯èƒ½å­˜åœ¨å¤§é¥¼æ•´ä½“èç¼©ï¼Œå¤§å®¶åƒå¾—è¶Šæ¥è¶Šå°‘ï¼ŒæŸäº›ä¸ªä½“å´åƒå¾—è¶Šæ¥è¶Šå¤šçš„æƒ…å†µã€‚</p><p>èµ„æœ¬è®ºæƒ³è¯´æ˜çš„äº‹æƒ…ä¹‹ä¸€ï¼šå·¥äººåˆ›é€ çš„å‰©ä½™ä»·å€¼è¶Šå¤šï¼Œèµ„æœ¬å®¶çš„èµ„äº§è¶Šå¤šï¼Œå·¥äººä¸èµ„æœ¬å®¶ä¹‹é—´å·®è·ä¸æ–­æ‹‰å¤§ï¼Œæœ€ç»ˆæˆä¸ºèµ„æœ¬çš„å¥´éš¶ï¼šæ­»åŠ³åŠ¨ï¼ˆå·¥äººä»¥å‰åˆ›é€ çš„å‰©ä½™ä»·å€¼ï¼‰ç‰¢ç‰¢æŠ“ä½æ´»åŠ³åŠ¨ï¼ˆå·¥äººï¼‰ã€‚</p><p>äº§æ˜¯ä»€ä¹ˆï¼š<strong>äº§æ˜¯ç”¨äºè·å¾—å‰©ä½™ä»·å€¼ä¾æ®çš„ç‰©åŒ–çš„åª’ä»‹ã€‚äººç±»ç¤¾ä¼šæ€»äº§å“æ˜¯å—å¤§é¥¼ï¼Œäº§æ˜¯ç¨³æ‹¿ç”¨æ¥åˆ‡å¤§é¥¼çš„åˆ€ã€‚</strong></p><p>åœŸåœ°ä»·æ ¼çš„æ”€å‡ï¼Œä¸æ˜¯åœŸåœ°è‡ªå·±äº§ç”Ÿä»·å€¼ï¼Œè€Œæ˜¯åœŸåœ°ä¸Šäº§ä¸šèµ„æœ¬ä¸æ–­å£®å¤§ï¼Œåœ°ä¸»è¦æ±‚å…¶æ”¯ä»˜çš„è´¡ç¨è¶Šæ¥è¶Šå¤šã€‚å¦‚æœåœŸåœ°ä¸Šçš„äº§ä¸šè§æ¡ï¼ŒåœŸåœ°ä»·æ ¼å¿…ç„¶æš´è·Œã€‚</p><p>ä¾é åœŸåœ°è·å¾—å‰©ä½™ä»·å€¼ï¼Œæ˜¯å¯¹èµ„æœ¬ä¸»ä¹‰çš„é˜»åŠ›è€Œä¸æ˜¯åŠ¨åŠ›ã€‚åœŸåœ°æ‰€æœ‰æƒé«˜åº¦é›†ä¸­ï¼Œäº§ä¸šèµ„æœ¬å®¶è·å¾—çš„åˆ©æ¶¦å¤ªè–„ï¼Œä»–ä»¬å¾ˆéš¾æœ‰è¶³å¤Ÿçš„å‰©ä½™ä»·å€¼æ‰©å¤§å†ç”Ÿäº§ã€‚æ­¤å¤–ï¼ŒåœŸåœ°å„æ–­ä¼šé€ æˆåœŸåœ°åˆ©æ¶¦é«˜äºç¤¾ä¼šå¹³å‡åˆ©æ¶¦ï¼Œèµ„æœ¬å®¶çš„å‰©ä½™èµ„æœ¬å¿…ç„¶ä¼šé€‰æ‹©æŠ•æœºåœŸåœ°ï¼Œè€Œä¸æ˜¯æŠ•èµ„äºåŸæ–™æˆ–è®¾å¤‡è¿›è¡Œæ‰©å¤§å†ç”Ÿäº§ã€‚å¼•ç”³ä¸€æ­¥ï¼Œå¦‚æœåœŸåœ°æˆä¸ºèµ„æœ¬çš„ä¸»ä½“ï¼Œé‚£ä¹ˆç¤¾ä¼šå¿…ç„¶åœæ»ä¸å‰ï¼Œç”šè‡³å€’é€€ã€‚å†å²ä¸Šï¼ŒåœŸåœ°æ‰€æœ‰æƒé«˜åº¦é›†ä¸­çš„åœ°åŒºå¾ˆéš¾è¯ç”Ÿèµ„æœ¬ä¸»ä¹‰ã€‚</p><h1 id="åˆ†é…"><a href="#åˆ†é…" class="headerlink" title="åˆ†é…"></a>åˆ†é…</h1><p>ç»å¤§å¤šæ•°çš„äº¤æ˜“ï¼Œä¸è¿‡æ˜¯ä»ç”²è´¦æˆ·è½¬ç§»åˆ°ä¹™è´¦æˆ·ã€‚å¦‚æœæˆ‘ä»¬æŠŠé‡‘èæœºæ„çœ‹ä¸ºä¸€ä¸ªæ•´ä½“çš„è¯ï¼Œå°±ä¼šå‘ç°å‡ ä¹æ‰€æœ‰çš„è´§å¸éƒ½åœ¨é‡‘èæœºæ„çš„æ‰‹é‡Œã€‚</p><p>èµ„æœ¬ä¸»ä¹‰ä¸–ç•Œçš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œå°±æ˜¯<strong>å¼ºè€…æ’å¼ºï¼Œè¿™ä¸ä»…ä»…è¡¨ç°åœ¨è·å¾—åˆ©æ¶¦çš„æ—¶å€™å¼ºè€…æœ‰æƒå…ˆäº«ç”¨å¤§é¥¼ï¼Œä¹Ÿè¡¨ç°åœ¨é‡åˆ°å±æœºçš„æ—¶å€™å¼ºè€…ä»˜å‡ºçš„ä»£ä»·æ›´å°‘</strong>ã€‚</p><p>å›½å®¶æ˜¯ç»æµä¸Šå ç»Ÿæ²»åœ°ä½çš„é˜¶çº§è¿›è¡Œé˜¶çº§ç»Ÿæ²»çš„æ”¿æ²»æƒåŠ›æœºæ„ã€‚æ˜¯ä¸€ä¸ªæˆé•¿äºç¤¾ä¼šä¹‹ä¸­è€Œåˆå‡Œé©¾äºç¤¾ä¼šä¹‹ä¸Šçš„ã€ä»¥æš´åŠ›æˆ–åˆæ³•æ€§ä¸ºåŸºç¡€çš„ã€å¸¦æœ‰ç›¸å½“æŠ½è±¡æ€§çš„æƒåŠ›æœºæ„ã€‚å›½å®¶æœ‰é˜¶çº§æ€§ï¼Œå›½å®¶ç”±ç»æµä¸Šå ä¼˜åŠ¿åœ°ä½çš„é˜¶çº§æ§åˆ¶ã€‚å›½å®¶æœ‰æš´åŠ›æ€§ï¼Œè€Œä¸”æ˜¯æœ€ç»ˆçš„æš´åŠ›ã€‚å›½å®¶çš„å­˜åœ¨æ˜¯ä¸ºäº†ç»´æŠ¤ç»Ÿæ²»é˜¶çº§çš„ç»æµåˆ©ç›Šã€‚å›½å®¶æ˜¯ä¸€ä¸ªé˜¶çº§å‹è¿«å¦ä¸€ä¸ªé˜¶çº§çš„æœºå™¨ï¼Œæ˜¯ä½¿ä¸€åˆ‡è¢«æ”¯é…çš„é˜¶çº§å—ä¸€ä¸ªé˜¶çº§æ§åˆ¶çš„æœºå™¨ã€‚</p><p>ç”±äºæš´åŠ›æ˜¯å”¯ä¸€èƒ½å¯¹æŠ—èµ„æœ¬çš„è¦ç´ ï¼Œè€Œä»£è¡¨å›½å®¶è¡Œä½¿æš´åŠ›çš„å®˜åƒšå¹¶ä¸æ€»æ˜¯é å¾—ä½çš„ã€‚å¯¹èµ„æœ¬æ¥è¯´ï¼Œæš´åŠ›çš„å¿ è¯šåº¦æ˜¯å€¼å¾—æ€€ç–‘çš„ã€‚æ‰€ä»¥ï¼Œ<strong>èµ„äº§é˜¶çº§æˆä¸ºç»Ÿæ²»é˜¶çº§ä»¥åï¼Œä¸€ç›´è¯•å›¾æŠŠå›½å®¶çš„ä½œç”¨å±€é™åœ¨æœ€å°çš„èŒƒå›´</strong>ã€‚å¯¹å†…ä¿è¯ç¤¾ä¼šæ²»å®‰ï¼Œå¯¹å¤–æŠµå¾¡å¤–æ•Œäººä¾µï¼Œæ˜¯èµ„æœ¬ä¸»ä¹‰å›½å®¶çš„ä¸»è¦ä»»åŠ¡ã€‚è‡³äºç»´æŠ¤ç¤¾ä¼šçš„å…¬å¹³ï¼Œæ‰¶åŠ©å¼±å°ï¼Œæ˜¯èµ„æœ¬å®¶æœ€å¿Œè®³çš„äº‹æƒ…ã€‚</p><p>å¦‚æœæ‰€æœ‰çš„åŠ³åŠ¨è€…éƒ½å»å¤§å­¦æ·±é€ ï¼Œæœ€ç»ˆçš„ç»“æœå°†æ˜¯å¤§å­¦æ·±é€ å¯¹æé«˜å·¥èµ„æ”¶å…¥æ°´å¹³çš„ä½œç”¨ç›®ç›Šä¸‹é™ã€‚</p><h1 id="äº§é”€è¿‡ç¨‹"><a href="#äº§é”€è¿‡ç¨‹" class="headerlink" title="äº§é”€è¿‡ç¨‹"></a>äº§é”€è¿‡ç¨‹</h1><p>æ¶ˆè´¹ä¸ç”Ÿäº§æ˜¯å¯¹ç«‹ç»Ÿä¸€çš„ï¼Œæ²¡æœ‰æ¶ˆè´¹ï¼Œå°±ä¸ä¼šæœ‰ç”Ÿäº§ã€‚æˆ‘ä»¬æ— æ³•æƒ³è±¡ä¸€ä¸ªç¤¾ä¼šå¼€é‡‡çŸ¿çŸ³ï¼Œåˆ¶é€ æœºå™¨ï¼Œæœ€ç»ˆçš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†å¼€é‡‡æ›´å¤šçš„çŸ¿çŸ³å’Œåˆ¶é€ æ›´å¤šçš„æœºå™¨ã€‚ç”Ÿäº§çš„å„ç§äº§å“æœ€ç»ˆéƒ½ä¼šè¢«æ¶ˆè´¹ã€‚</p><p>å¸Œæœ›æ¯å½“ç¤¾ä¼šæ€»éœ€æ±‚ä¸è¶³çš„æ—¶å€™ï¼Œå°±èƒ½å‡ºç°æ–°ä¸€è½®æŠ€æœ¯é©æ–°å¯¼è‡´æŠ•èµ„é«˜æ½®ï¼Œè¿›è€Œæ¶ˆåŒ–æ‰å¤šä½™äº§èƒ½ï¼Œé€™æ˜¯ä¸ç°å®çš„äº‹æƒ…ã€‚</p><p>èµ„æœ¬å®¶æŠ•èµ„çš„ç›®çš„æ˜¯è·å¾—æ›´å¤šçš„è´§å¸ã€‚å¦‚æœç¤¾ä¼š1000ä¸‡èµ„æœ¬çš„å¹³å‡åˆ©æ¶¦ç‡æ˜¯10%ï¼Œé‚£ä¹ˆèµ„æœ¬å®¶å¦‚æœæŠ•å…¥1000ä¸‡è´­ä¹°æ–°è®¾å¤‡ã€é›‡ç”¨æ–°å·¥äººï¼Œé‚£ä¹ˆä»–å¿…ç„¶è¦æ±‚ 100 ä¸‡çš„åˆ©æ¶¦ã€‚æ¢å¥è¯è¯´ï¼ŒåŸå…ˆç¤¾ä¼šå­˜åœ¨1000 ä¸‡çš„éœ€æ±‚ä¸è¶³çš„ç¼ºå£ï¼Œåœ¨èµ„æœ¬å®¶æŠ•èµ„ä»¥åï¼Œ1000ä¸‡çš„ç¼ºå£æ¶ˆå¤±äº†ã€‚ä½†æ˜¯ï¼Œåœ¨1000ä¸‡çš„æŠ•èµ„å®ç°äº§èƒ½ä»¥åï¼Œå°±å°†å‡ºç°1100 ä¸‡çš„éœ€æ±‚ç¼ºå£ã€‚æ‰€ä»¥ï¼Œé•¿æœŸé èµ„æœ¬å®¶æŠ•èµ„æ›¿ä»£å·¥äººéœ€æ±‚æ˜¯ä¸ç°å®çš„ã€‚</p><p>æ¶ˆè´¹ä¸è¶³ï¼Œå¹¶ä¸è§å¾—æ˜¯äº§ä¸šèµ„æœ¬å‰¥å‰Šå¾—å¤ªä¸¥é‡ï¼Œè€Œæ˜¯<strong>æ•´ä¸ªç¨³æ‹¿é›†å›¢</strong>å‰¥å‰Šå¾—å¤ªä¸¥é‡ã€‚<strong>å·¥äººè´¡ç»çš„å‰©ä½™ä»·å€¼ï¼Œåœ¨äº§ä¸šèµ„æœ¬ã€åœŸåœ°ï¼Œé‡‘èå’Œæš´åŠ›ä¹‹é—´åˆ†é…</strong>ã€‚</p><p>å¦‚æœå¤§æ‰¹ä¼ä¸šè´·æ¬¾å¿è¿˜èƒ½åŠ›éƒ½å‘ç”Ÿäº†å›é¢˜ï¼Œé‚£ä¹ˆé“¶è¡Œä¼šå‘ç°è‡ªå·±å‡ ä¹åœ¨ä¸€å¤œä¹‹é—´æˆä¸ºæœ€å¤§çš„å®ä¸šèµ„æœ¬å®¶ï¼Œå¤§æ‰¹çš„è´§å¸èµ„æœ¬æ”¶ä¸å›ä¾†ï¼Œå˜æˆæŠµæŠ¼ç‰©ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œè¿™äº›æŠµæŠ¼ç‰©æ²¡æœ‰äººè¦ï¼Œè€Œä¸”åœ¨ä¸æ–­è´¬å€¼ã€‚</p><p>è‡ªä»èµ„æœ¬ä¸»ä¹‰è¯ç”Ÿèµ·ï¼Œå°½ç®¡<strong>ç»å¯¹æ¶ˆè´¹æ°´å¹³ä¸æ–­ä¸Šå‡ï¼Œä½†æ˜¯ç›¸å¯¹æ¶ˆè´¹ä¸è¶³ä¸€ç›´æ²¡æœ‰å…‹æœ</strong>ã€‚</p><h1 id="å„æ–­"><a href="#å„æ–­" class="headerlink" title="å„æ–­"></a>å„æ–­</h1><p>æ¯æ¬¡ç»æµå±æœºéƒ½ä¼šæˆä¸ºå¤§èµ„æœ¬å± æ€å°èµ„æœ¬çš„è¿‡ç¨‹ã€‚å¹´æ¬¡å±æœºç»“æŸåæ‰€æœ‰çš„å¹¸å­˜è€…éƒ½æœ‰æœºä¼šå»‰ä»·è·å¾—é‡éš¾è€…çš„ä¸€åˆ‡ç”Ÿäº§èµ„æºï¼ŒåŒ…æ‹¬åŸæ–™ã€ç”Ÿäº§è®¾å¤‡ã€ç†Ÿç»ƒå·¥ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬ä»–ä»¬çš„å¸‚åœºã€‚</p><p>è‡ªç„¶ç•Œçš„è¿›åŒ–ï¼Œç‰©ç§ç”±å¤šæ ·å½’äºå¤šæ ·ï¼Œé¢äººç±»ç¤¾ä¼šèµ„æœ¬çš„è¿›åŒ–ï¼Œæœ€ç»ˆå½’äºâ€œä¸€â€ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å•å‘ã€æ¸…æ™°ã€ä¸å¯é€†çš„ã€‚</p><p>å¦‚æœæŠŠç¤¾ä¼šæ€»ç”Ÿäº§çœ‹æˆä¸€ä¸ªåºå¤§çš„ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›æœ€åŸºæœ¬çš„ç”Ÿäº§ã€ç”Ÿæ´»è¦ç´ åœ¨æå°‘æ•°ä¼ä¸šçš„æ§åˆ¶ä¹‹ä¸‹ï¼Œè¿™äº›ä¼ä¸šå°±æ˜¯çœŸæ­£çš„å¸ç‹èµ„æœ¬ã€‚ä»–ä»¬æ§åˆ¶äº¤å‰çš„è¡Œä¸šï¼Œå½±å“ã€æ“çºµæ•´ä½“ç»æµã€‚åœ¨ä»–ä»¬ä¹‹ä¸‹ï¼Œåˆ™æ˜¯ä¸€äº›è¯¸å€™ã€‚ä»–ä»¬å„æ–­æœ¬è¡Œä¸šï¼Œå½±å“ã€æ“çºµæŸä¸€ç§æˆ–å‡ ç§å•†å“ã€‚åœ¨è¿™äº›è¯¸ä¾¯ä¹‹ä¸‹ï¼Œåˆ™æ˜¯ä¸€äº›ä¸­ã€å°èµ„æœ¬ï¼Œä»–ä»¬ä¸ºä¸Šé¢å¸ç‹å’Œè¯¸å€™èµ„æœ¬æœåŠ¡ï¼Œæ˜¯â€œè‡£æ°‘èµ„æœ¬â€ã€‚å†å‘ä¸‹ï¼Œåˆ™æ˜¯ä¸€äº›é›¶æ•£çš„èµ„æœ¬ï¼Œä»–ä»¬æ•°é‡å¾ˆå¤šï¼Œå……æ»¡å¸ç‹å’Œè¯¸å€™è§¦è§’ä¸æ„¿è§¦åŠçš„â€œé¸¡è‚‹â€è¡Œä¸šï¼Œå½¼æ­¤ä¹‹é—´æ¿€çƒˆç«Ÿäº‰ã€‚è‡³äºåŠ³åŠ¨åŠ›ï¼Œåˆ™å¤„äºå®Œå…¨ä¸å…¥æµçš„çŠ¶æ€ã€‚</p><p>å„æ–­å¸å›½åˆ™æ˜¯åœ¨â€œæš´åŠ›å½’å…¬â€çš„åŸºç¡€ä¸Šï¼Œå®Œå…¨ä¾é è´¢äº§çš„åŠ›é‡ï¼Œåœ¨å¸‚åœºäº¤æ˜“ä¸­é€æ­¥å»ºç«‹èµ·æ¥çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„æš´åŠ›çš„â€œå½’å…¬â€ã€æ˜¯å½’èµ„äº§é˜¶çº§çš„â€œå…¬â€ï¼Œè€Œä¸æ˜¯å…¨æ°‘çš„â€œå…¬â€ï¼Œè¿™é‡Œçš„æš´åŠ›ï¼Œæ˜¯èµ„äº§é˜¶çº§çš„æš´åŠ›ï¼Œè¿™ç§æš´åŠ›ä¸åœ¨èµ„äº§é˜¶çº§å†…éƒ¨ä½¿ç”¨ï¼Œå´ä¸åäºé•‡å‹æ— äº§é˜¶çº§ã€‚</p><p>æš´åŠ›å’Œèµ„æœ¬èµ°åˆ°ä¸€èµ·ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼šèµ„æœ¬é¢†å¯¼æš´åŠ›ï¼›æš´åŠ›é¢†å¯¼èµ„æœ¬ã€‚ä¸¤ç§æ–¹å¼çš„èµ·æºä¸å„ä¸ªèµ„æœ¬ä¸»ä¹‰å›½å®¶å†å²è¿›ç¨‹æœ‰å…³ã€‚ä¸è®ºå“ªç§æ–¹å¼ï¼Œæœ€ç»ˆæ®Šé€”åŒå½’ï¼šæœ€ç»ˆéƒ½å°‡å»ºç«‹èµ„æœ¬ä¸æš´åŠ›ç»“åˆçš„å¯†ä¸¥é˜¶çº§ä¸“æ”¿ï¼Œè¿™ä¸ªä¸“æ”¿å°‡å¤„äºå®˜åƒšç»Ÿæ²»é›†å›¢çš„ç»Ÿæ²»ä¹‹ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è®¤ä¸ºå„æ–­å¤§ä¼ä¸šçš„ç®¡ç†å±‚ä¹Ÿæ˜¯ä¸€ç§å‡†å®˜åƒšé›†å›¢çš„è¯ã€‚</p><p>ç»Ÿæ²»é˜¶çº§äº‰å¤ºè¢«ç»Ÿæ²»é˜¶çº§çš„æ—¶å€™ï¼Œå½¼æ­¤æ˜¯ä»‡æ•Œã€‚ä¸€æ—¦ä¸€æ–¹å½»åº•è®¤è¾“ï¼Œç»Ÿæ²»é˜¶çº§å†…éƒ¨çš„é˜¶çº§æ„Ÿæƒ…åˆé‡æ–°æ²¹ç„¶è€Œç”Ÿã€‚</p><p>å¹¶ä¸æ˜¯è¡£é£Ÿè¶³ä¸è¶³çš„é—®é¢˜ï¼Œè€Œæ˜¯è¾¾åˆ°ä¸€ä¸ªç¤¾ä¼šé˜¶å±‚ä¹‹åï¼Œå¯¹æ™®é€šåŠ³åŠ¨è€…ç´§ç¼ºçš„ç”Ÿæ´»å¿…éœ€å“ï¼Œå¯¹æŸä¸ªé˜¶å±‚ä¸­äººå·²ç»ä¸å†æ˜¯ç´§ç¼ºçš„ï¼Œè€Œæ˜¯æå¤§ä¸°å¯Œçš„ã€‚å¯¹æ™®é€šäººæ¥è¯´å¾ˆçè´µçš„ä¸œè¥¿ï¼Œå¯¹è¿™ä¸ªå±‚æ¬¡ä¸Šçš„äººæ¥è¯´ï¼Œå·²ç»ä¸å€¼å¾—ä¸ºæ­¤å‘ç”Ÿå†²çªäº†ã€‚ä¸ºè¿™äº›åŸºæœ¬ç”Ÿæ´»å¿…éœ€å“å‘ç”Ÿå†²çªï¼Œå¯¹è¿™ä¸ªå±‚é¢çš„äººæ¥è¯´ï¼Œæ˜¯ä¸¢è„¸çš„äº‹æƒ…ã€‚è¿™ä¸ªå±‚æ¬¡çš„ç¨³æ‹¿ï¼Œåœ¨å½¼æ­¤è°¦é€Šç¤¼è²Œçš„æ°”æ°›ä¸­ï¼Œç“œåˆ†ç€ç¤¾ä¼šæ€»äº§å“çš„å¤§é¥¼ã€‚åº•å±‚ä¹‹é—´äº‰æ–—çš„è¶Šæ¿€çƒˆï¼Œé¡¶å±‚åƒåˆ°çš„å¤§é¥¼ä»½é¢è¶Šå¤šã€‚</p><p>å¦‚æœè¦ç»´æŠ¤äººç±»ç¤¾ä¼šç³»ç»Ÿçš„é•¿æœŸå­˜åœ¨å°±å¿…é¡»ä»ä¸¤ä¸ªæ–¹é¢ç€æ‰‹ï¼šç¬¬ä¸€ï¼Œä¸ºé¢†å¯¼é˜¶å±‚å¼•å…¥æ–°é²œè¡€æ¶²ï¼Œé¿å…å°èŒƒå›´é€šå©šé€ æˆçš„ç§ç¾¤é€€åŒ–ï¼›ç¬¬äºŒï¼Œç ´è§£è´¢å¯Œçš„å•å‘æµåŠ¨è¿‡ç¨‹ï¼Œé¿å…è´¢å¯Œè¿‡åº¦é›†ä¸­å¯¼è‡´ç¤¾ä¼šå†…éƒ¨å‹åŠ›æŒç»­ä¸Šå‡ã€‚</p><p>ç”±äºå¼ºè€…æ’å¼ºï¼Œä»»ä½•äººç±»ç¤¾ä¼šçš„ç»ˆæå½¢æ€ï¼Œä¸è®ºæ˜¯å®˜åƒšä¸»åŠ¨æˆ–è€…èµ„æœ¬å®¶ä¸»åŠ¨ï¼Œåœ°ä¸»ä¸»å¯¼æˆ–è€…å¥´éš¶ä¸»ä¸»å¯¼ï¼Œ<strong>å¦‚æœä¸å¹²æ¶‰çš„è¯ï¼Œéƒ½æ˜¯é€šå¾€å¥´å½¹ä¹‹è·¯</strong>ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img data-src=&quot;https://img14.360buyimg.com//n0/jfs/t1/176451/22/10402/376750/60a37fb7E23ecc0e3/aa8754102dc19767.jpg&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;æ­¤ä¹¦è®²ä»€ä¹ˆ&quot;&gt;</summary>
      
    
    
    
    
    <category term="è¯»ä¹¦" scheme="https://cuipengfei.me/tags/%E8%AF%BB%E4%B9%A6/"/>
    
    <category term="ç»æµ" scheme="https://cuipengfei.me/tags/%E7%BB%8F%E6%B5%8E/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€äº›å…³äºé“¶è¡Œçš„æ•£ç¢çŸ¥è¯†</title>
    <link href="https://cuipengfei.me/blog/2022/01/29/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E9%93%B6%E8%A1%8C%E7%9A%84%E6%95%A3%E7%A2%8E%E7%9F%A5%E8%AF%86/"/>
    <id>https://cuipengfei.me/blog/2022/01/29/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E9%93%B6%E8%A1%8C%E7%9A%84%E6%95%A3%E7%A2%8E%E7%9F%A5%E8%AF%86/</id>
    <published>2022-01-29T06:40:50.000Z</published>
    <updated>2022-01-29T06:40:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„"><a href="#é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„" class="headerlink" title="é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„"></a>é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„</h2><p>19th century nation state financial institution hierarchy </p><p><img data-src="/images/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E9%93%B6%E8%A1%8C%E7%9A%84%E6%95%A3%E7%A2%8E%E7%9F%A5%E8%AF%86/Untitled.png" alt="Untitled"></p><p>å¤®è¡Œçš„è´Ÿå€ºâ‰ˆé“¶è¡Œçš„èµ„äº§â‰ˆè´§å¸</p><p>é“¶è¡Œçš„è´Ÿå€ºâ‰ˆç§è¥éƒ¨é—¨çš„èµ„äº§â‰ˆå­˜æ¬¾</p><h2 id="äºé’±å…ˆäºå“ªå„¿ï¼Ÿ"><a href="#äºé’±å…ˆäºå“ªå„¿ï¼Ÿ" class="headerlink" title="äºé’±å…ˆäºå“ªå„¿ï¼Ÿ"></a>äºé’±å…ˆäºå“ªå„¿ï¼Ÿ</h2><p><img data-src="/images/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E9%93%B6%E8%A1%8C%E7%9A%84%E6%95%A3%E7%A2%8E%E7%9F%A5%E8%AF%86/Untitled1.png" alt="Untitled"></p><p>å‡è®¾å·¦ä¾§äºäº†5å—é’±ï¼Œä¸”å·¦å³å¿…é¡»å¹³ï¼Œåˆ™å³ä¾§ä¹Ÿå¿…é¡»å‡å°‘5ã€‚</p><p>ä¸èƒ½å…ˆå‡liabilityï¼Œå› ä¸ºå€ºæƒäººä¼˜å…ˆçº§è¾ƒé«˜ï¼Œåªèƒ½å…ˆå‡equityã€‚</p><h2 id="Liquidityå’ŒSolvency"><a href="#Liquidityå’ŒSolvency" class="headerlink" title="Liquidityå’ŒSolvency"></a>Liquidityå’ŒSolvency</h2><p><img data-src="/images/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E9%93%B6%E8%A1%8C%E7%9A%84%E6%95%A3%E7%A2%8E%E7%9F%A5%E8%AF%86/Untitled2.png" alt="Untitled"></p><p>cash reserve &gt; 0ï¼Œåˆ™å…·æœ‰ä¸€å®šçš„æµåŠ¨æ€§</p><p>net worth &gt; 0ï¼Œåˆ™å…·æœ‰ä¸€å®šçš„å¿ä»˜èƒ½åŠ›</p><p>æµåŠ¨æ€§å’Œå¿ä»˜èƒ½åŠ›çš„é«˜ä½åˆ™å–å†³äºåˆ°åº•æ¯”é›¶å¤§å¤šå°‘ã€‚</p><h2 id="èµ„é‡‘æ¥æº"><a href="#èµ„é‡‘æ¥æº" class="headerlink" title="èµ„é‡‘æ¥æº"></a>èµ„é‡‘æ¥æº</h2><p><img data-src="/images/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E9%93%B6%E8%A1%8C%E7%9A%84%E6%95%A3%E7%A2%8E%E7%9F%A5%E8%AF%86/Untitled3.png" alt="Untitled"></p><p>æ´»æœŸå­˜æ¬¾ (Demand deposit)</p><p>å­˜æ¬¾è¯ä¹¦&#x2F;å¤§é¢å­˜å• (Certificate of deposit)</p><p>é™„ä¹°å›åè®®ï¼ˆrepurchase agreementã€repoï¼Œä¹Ÿç§°ä¸ºé™„ä¹°å›åå®šã€é™„ä¹°å›äº¤æ˜“ï¼Œå›è´­åè®®ã€å–å‡ºå›è´­æˆ–æ­£å›è´­ï¼‰</p><p>å•†ä¸šç¥¨æ®ï¼ˆCommercial Paperï¼‰</p><p><strong>è´Ÿå€ºä¸šåŠ¡</strong>æ˜¯å•†ä¸šé“¶è¡Œå½¢æˆèµ„é‡‘æ¥æºçš„ä¸šåŠ¡</p><p><strong>å­˜æ¬¾</strong>æ˜¯é“¶è¡Œ<strong>å¯¹å­˜æ¬¾äººçš„è´Ÿå€º</strong>ï¼Œæ˜¯é“¶è¡Œæœ€<strong>ä¸»è¦çš„èµ„é‡‘æ¥æº</strong></p><h2 id="å››ç§é£é™©"><a href="#å››ç§é£é™©" class="headerlink" title="å››ç§é£é™©"></a>å››ç§é£é™©</h2><p>é“¶è¡Œçš„é£é™©ç§ç±»è¾ƒå¤šï¼Œæœ€ä¸»è¦çš„é£é™©æœ‰å››ç§ï¼š</p><p><strong>ä¿¡ç”¨é£é™©ã€å¸‚åœºé£é™©ã€æµåŠ¨æ€§é£é™©å’Œæ“ä½œé£é™©</strong> </p><p><strong>ä¿¡ç”¨é£é™©</strong>æ˜¯æŒ‡å€Ÿæ¬¾äººå› å„ç§åŸå› æœªèƒ½åŠæ—¶ã€è¶³é¢å¿è¿˜å€ºåŠ¡æˆ–é“¶è¡Œè´·æ¬¾è€Œè¿çº¦çš„å¯èƒ½æ€§ã€‚å‘ç”Ÿè¿çº¦æ—¶ï¼Œå€ºæƒäººæˆ–é“¶è¡Œå¿…å°†å› ä¸ºæœªèƒ½å¾—åˆ°é¢„æœŸçš„æ”¶ç›Šè€Œæ‰¿æ‹…è´¢åŠ¡ä¸Šçš„æŸå¤±ã€‚ </p><p><strong>å¸‚åœºé£é™©</strong>æ˜¯æŒ‡æœªæ¥å¸‚åœºä»·æ ¼ï¼ˆåˆ©ç‡ã€æ±‡ç‡ã€è‚¡ç¥¨ä»·æ ¼å’Œå•†å“ä»·æ ¼ï¼‰çš„ä¸ç¡®å®šæ€§å¯¹ä¼ä¸šå®ç°å…¶æ—¢å®šç›®æ ‡çš„å½±å“ </p><p><strong>æµåŠ¨æ€§é£é™©</strong>æ˜¯æŒ‡å› å¸‚åœºæˆäº¤é‡ä¸è¶³æˆ–ç¼ºä¹æ„¿æ„äº¤æ˜“çš„å¯¹æ‰‹ï¼Œå¯¼è‡´æœªèƒ½åœ¨ç†æƒ³çš„æ—¶ç‚¹å®Œæˆä¹°å–çš„é£é™©ï¼›æˆ–é“¶è¡Œæœ¬èº«æŒæ¡çš„æµåŠ¨èµ„äº§ä¸èƒ½æ»¡è¶³å³æ—¶æ”¯ä»˜åˆ°æœŸè´Ÿå€ºçš„éœ€è¦ï¼Œä»è€Œä½¿é“¶è¡Œä¸§å¤±æ¸…å¿èƒ½åŠ›å’Œé€ æˆæŸå¤±çš„å¯èƒ½æ€§ã€‚ æµåŠ¨æ€§é£é™©ï¼Œä¸€æ–¹é¢æ˜¯ä¸€ç§<strong>æœ¬åŸæ€§</strong>é£é™©ï¼Œæ˜¯ç”±äºæµåŠ¨æ€§ä¸è¶³é€ æˆçš„ï¼›å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯æœ€å¸¸è§çš„æƒ…å†µï¼Œæ˜¯å…¶ä»–å„ç±»é£é™©é•¿æœŸéšè—ã€ç§¯èšï¼Œæœ€åä»¥æµåŠ¨æ€§é£é™©çš„å½¢å¼çˆ†å‘å‡ºæ¥ã€‚ä»è¿™ç§æ„ä¹‰ä¸Šè®²ï¼ŒæµåŠ¨æ€§é£é™©æ˜¯ä¸€ç§<strong>æ´¾ç”Ÿæ€§</strong>é£é™©ï¼Œå³æµåŠ¨æ€§ä¸è¶³ï¼Œå¯èƒ½æ˜¯ç”±äºåˆ©ç‡é£é™©ã€ä¿¡ç”¨é£é™©ã€ç»è¥é£é™©ã€ç®¡ç†é£é™©ã€æ³•å¾‹é£é™©ã€å›½å®¶é£é™©ã€æ±‡ç‡é£é™©ç­‰é£é™©æºæ‰€é€ æˆçš„ï¼Œé“¶è¡Œæœ€ç»ˆé™·å…¥æµåŠ¨æ€§é£é™©ä¸­ä¸èƒ½è‡ªæ‹”ã€‚ </p><p><strong>æ“ä½œé£é™©</strong>çš„æ­£å¼å®šä¹‰æ˜¯ï¼šç”±äºå†…éƒ¨ç¨‹åºã€äººå‘˜å’Œç³»ç»Ÿçš„ä¸å®Œå¤‡æˆ–å¤±æ•ˆï¼Œæˆ–ç”±äºå¤–éƒ¨äº‹ä»¶é€ æˆæŸå¤±çš„é£é™©</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„&quot;&gt;&lt;a href=&quot;#é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„&quot;&gt;&lt;/a&gt;é‡‘æœ¬ä½æ—¶æœŸé‡‘èæœºæ„çš„å±‚çº§ç»“æ„&lt;/h2&gt;&lt;p&gt;19th century nation st</summary>
      
    
    
    
    
    <category term="é“¶è¡Œ" scheme="https://cuipengfei.me/tags/%E9%93%B6%E8%A1%8C/"/>
    
  </entry>
  
  <entry>
    <title>TWåå››è½½</title>
    <link href="https://cuipengfei.me/blog/2021/12/17/tw14years/"/>
    <id>https://cuipengfei.me/blog/2021/12/17/tw14years/</id>
    <published>2021-12-17T06:40:50.000Z</published>
    <updated>2021-12-17T06:40:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>2007å¹´ï¼Œæˆ‘åœ¨è¯»å¤§äºŒã€‚</p><p>å½“æ—¶ç»å¸¸ä¼šå»å­¦æ ¡é£Ÿå ‚å¯¹é¢çš„æŠ¥åˆŠäº­ä¹°æ‚å¿—ï¼Œä¸€æœ¬ï¼Œæ˜¯ã€Šå¤§ä¼—è½¯ä»¶ã€‹ï¼Œå¦ä¸€æœ¬ï¼Œæ˜¯ã€Šç¨‹åºå‘˜ã€‹ã€‚</p><img data-src="/images/14years/cxy-2007-06.png"/><p>å°è±¡ä¸­å½“æ—¶ã€Šç¨‹åºå‘˜ã€‹ä¸Šçš„å¤šæ•°æ–‡ç« å……æ»¡äº†æˆ‘æ²¡å¬è¿‡çš„å„ç§ç¼©å†™ä¸ç¨€å¥‡å¤æ€ªçš„åè¯ï¼Œæ–‡é£æ˜¯è€æˆæŒé‡ï¼Œæˆ‘çœ‹ä¸æ‡‚ï¼Œä½†å¾ˆæ˜¯ä½©æœã€‚</p><p>è€Œè¿™å½“ä¸­å¶å°”ä¼šå¤¹æ‚ç€å‡ ç¯‡æ–‡é£çŠ€åˆ©ï¼Œç¥ç¨å¤©ä¸‹çš„æ–‡ç« ï¼ŒåŠ ä¸Šä½œè€…å¤´åƒå¾ˆæ˜¯éä¸»æµï¼Œæˆ‘è™½ä¹Ÿçœ‹ä¸æ‡‚ï¼Œä½†å°è±¡æ·±åˆ»ã€‚<br>è¿™äº›çŠ€åˆ©æ–‡ç« çš„ä½œè€…ï¼Œä¾¿ç»å¸¸å† æœ‰TWçš„å¤´è¡”ã€‚</p><p>2012å¹´ï¼Œæˆ‘åœ¨ä¸€å®¶å°è½¯ä»¶å…¬å¸ä¸Šäº†ä¸¤å¹´çš„ç­ã€‚<br>å½“æ—¶æˆ‘ä»¬æ¯åŠå¹´å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ï¼Œæ¯åˆ°è¦å‘å¸ƒå‰å¤•ï¼Œç¨‹åºå‘˜ä¾¿éƒ½åœæ­¢å†™ä»£ç ï¼Œå»åšå›å½’æµ‹è¯•ã€‚</p><p>ç»å¸¸ä¼šå‘ç°åŠå¹´å‰å‘å¸ƒæ—¶è¿˜æ˜¯okçš„åŠŸèƒ½ï¼Œåœ¨è¿™å…­ä¸ªæœˆé‡Œè¢«æ”¹é”™äº†ï¼Œå¾—ä¿®ã€‚<br>æˆ‘éšéšè§‰å¾—è¿™ä¸å¯¹åŠ²ï¼Œå†å…­ä¸ªæœˆä¹‹åè¿˜æ˜¯ä¼šå‡ºç°ç±»ä¼¼çš„çŠ¶å†µï¼Œè€æ˜¯é å¤§å®¶åœå·¥å»åšå›å½’æµ‹è¯•ä¸æ˜¯ä¸ªåŠæ³•ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šâ€œç‹—ç†Šæ°æ£’å­ï¼Œæ°ä¸€æ ¹ä¸¢ä¸€æ ¹â€ã€‚</p><img data-src="/images/14years/gxbbz.png"/><p>æ°åœ¨æ­¤æ—¶ï¼Œé‚®ç®±æ”¶åˆ°äº†æ¥è‡ªTWçš„é¢è¯•é‚€è¯·ã€‚<br>åˆ°äº†è¿™ä¼šï¼Œæˆ‘å…¶å®å·²ç»è®°ä¸æ¸…æ¥šå¤§å­¦æ—¶çœ‹çš„ã€Šç¨‹åºå‘˜ã€‹æ‚å¿—ä¸Šæœ‰ä»€ä¹ˆå†…å®¹äº†ï¼Œä¸è¿‡TWè¿™ä¸ªåå­—è¿˜æ˜¯æœ‰äº›å°è±¡ã€‚<br>å†å»ä¸€æŸ¥ï¼Œè¿™å®¶å…¬å¸è¿˜å‡ºè¿‡ä¸å°‘ä¹¦ï¼Œæ¨å´‡åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ³¨é‡è½¯ä»¶è´¨é‡ï¼Œè€Œè¿™äº›æ­£æ˜¯æˆ‘å½“æ—¶æ‰€åœ¨çš„å°å…¬å¸æ‰€ç¼ºä¹çš„ã€‚</p><p>äºæ˜¯ä¾¿æ¥å—äº†é¢è¯•é‚€è¯·ï¼Œåšäº†Mars Roverçš„é¢˜ç›®ï¼Œå»å‚åŠ äº†åŠå…¬å®¤é¢è¯•ã€‚<br>é¢è¯•æ—¶è¿˜è§åˆ°äº†ã€Šè½¯ä»¶è®¾è®¡ç²¾è¦ä¸æ¨¡å¼ã€‹çš„ä½œè€…ã€‚<br>ä¹‹åä¾¿åŠ å…¥TWæˆä¸ºäº†ä¸€å21ä¸–çºªçš„ç¨‹åºå‘˜ã€‚</p><p>ä»ç¬¬ä¸€æ¬¡çœ‹åˆ°ã€Šç¨‹åºå‘˜ã€‹æ‚å¿—ä¸Šçš„æ–‡ç« åˆ°çœ¼ä¸‹çš„2021å¹´ï¼Œæœ‰14å¹´äº†ã€‚<br>14å¹´æŒºé•¿çš„ï¼Œä»ä¸Šå°å­¦åˆ°é«˜ä¸­æ¯•ä¸šï¼Œä¹Ÿæ‰12å¹´ã€‚</p><p>æ—¶é—´è·¨åº¦é•¿ï¼Œå˜åŒ–ä¹Ÿå°±å¤šï¼Œä¸è¿‡å½“æ—¶æŒæœ‰çš„å¾ˆæœ´ç´ çš„è§‚å¿µä¸å¤ªå®¹æ˜“å˜ï¼š<br>è½¯ä»¶è‡³å°‘è¦åšå¯¹ï¼Œä¸€æ—¦åšå¯¹äº†ä¹‹åï¼Œè¦é¿å…â€œç‹—ç†Šæ°æ£’å­ï¼Œæ°ä¸€æ ¹ä¸¢ä¸€æ ¹â€ã€‚</p><p>å°±å¥½åƒä¸€ä¸ªæœ¨åŒ å¸ˆå‚…ï¼Œç”¨äº†é”›å‡¿æ–§é”¯ï¼Œè´¹åŠ›åšæˆäº†æ¿å‡³ï¼Œè‚¯å®šæ˜¯ä¸å¸Œæœ›è¿™ä¸ªå‡³å­ç»™äººåäº†ä¸¤å¤©ä¹‹åå°±å¼€å§‹â€œå˜å±å±â€ã€‚</p><p>ç åŒ å¸ˆå‚…ï¼Œäº¦å½“å¦‚æ˜¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;2007å¹´ï¼Œæˆ‘åœ¨è¯»å¤§äºŒã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶ç»å¸¸ä¼šå»å­¦æ ¡é£Ÿå ‚å¯¹é¢çš„æŠ¥åˆŠäº­ä¹°æ‚å¿—ï¼Œä¸€æœ¬ï¼Œæ˜¯ã€Šå¤§ä¼—è½¯ä»¶ã€‹ï¼Œå¦ä¸€æœ¬ï¼Œæ˜¯ã€Šç¨‹åºå‘˜ã€‹ã€‚&lt;/p&gt;
&lt;img data-src=&quot;/images/14years/cxy-2007-06.png&quot;/&gt;

&lt;p&gt;å°è±¡ä¸­å½“æ—¶ã€Šç¨‹åºå‘˜ã€‹ä¸Šçš„å¤šæ•°æ–‡ç« </summary>
      
    
    
    
    
    <category term="TW" scheme="https://cuipengfei.me/tags/TW/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šå¤§ç›®æ ‡ã€‹ä¸€ä¹¦ä¸­çš„æœ‰è¶£è§‚ç‚¹</title>
    <link href="https://cuipengfei.me/blog/2020/07/05/%E5%A4%A7%E7%9B%AE%E6%A0%87/"/>
    <id>https://cuipengfei.me/blog/2020/07/05/%E5%A4%A7%E7%9B%AE%E6%A0%87/</id>
    <published>2020-07-05T04:23:28.000Z</published>
    <updated>2020-07-05T04:23:28.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h1><p>å·¥ä¸šåŒ–ã€ç°ä»£åŒ–ã€åŸå¸‚åŒ–ã€æ°‘ä¸»åŒ–ã€è‡ªç”±åŒ–ã€å¸‚åœºåŒ–ã€å…¨çƒåŒ–ï¼Œä¸ä¸€å®šè¦å§“â€œè¥¿ã€èµ„ã€åŸºâ€ã€‚</p><h1 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h1><p>äº”å¸¸çš„å¦å†³æƒæ˜¯å¯¹å¤§å›½æ¯ç­æ€§åŠ›é‡çš„æ‰¿è®¤ã€‚æ ¸æ­¦å™¨ï¼Œæ°¢å¼¹ï¼Œæ´²é™…å¯¼å¼¹ï¼Œæ ¸æ½œè‰‡ï¼Œå¤šå¼¹å¤´åˆ†å¯¼ã€‚</p><p>é€€ç¼©ä¸ä¼šè®©ç‹¼ç¾¤æ”¾å¼ƒä¾›ç»™ï¼Œé€ƒè·‘ä¸ä¼šè®©ç‹¼ç¾¤æ”¾å¼ƒè¿½æ•ï¼Œå€’ä¸‹ä¸ä¼šè®©ç‹¼ç¾¤æ”¾å¼ƒæ€æˆ®ã€‚</p><p>å¤§å›½æ²¡èµ„æ ¼æŠ•é™ã€‚</p><p>ç¾å›½å¯¹æ—¥æœ¬å¯ä»¥æ´å¼•ã€Šå…±åŒé˜²å«åå®šã€‹åªä¼šæ—¥æœ¬ç©ºå†›ã€‚éŸ©å›½ä¸‰å†›çš„æœ€é«˜æŒ‡æŒ¥æƒæœ¬æ¥å°±å½’ç¾å†›ã€‚</p><p>å†·æˆ˜çš„æœ¬è´¨æ˜¯3.5äº¿çš„è‹è”ä¸œæ¬§å·¥ä¸šäººå£å’Œæ¬§ç¾æ—¥6äº¿çš„å·¥ä¸šäººå£æŠ¢å…¨çƒçš„èµ„æºå’Œå¸‚åœºã€‚</p><h1 id="ç¬¬äºŒç« "><a href="#ç¬¬äºŒç« " class="headerlink" title="ç¬¬äºŒç« "></a>ç¬¬äºŒç« </h1><p>æŠŠäººå½“äººçœ‹æ˜¯å·¥ä¸šç¤¾ä¼šæ‰èƒ½åšåˆ°çš„äº‹ã€‚åŒ»ç–—å™¨å…·ï¼Œæ¶ˆæ¯’ä¸å†æ˜‚è´µï¼Œç®€å•é«˜æ•ˆã€‚<br>å½“ç‰©è´¨ä¸Šçš„å¯Œè¶³è®©ç¤¾ä¼šä¸å†éœ€è¦åˆç†åˆæ³•åœ°ç‰ºç‰²æ‰ä¸€äº›äººè€Œä¿è¯å¦ä¸€äº›äººçš„ç”Ÿå­˜æ—¶ï¼Œæ‰èƒ½è¿›å…¥æ–‡æ˜ã€‚</p><p>1962å¹´ï¼Œä¸­å›½ç²®é£Ÿæ€»äº§é‡1.6äº¿å¨ã€‚1978å¹´3äº¿å¨ã€‚ä¸æ˜¯é ç§¯ææ€§ã€‚è€Œæ˜¯é åŒ–è‚¥ã€‚<br>åŒ–è‚¥è®©å†œæ°‘æœ‰äº†ä½™ç²®å’Œé—²æš‡ï¼Œä»å†œä¸šä¸­è§£æ”¾å‡ºæ¥çš„ç”Ÿäº§åŠ›æŠ•å…¥å·¥ä¸šã€‚</p><p>å·¥ä¸šåŒ–ï¼šç”¨æœºå™¨é€ æœºå™¨ï¼Œç„¶åç”¨é€ å‡ºæ¥çš„æœºå™¨å»é€ åˆ«çš„ä¸œè¥¿ã€‚</p><p>ä¸–ç•Œä¸Šå‹¤ä¿­çš„ä¸æ­¢æœ‰ä¸­å›½äººï¼Œå‹¤ä¿­äº†å‡ åƒå¹´ä¹Ÿæ²¡æœ‰å˜çš„å¯Œè£•ã€‚å·¥ä¸šåŒ–æ‰èƒ½è®©å‹¤ä¿­å˜æˆèµ„æœ¬ã€‚</p><p>æé¸¿ç« å»æ‰¾â€œé€ å™¨ä¹‹å™¨â€ï¼Œæ˜¯æ‰¾é€ ç«å™¨çš„æœºå™¨ï¼Œè€Œä¸æ˜¯é€ æœºå™¨çš„æœºå™¨ã€‚</p><p>æœºå™¨ç”¨é’¢é“é€ çš„ï¼Œç”¨çš„æ˜¯ç…¤ç‚­æˆ–è€…ç…¤ç‚­ç”Ÿæˆçš„ç”µèƒ½ã€‚æ¬§ç›Ÿæ¥æºäºç…¤é’¢å…±åŒä½“ã€‚</p><h1 id="ç¬¬ä¸‰ç« "><a href="#ç¬¬ä¸‰ç« " class="headerlink" title="ç¬¬ä¸‰ç« "></a>ç¬¬ä¸‰ç« </h1><p>ç¾å›½â€œç»¿å¡æˆ˜å£«â€çš„é˜µäº¡ç‡æ¯”ç¾ç±å£«å…µé«˜å‡ºä¸€å€ã€‚</p><p>é’±å¹¶ä¸æ˜¯è´¢å¯Œï¼Œè¯´â€œæœ‰é’±â€å…¶å®æ„å‘³ç€â€œæœ‰è´§â€ã€‚</p><p>ç¾å…ƒä½œä¸ºç»“ç®—è´§å¸æ”¶å…¨çƒé“¸å¸ç¨ã€‚å„å›½è¶Šå°ï¼Œäº§ä¸šé“¾è¶Šåˆ†æ•£ï¼Œç¾å…ƒé“¸å¸ç¨æ”¶çš„è¶Šå¼€å¿ƒã€‚</p><p>ç»æµæ´»åŠ¨çš„æœ¬è´¨æ˜¯ç‰©è´¨ç”Ÿäº§ã€‚</p><p>æªæ†å­é‡Œé¢å‡ºçŸ³æ²¹ã€‚</p><h1 id="ç¬¬å››ç« "><a href="#ç¬¬å››ç« " class="headerlink" title="ç¬¬å››ç« "></a>ç¬¬å››ç« </h1><p>å·¥ä¸šä¸æ‰‹å·¥ä¸šçš„æœ€å¤§åŒºåˆ«ï¼šå·¥ä¸šå¯ä»¥å‡çº§ã€‚</p><p>è¥¿ç­ç‰™ï¼Œè‹±å›½ï¼Œç¾å›½ï¼Œä¸‰ä¸ªä¸–ç•Œæ€§çš„å¤§å¸å›½ã€‚<br>å…´èµ·çš„åŸå› æ˜¯å…ˆè¿›çš„ç”Ÿäº§æŠ€æœ¯ï¼Œå‘è¾¾çš„åˆ¶é€ ä¸šèƒ½åˆ›é€ è´¢å¯Œä¹Ÿæ”¯æŒäº†å¼ºå¤§çš„å†›é˜Ÿã€‚<br>ç„¶åä¸åŠ³è€Œè·ï¼Œåœæ»è¡°é€€ã€‚</p><h1 id="ç¬¬äº”ç« "><a href="#ç¬¬äº”ç« " class="headerlink" title="ç¬¬äº”ç« "></a>ç¬¬äº”ç« </h1><p>ä¸ä¹‹å‰çš„å¼ºå›½ç›¸æ¯”ï¼Œè‹è”çš„å·¥ä¸šåŒ–ä¸ä¾èµ–æ®–æ°‘åœ°çš„å¸‚åœºå’Œèµ„æºã€‚</p><p>é‡å·¥ä¸šæ˜¯æ ¸å¿ƒï¼Œè½»å·¥ä¸šé‡Šæ”¾é‡å·¥ä¸šåˆ¶é€ çš„ç”Ÿäº§èƒ½åŠ›ã€‚</p><p>è‹è”åˆ©ç”¨è¥¿æ–¹å‡ æ¬¡å±æœºï¼ŒæŠ„åº•æŠ€æœ¯ä¸è®¾å¤‡ã€‚</p><p>å·¥ä¸šåŒ–äººå£æ•°é‡å†³å®šäº†å·¥ä¸šç»æµçš„è§„æ¨¡ï¼Œä¹Ÿå’Œå·¥ä¸šä½“ç³»çš„å¤æ‚ç¨‹åº¦å’Œå…ˆè¿›ç¨‹åº¦å¯†åˆ‡ç›¸å…³ã€‚<br>ç‹¬ç«‹å·¥ä¸šä½“ç³»éœ€è¦çš„å·¥ä¸šåŒ–äººå£æ•°é‡æ˜¯åŸºæœ¬é…ä»¶æ•°é‡çš„5åˆ°10å€ã€‚<br>æ¬§æ´²èµ°å‘ä¸€ä½“åŒ–çš„åŸå› å°±åœ¨äºæ­¤ã€‚</p><p>è‹è”çš„å´©æºƒè¯´åˆ°åº•æ˜¯å› ä¸ºç¾å›½ç”¨è‡ªå·±çš„äººå£ä¼˜åŠ¿ç‡å…ˆå®Œæˆäº†äº§ä¸šå‡çº§ã€‚</p><p>åœ¨æˆ˜ç•¥å¯¹æŠ—ä¸­ï¼Œè¦æŒæ¡æ¯”å¯¹æ‰‹æ›´å¤šçš„å·¥ä¸šåŒ–äººå£ï¼Œè¦å‘ç›Ÿå‹è¾“å‡ºå·¥ä¸šåŒ–ç¤¾ä¼šï¼Œé€šè¿‡è¾“å‡ºå·¥ä¸šåŒ–ç¤¾ä¼šæ¥åˆ¶é€ ç›Ÿå‹ã€‚å¦åˆ™æ—©æ™šé‡åˆ°å·¥ä¸šå‡çº§çš„äººå£éšœç¢ã€‚</p><h1 id="ç¬¬å…­ç« "><a href="#ç¬¬å…­ç« " class="headerlink" title="ç¬¬å…­ç« "></a>ç¬¬å…­ç« </h1><p>ä¸€åˆ‡å¼ºæƒã€å¸å›½åœ¨å·¥ä¸šé©å‘½é¢å‰éƒ½æ˜¯è¿‡çœ¼äº‘çƒŸã€‚</p><p>ç»ˆç»“å¤§è‹±å¸å›½çš„æ˜¯ç¬¬äºŒæ¬¡å·¥ä¸šé©å‘½ã€‚</p><p>ä¸­å›½ä¸èƒ½é å‡ºå£æ¥é•¿æœŸæ”¯æŒæˆ‘ä»¬çš„å·¥ä¸šåŒ–è¿›ç¨‹äº†ã€‚</p><h1 id="ç¬¬ä¸ƒç« "><a href="#ç¬¬ä¸ƒç« " class="headerlink" title="ç¬¬ä¸ƒç« "></a>ç¬¬ä¸ƒç« </h1><p>æ²¡æœ‰äººä¼šæŠŠå¤ªç›‘å«åšç»…å£«ã€‚</p><p>ä¿æŒä¸æ–­çš„è¿›æ­¥æ‰èƒ½æœ‰é“ç†å¯ä»¥è®²ã€‚</p><p>è¾“å‡ºå·¥ä¸šåŒ–æ˜¯ä¸ªé•¿ä¹…çš„ä¹°å–ï¼Œæ¯”è¾“å‡ºæ¶ˆè´¹å“è¦é•¿ä¹…ã€‚</p><p>ç°åœ¨ä¸€ä¸ªåœ°å¸‚çº§çš„åœ°å‹˜åŠ›é‡æ¯”å·¥ä¸šåŒ–ä¹‹å‰å…¨å›½åˆé›†è¿˜å¤šã€‚</p><p>ä¹°åŠæ˜¯ç¬¬ä¸€éšœç¢ã€‚</p><p>è¦è¾“å‡ºå·¥ä¸šåŒ–ï¼Œè€Œä¸æ˜¯åƒæ®–æ°‘ä¸»ä¹‰é‚£æ ·æ‰“å‡»å½“åœ°å·¥ä¸šå‘å±•ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¼•å­&quot;&gt;&lt;a href=&quot;#å¼•å­&quot; class=&quot;headerlink&quot; title=&quot;å¼•å­&quot;&gt;&lt;/a&gt;å¼•å­&lt;/h1&gt;&lt;p&gt;å·¥ä¸šåŒ–ã€ç°ä»£åŒ–ã€åŸå¸‚åŒ–ã€æ°‘ä¸»åŒ–ã€è‡ªç”±åŒ–ã€å¸‚åœºåŒ–ã€å…¨çƒåŒ–ï¼Œä¸ä¸€å®šè¦å§“â€œè¥¿ã€èµ„ã€åŸºâ€ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ç¬¬ä¸€ç« &quot;&gt;&lt;a href=&quot;#ç¬¬</summary>
      
    
    
    
    
    <category term="å·¥ä¸šå…š" scheme="https://cuipengfei.me/tags/%E5%B7%A5%E4%B8%9A%E5%85%9A/"/>
    
  </entry>
  
  <entry>
    <title>è½¯ä»¶éœ€æ±‚è†¨èƒ€ç³»æ•°</title>
    <link href="https://cuipengfei.me/blog/2020/05/22/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E8%86%A8%E8%83%80/"/>
    <id>https://cuipengfei.me/blog/2020/05/22/%E8%BD%AF%E4%BB%B6%E9%9C%80%E6%B1%82%E8%86%A8%E8%83%80/</id>
    <published>2020-05-22T04:32:38.000Z</published>
    <updated>2020-05-22T04:32:38.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ³¡æ°´è†¨èƒ€çƒ"><a href="#æ³¡æ°´è†¨èƒ€çƒ" class="headerlink" title="æ³¡æ°´è†¨èƒ€çƒ"></a>æ³¡æ°´è†¨èƒ€çƒ</h1><img data-src="/images/éœ€æ±‚è†¨èƒ€/è†¨èƒ€çƒ.jpg" alt="drawing" width="500"/><p>è¿™æ˜¯ä¸€ç§å°ç©å…·ï¼Œå¹²ç‡¥æ—¶æ‹¿åœ¨æ‰‹é‡Œï¼Œå°å·§ç´§è‡´ã€‚</p><p>æ³¡åœ¨æ°´é‡Œï¼Œä¸€æ®µæ—¶é—´ä¹‹åï¼Œæµ‘åœ†é¥±æ»¡ï¼Œä¸€åªæ‰‹éƒ½æœªå¿…èƒ½æ§çš„ä½ã€‚</p><p>æ”¾åœ¨å¹²ç‡¥é€šé£çš„åœ°æ–¹æ™¾æ™’ï¼Œä¸€æ®µæ—¶é—´è¿‡åï¼Œåˆå¯ä»¥æ¢å¤åŸæœ¬çš„å¤§å°ã€‚</p><h1 id="è½¯ä»¶éœ€æ±‚"><a href="#è½¯ä»¶éœ€æ±‚" class="headerlink" title="è½¯ä»¶éœ€æ±‚"></a>è½¯ä»¶éœ€æ±‚</h1><p>è½¯ä»¶éœ€æ±‚ä¸æ³¡æ°´è†¨èƒ€çƒä¹Ÿæœ‰ç±»ä¼¼ä¹‹å¤„ã€‚</p><p>ä¸€å¼€å§‹æ—¶çœ‹ä¼¼ç®€å•æ˜äº†ä¸”å®Œå¤‡æ­£äº¤ï¼Œåšèµ·æ¥å‘ç°<strong>è¶Šåšè¶Šå¤§ï¼Œè¶Šåšè¶Šå¤š</strong>ã€‚</p><p>åŸæœ¬ä¸€åªæ‰‹èƒ½æŠ“å¥½å‡ ä¸ªçš„å°çƒï¼Œåæ¥å˜æˆä¸¤åªæ‰‹éƒ½æŠ“ä¸ä½ä¸€ä¸ªã€‚</p><p>ç„¶åçš„ç»“æœè¦ä¹ˆæ˜¯è¶…é¢„ç®—å¤šèŠ±é’±åšå®Œï¼Œè¦ä¹ˆæ˜¯è½¬å«æˆæœ¬ç»™ä¹™æ–¹è¦æ±‚å¯¹æ–¹åšå®Œï¼Œè¦ä¹ˆæ˜¯å»¶æœŸï¼Œè¦ä¹ˆæ˜¯ç—›è‹¦åœ°å»å‹ç¼©éœ€æ±‚ã€‚</p><p>æ— è®ºå“ªç§ï¼Œéƒ½æ˜¯<strong>ä¸å¥åº·</strong>çš„ã€‚</p><h1 id="è†¨èƒ€ç³»æ•°"><a href="#è†¨èƒ€ç³»æ•°" class="headerlink" title="è†¨èƒ€ç³»æ•°"></a>è†¨èƒ€ç³»æ•°</h1><p>å°çƒæ³¡åœ¨æ°´é‡Œä¼šè†¨èƒ€ï¼Œæš´éœ²äºå¹²ç‡¥ç¯å¢ƒä¸­ä¼šç¼©å°ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸€ä¸ªç®€åŒ–æ¨¡å‹æ¥è¡¨ç¤ºï¼š</p><p><em><strong>è†¨èƒ€ç³»æ•° â‰ˆ å¸æ°´åŠ› - æ–¥æ°´åŠ›</strong></em></p><p><em><strong>å°çƒä½“ç§¯ â‰ˆ åˆå§‹ä½“ç§¯ + è†¨èƒ€ç³»æ•° x æ—¶é—´</strong></em></p><p>å½“å¸æ°´åŠ›å¤§äºæ–¥æ°´åŠ›æ—¶ï¼Œè†¨èƒ€ç³»æ•°ä¸ºæ­£æ•°ï¼Œåœ¨æ—¶é—´çš„ä½œç”¨ä¸‹ï¼Œçƒä¼šè†¨èƒ€ã€‚<br>å½“æ–¥æ°´åŠ›å¤§äºå¸æ°´åŠ›æ—¶ï¼Œè†¨èƒ€ç³»æ•°ä¸ºè´Ÿæ•°ï¼Œåœ¨æ—¶é—´çš„ä½œç”¨ä¸‹ï¼Œçƒä¼šç¼©å°ã€‚<br>å½“ä¸¤ä¸ªåŠ›æ¥è¿‘ç›¸äº’<strong>å¹³è¡¡</strong>æ—¶ï¼Œè†¨èƒ€ç³»æ•°çº¦ç­‰äºé›¶ï¼Œåœ¨æ—¶é—´çš„ä½œç”¨ä¸‹ï¼Œå°çƒä½“ç§¯è¶‹äº<strong>ç¨³å®š</strong>ã€‚</p><h1 id="æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°å°çƒä½“ç§¯æ€æ ·å˜åŒ–ï¼Ÿ"><a href="#æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°å°çƒä½“ç§¯æ€æ ·å˜åŒ–ï¼Ÿ" class="headerlink" title="æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°å°çƒä½“ç§¯æ€æ ·å˜åŒ–ï¼Ÿ"></a>æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°å°çƒä½“ç§¯æ€æ ·å˜åŒ–ï¼Ÿ</h1><p>ä¸€ç›´å˜è‚¥ï¼Ÿé‚£ä¸è¡Œã€‚åšè½¯ä»¶æ˜¯æœ‰æˆæœ¬çš„ï¼Œæ—¶é—´äººåŠ›éƒ½æ˜¯æˆæœ¬ã€‚</p><p>æŒç»­å˜ç˜¦ï¼Ÿä¹Ÿä¸è¡Œã€‚éœ€æ±‚å—åˆ°è¿‡åˆ†å‹æŠ‘ä¹Ÿæ˜¯ä¸å¥åº·çš„ã€‚</p><p>å¥åº·çš„å˜åŒ–è¿‡ç¨‹åº”è¯¥æ˜¯ï¼š<br>å…ˆè®©å°çƒä¸°æ»¡èµ·æ¥ï¼ˆå……åˆ†æ”¶é›†éœ€æ±‚ï¼Œä»¥å…åé¢å‡ºç°å§‹æ–™æœªåŠçš„â€œæƒŠå–œâ€ï¼‰<br>ç„¶åå‰Šå‡å¤šä½™çš„èµ˜è‚‰ï¼ˆä½¿ç”¨å¥¥å¡å§†å‰ƒåˆ€ï¼‰<br>ä¹‹åé•¿æœŸç»´æŒå¥åº·èŒƒå›´å†…çš„æ³¢åŠ¨</p><h1 id="åŠ›çš„é˜¶æ®µæ€§æ–½åŠ ç­–ç•¥"><a href="#åŠ›çš„é˜¶æ®µæ€§æ–½åŠ ç­–ç•¥" class="headerlink" title="åŠ›çš„é˜¶æ®µæ€§æ–½åŠ ç­–ç•¥"></a>åŠ›çš„é˜¶æ®µæ€§æ–½åŠ ç­–ç•¥</h1><p>æ—¶é—´çš„æµé€æ˜¯ä¸å—æˆ‘ä»¬æ§åˆ¶çš„ï¼Œå› è€Œæƒ³è¦æ§åˆ¶ä½“ç§¯å°±è¦ä»è†¨èƒ€ç³»æ•°ä¸‹æ‰‹ã€‚</p><p>è€Œè†¨èƒ€ç³»æ•°åˆä¸ä¸¤ä¸ªåŠ›ç›¸å…³ï¼Œå› è€Œ<strong>æƒ³è¦æ§åˆ¶ä½“ç§¯å°±è¦æ§åˆ¶å¸æ°´åŠ›ä¸æ–¥æ°´åŠ›</strong>ã€‚</p><img data-src="/images/éœ€æ±‚è†¨èƒ€/äºŒåŠ›.png"/><p>é¦–å…ˆè®©å¸æ°´åŠ›å°½æƒ…é‡Šæ”¾ï¼Œè¿™æ—¶æ–¥æ°´åŠ›<strong>è›°ä¼</strong>ç€<strong>é™å¾…</strong>å¸æ°´åŠ›çš„<strong>è¡°å‡</strong>ã€‚<br>ä¹‹åæ–¥æ°´åŠ›çˆ¬å¡ï¼Œè¾¾åˆ°ä¸å¸æ°´åŠ›æŒå¹³çš„æ°´å‡†ï¼ŒäºŒè€…é•¿æœŸå’Œå¹³å…±å¤„ã€‚</p><p>å½“æˆ‘ä»¬å¦‚ä¸Šä½¿ç”¨è¿™ä¸¤ç§åŠ›çš„æ—¶å€™ï¼Œå°çƒä½“ç§¯çš„å˜åŒ–å°±ä¼šæ˜¯è¿™æ ·çš„ï¼š</p><img data-src="/images/éœ€æ±‚è†¨èƒ€/ä½“ç§¯å˜åŒ–.png"/><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è°ƒç ”é˜¶æ®µç§¯æåˆ›é€ <strong>ç¯å¢ƒ</strong>æ¥è®©å¸æ°´åŠ›å¾—ä»¥<strong>é‡Šæ”¾</strong>ï¼Œå…ˆå…è®¸å°çƒå˜è‚¥ã€‚ç„¶åæ–½åŠ ä¸€å®šçš„æ–¥æ°´åŠ›ï¼Œè®©å°çƒè‹—æ¡ä¸‹æ¥ã€‚</p><p>åˆ°äº†ç ”å‘é˜¶æ®µï¼Œç”±äºå¸æ°´åŠ›åœ¨ä¹‹å‰å°±å·²ç»å¾—åˆ°äº†æœ‰æ•ˆçš„<strong>é‡Šæ”¾</strong>ï¼Œè¿™æ—¶æ–½åŠ é€‚é‡çš„æ–¥æ°´åŠ›æ¥å¹³è¡¡<strong>æ‰€å‰©æ— å‡ </strong>çš„å¸æ°´åŠ›å°±èƒ½è®©å°çƒä½“ç§¯çš„æ³¢åŠ¨ç»´æŒåœ¨<strong>å¯æ§</strong>çš„èŒƒå›´å†…ã€‚</p><p>åœ¨ä¸åŒçš„é˜¶æ®µæœ‰ç­–ç•¥åœ°åˆ©ç”¨è¿™ä¸¤ç§åŠ›ï¼Œåˆ™å¯ä»¥è¶‹è¿‘<strong>å‰æœŸéœ€æ±‚æ”¶é›†å……åˆ†è€ƒè™‘å„æ–¹è¯‰æ±‚</strong>ä¸ç•™å¤§çš„éšæ‚£ï¼Œåç»­ç ”å‘ç¨³å®š<strong>ä¸åè¿‡å±±è½¦</strong>çš„ç›®çš„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ³¡æ°´è†¨èƒ€çƒ&quot;&gt;&lt;a href=&quot;#æ³¡æ°´è†¨èƒ€çƒ&quot; class=&quot;headerlink&quot; title=&quot;æ³¡æ°´è†¨èƒ€çƒ&quot;&gt;&lt;/a&gt;æ³¡æ°´è†¨èƒ€çƒ&lt;/h1&gt;&lt;img data-src=&quot;/images/éœ€æ±‚è†¨èƒ€/è†¨èƒ€çƒ.jpg&quot; alt=&quot;drawing&quot; width=&quot;500</summary>
      
    
    
    
    
    <category term="éœ€æ±‚" scheme="https://cuipengfei.me/tags/%E9%9C%80%E6%B1%82/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ï¼ˆDistributed Key-Value Storeï¼‰</title>
    <link href="https://cuipengfei.me/blog/2020/02/21/distributed-key-value-store/"/>
    <id>https://cuipengfei.me/blog/2020/02/21/distributed-key-value-store/</id>
    <published>2020-02-21T12:54:15.000Z</published>
    <updated>2020-02-21T12:54:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ï¼ˆDistributed Key-Value Storeï¼‰å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°é²œçš„ç©æ„ã€‚<br>å¸¸è§çš„Redisï¼ŒMemcacheç­‰ç­‰éƒ½æœ‰å¾ˆå¤šäººåœ¨ç”¨ã€‚</p><p>ä¸è¿‡å¦‚æœè¦æ˜¯è¯´å…¶ä¸­çš„ç»†èŠ‚ï¼Œå¦‚replicateï¼Œè¯»å†™ï¼Œä¸€è‡´æ€§ï¼Œretryç­‰ç­‰çš„è¯ï¼Œåˆæ˜¯ç»å¸¸ä¼šé‡åˆ°æŠŠè‡ªå·±ç»•çš„æ··æ·†ä¸æ¸…çš„æƒ…å†µã€‚ã€‚<br>æ°å·§æˆ‘æœ€è¿‘åœ¨çœ‹çš„ä¸€é—¨ç½‘è¯¾ã€ŠProgramming Reactive Systemsã€‹ä¸­æœ‰ä¸€é“ä½œä¸šé¢˜å°±æ˜¯è¦è‡ªå·±å®ç°ä¸€ä¸ªDistributed Key-Value Storeï¼Œé‚£å°±æ­£å¥½å€Ÿæ­¤æœºä¼šè¯¦ç»†å†™ä¸‹å…¶ä¸­çš„å…³é”®ç‚¹ã€‚</p><h1 id="ç»„æˆç³»ç»Ÿçš„å‚ä¸è€…"><a href="#ç»„æˆç³»ç»Ÿçš„å‚ä¸è€…" class="headerlink" title="ç»„æˆç³»ç»Ÿçš„å‚ä¸è€…"></a>ç»„æˆç³»ç»Ÿçš„å‚ä¸è€…</h1><p>æ—¢ç„¶æ˜¯åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ï¼Œé‚£ä¹ˆè‚¯å®šä¼šæœ‰ä¸»ä»èŠ‚ç‚¹ï¼Œæ¯ä¸ªç»“ç‚¹åˆä¼šæœ‰è‡ªå·±çš„æŒä¹…åŒ–ï¼Œè€Œä¸»ä»ä¹‹é—´ä¹Ÿéœ€è¦åè°ƒï¼Œäºæ˜¯å°±å¾—å‡ºäº†å¦‚ä¸‹å…³é”®å‚ä¸è€…ï¼š</p><ul><li><strong>Primary</strong>ï¼š ä¸»èŠ‚ç‚¹ã€‚æ¥å—æ¥è‡ªclientçš„æ›´æ–°ï¼ˆå¢&#x2F;åˆ &#x2F;æ”¹ï¼‰æ“ä½œï¼Œå¹¶æŠŠæ›´æ–°åçš„æ•°æ®æ‰©æ•£åˆ°å…¶å®ƒèŠ‚ç‚¹ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ¥å—æ¥è‡ªäºclientçš„è¯»æ“ä½œã€‚</li><li><strong>Secondary</strong>ï¼š ä»èŠ‚ç‚¹ã€‚æ¥å—æ¥è‡ªä¸»èŠ‚ç‚¹çš„æ›´æ–°æ“ä½œã€‚æ¥å—æ¥è‡ªclientçš„åªè¯»æ“ä½œã€‚</li><li><strong>Arbiter</strong>ï¼š ä»²è£è€…ã€‚ä»»ä½•èŠ‚ç‚¹ï¼Œæ— è®ºä¸»ä»ï¼Œéƒ½è¦æŠŠè‡ªå·±æ³¨å†Œåˆ°Arbiterä¸Šå»ã€‚å½“æœ‰ä»èŠ‚ç‚¹åŠ å…¥æˆ–è€…ç¦»å¼€é›†ç¾¤çš„æ—¶å€™ï¼ŒArbiterè´Ÿè´£å‘ŠçŸ¥ä¸»èŠ‚ç‚¹ã€‚</li><li><strong>Persistence</strong>ï¼š æ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰è‡ªå·±çš„ç‹¬äº«çš„Persistenceã€‚ç”¨äºæŠŠèŠ‚ç‚¹ä¸Šçš„æ•°æ®æŒä¹…åŒ–ã€‚</li><li><strong>Clients</strong>ï¼š å®¢æˆ·ç«¯ï¼Œå¯èƒ½ä¸ä¸»æˆ–è€…ä»èŠ‚ç‚¹é€šä¿¡ï¼Œè¿›è¡Œå„ç§è¯»å†™æ“ä½œã€‚</li></ul><p>æ­¤å¤–ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªç›¸å¯¹ä¸é‚£ä¹ˆå…³é”®çš„å‚ä¸è€…ï¼š</p><ul><li><strong>Replicator</strong>ï¼š å¤åˆ¶å™¨ï¼Œè´Ÿè´£æ‰©æ•£æ•°æ®ã€‚ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹ä¹‹é—´çš„æ¡¥æ¢ã€‚ä¸»èŠ‚ç‚¹æ‰©æ•£åˆ°ä»èŠ‚ç‚¹å»çš„æ•°æ®è¦ç»æ‰‹Replicatorã€‚<br>ä¹‹æ‰€ä»¥éœ€è¦å®ƒæ˜¯ä¸ºäº†æŠŠä¸€éƒ¨åˆ†ç»´æŠ¤å†…éƒ¨çŠ¶æ€çš„èŒè´£ä»Primaryèº«ä¸Šè§£é™¤å‡ºå»ï¼Œå…·ä½“æ¥è¯´æ˜¯ä¸€ä¸ªsequence numberåºåˆ—å·ï¼Œåé¢ä¼šæåˆ°ã€‚</li></ul><h2 id="å‚ä¸è€…ä¹‹é—´çš„å…³ç³»"><a href="#å‚ä¸è€…ä¹‹é—´çš„å…³ç³»" class="headerlink" title="å‚ä¸è€…ä¹‹é—´çš„å…³ç³»"></a>å‚ä¸è€…ä¹‹é—´çš„å…³ç³»</h2><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbiAgUHJpbWFyeS0tPnxhc2sgdG8gcmVwbGljYXRlfFJlcGxpY2F0b3IxXG4gIFByaW1hcnktLT58YXNrIHRvIHJlcGxpY2F0ZXxSZXBsaWNhdG9yMlxuICBSZXBsaWNhdG9yMS0tPnxzbmFwc2hvdCB0b3xTZWNvbmRhcnkxXG4gIFJlcGxpY2F0b3IyLS0-fHNuYXBzaG90IHRvfFNlY29uZGFyeTJcbiAgUHJpbWFyeS0tPnxKb2lufEFyYml0ZXJcbiAgU2Vjb25kYXJ5MS0tPnxKb2lufEFyYml0ZXJcbiAgU2Vjb25kYXJ5Mi0tPnxKb2lufEFyYml0ZXJcbiAgUHJpbWFyeS0tPnxQZXJzaXN0IHRvfFBlcnNpc3RlbmNlMFxuICBTZWNvbmRhcnkxLS0-fFBlcnNpc3QgdG98UGVyc2lzdGVuY2UxXG4gIFNlY29uZGFyeTItLT58UGVyc2lzdCB0b3xQZXJzaXN0ZW5jZTJcbiAgXG4gIENsaWVudC0tPnxyZWFkL3dyaXRlfFByaW1hcnlcbiAgQ2xpZW50LS0-fHJlYWR8U2Vjb25kYXJ5MVxuICBDbGllbnQtLT58cmVhZHxTZWNvbmRhcnkyXG5cbiAgQXJiaXRlci0tPnxOb3RpZnkgam9pbi9sZWF2ZSBvZiBzZWNvbmRhcmllc3xQcmltYXJ5IiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcbiAgUHJpbWFyeS0tPnxhc2sgdG8gcmVwbGljYXRlfFJlcGxpY2F0b3IxXG4gIFByaW1hcnktLT58YXNrIHRvIHJlcGxpY2F0ZXxSZXBsaWNhdG9yMlxuICBSZXBsaWNhdG9yMS0tPnxzbmFwc2hvdCB0b3xTZWNvbmRhcnkxXG4gIFJlcGxpY2F0b3IyLS0-fHNuYXBzaG90IHRvfFNlY29uZGFyeTJcbiAgUHJpbWFyeS0tPnxKb2lufEFyYml0ZXJcbiAgU2Vjb25kYXJ5MS0tPnxKb2lufEFyYml0ZXJcbiAgU2Vjb25kYXJ5Mi0tPnxKb2lufEFyYml0ZXJcbiAgUHJpbWFyeS0tPnxQZXJzaXN0IHRvfFBlcnNpc3RlbmNlMFxuICBTZWNvbmRhcnkxLS0-fFBlcnNpc3QgdG98UGVyc2lzdGVuY2UxXG4gIFNlY29uZGFyeTItLT58UGVyc2lzdCB0b3xQZXJzaXN0ZW5jZTJcbiAgXG4gIENsaWVudC0tPnxyZWFkL3dyaXRlfFByaW1hcnlcbiAgQ2xpZW50LS0-fHJlYWR8U2Vjb25kYXJ5MVxuICBDbGllbnQtLT58cmVhZHxTZWNvbmRhcnkyXG5cbiAgQXJiaXRlci0tPnxOb3RpZnkgam9pbi9sZWF2ZSBvZiBzZWNvbmRhcmllc3xQcmltYXJ5IiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>å¯ä»¥çœ‹å‡ºï¼Œç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªPrimaryï¼Œå¤šä¸ªSecondaryï¼ˆè™½ç„¶å›¾ä¸­åªç”»äº†ä¸¤ä¸ªï¼Œä½†æ˜¯ç†è®ºä¸Šå¯ä»¥æœ‰ä»»æ„Nå¤šä¸ªï¼‰ã€‚<br>Primaryå‘Secondaryæ‰©æ•£æ•°æ®æ˜¯é€šè¿‡Replicatorè¿›è¡Œçš„ï¼Œå¹¶ä¸”æ˜¯ç»™æ¯ä¸ªSecondaryé…äº†ä¸€ä¸ªå•ç‹¬çš„Replicatorã€‚<br>ä¹Ÿå°±æ˜¯è¯´Replicatorå’ŒSecondaryæ˜¯æˆåŒæˆå¯¹çš„ã€‚</p><p><strong>æ³¨ï¼šä¸Šå›¾æè¿°çš„æ˜¯å„ä¸ªå‚ä¸è€…ä¹‹é—´çš„å…³ç³»ï¼Œä¸Šä¸‹å·¦å³ä½ç½®å¹¶ä¸ä»£è¡¨å…ˆåé¡ºåº</strong></p><h1 id="ä¸€äº›é™åˆ¶"><a href="#ä¸€äº›é™åˆ¶" class="headerlink" title="ä¸€äº›é™åˆ¶"></a>ä¸€äº›é™åˆ¶</h1><p>æˆ‘ä»¬å¹¶ä¸æ˜¯è¦åšä¸€ä¸ªå¯ä»¥åœ¨Prodç¯å¢ƒä¸­ä½¿ç”¨çš„KV Storeï¼Œè€Œåªæ˜¯å€ŸåŠ©è‡ªå·±å®ç°æ¥å˜æ¸…KV Storeçš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ‰€ä»¥åšå‡ºäº†å¦‚ä¸‹çš„é™åˆ¶æ¥ç®€åŒ–å®ç°ï¼š</p><ul><li>åªæœ‰ä¸»èŠ‚ç‚¹å¯ä»¥æ¥å—å†™æ“ä½œï¼Œæ‰€æœ‰ä»èŠ‚ç‚¹éƒ½åªèƒ½æ¥å—è¯»æ“ä½œ</li><li>å‡è®¾ä¸»èŠ‚ç‚¹æ˜¯ç¨³å®šå¯é çš„ï¼Œä¸ä¼šæŒ‚ï¼ˆä¸å¤„ç†ä¸»èŠ‚ç‚¹èº«ä»½è½¬ç§»ï¼‰</li><li>å‡è®¾Arbiteræ˜¯å¯é çš„ï¼Œä¸ä¼šæŒ‚</li><li>ä¸å¤„ç†èƒŒå‹ï¼ˆback pressureï¼‰</li><li>å®¢æˆ·ç«¯ä½¿ç”¨çš„è¯·æ±‚idæ˜¯ä¸ä¼šé‡å¤çš„</li></ul><h1 id="å„å‚ä¸è€…çš„èŒè´£åŠç›¸äº’ä¹‹é—´çš„äº¤äº’"><a href="#å„å‚ä¸è€…çš„èŒè´£åŠç›¸äº’ä¹‹é—´çš„äº¤äº’" class="headerlink" title="å„å‚ä¸è€…çš„èŒè´£åŠç›¸äº’ä¹‹é—´çš„äº¤äº’"></a>å„å‚ä¸è€…çš„èŒè´£åŠç›¸äº’ä¹‹é—´çš„äº¤äº’</h1><p>ä»¥ä¸‹çš„è¿™äº›å›¾ï¼Œ<strong>æ¯ä¸€å¼ éƒ½åªå…³å¿ƒç³»ç»Ÿä¸­çš„ä¸€ä¸ªå±€éƒ¨</strong>ã€‚ä¸»è¦åŸå› åœ¨äºæŠŠæ•´ä¸ªç³»ç»Ÿçš„äº¤äº’æ”¾åˆ°ä¸€å¼ å›¾é‡Œä¼šå¯¼è‡´<strong>è¦ç´ å¤ªå¤šè€Œéš¾ä»¥é˜…è¯»</strong>ã€‚</p><h2 id="Arbiter"><a href="#Arbiter" class="headerlink" title="Arbiter"></a>Arbiter</h2><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgTm9kZSAxLT4-K0FyYml0ZXI6IEpvaW5cbiAgICBOb2RlIDItPj4rQXJiaXRlcjpKb2luXG4gICAgTm9kZSAzLT4-K0FyYml0ZXI6Sm9pblxuICAgIEFyYml0ZXItLT4-K05vZGUgMTogSm9pbmVkUHJpbWFyeVxuICAgIEFyYml0ZXItLT4-K05vZGUgMjogSm9pbmVkU2Vjb25kYXJ5XG4gICAgQXJiaXRlci0tPj4rTm9kZSAxOiBSZXBsaWNhcyhOb2RlIDIpXG4gICAgQXJiaXRlci0tPj4rTm9kZSAzOiBKb2luZWRTZWNvbmRhcnlcbiAgICBBcmJpdGVyLS0-PitOb2RlIDE6IFJlcGxpY2FzKE5vZGUgMylcblxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgTm9kZSAxLT4-K0FyYml0ZXI6IEpvaW5cbiAgICBOb2RlIDItPj4rQXJiaXRlcjpKb2luXG4gICAgTm9kZSAzLT4-K0FyYml0ZXI6Sm9pblxuICAgIEFyYml0ZXItLT4-K05vZGUgMTogSm9pbmVkUHJpbWFyeVxuICAgIEFyYml0ZXItLT4-K05vZGUgMjogSm9pbmVkU2Vjb25kYXJ5XG4gICAgQXJiaXRlci0tPj4rTm9kZSAxOiBSZXBsaWNhcyhOb2RlIDIpXG4gICAgQXJiaXRlci0tPj4rTm9kZSAzOiBKb2luZWRTZWNvbmRhcnlcbiAgICBBcmJpdGVyLS0-PitOb2RlIDE6IFJlcGxpY2FzKE5vZGUgMylcblxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>æ¥çš„æ—©çš„ä¼šè¢«Arbiterå½“ä½œPrimaryï¼Œæ¥çš„æ™šçš„å°±æ˜¯Secondaryäº†ã€‚<br>å¹¶ä¸”ï¼Œæ¯ä¸€ä¸ªæ¥çš„æ™šçš„æˆä¸ºSecondaryä¹‹åï¼ŒArbiterè¿˜ä¼šå‘ŠçŸ¥Primaryè¯´ï¼šæ¥æ–°èŠ‚ç‚¹äº†ã€‚ä»¥ä¾¿Primaryå¯ä»¥çŸ¥é“åç»­éœ€è¦æŠŠæ•°æ®æ‰©æ•£ç»™è°ã€‚<br>å¦‚æœæœ‰Secondaryç”±äºæŸç§åŸå› è€Œç¦»å¼€äº†é›†ç¾¤ï¼ŒArbiterä¹Ÿä¼šå‘ŠçŸ¥Primaryï¼Œä»è€Œé¿å…Primaryç»§ç»­ç»™å·²ç»ä¸åœ¨äº†çš„Secondaryå‘æ¶ˆæ¯ã€‚</p><h2 id="Persistence"><a href="#Persistence" class="headerlink" title="Persistence"></a>Persistence</h2><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgTm9kZSAtPj4rUGVyc2lzdGVuY2U6IFBlcnNpc3Qoa2V5LHZhbHVlLGlkKVxuICAgIFBlcnNpc3RlbmNlLS0-PitOb2RlOiBQZXJzaXN0ZWQoa2V5LGlkKSBvciBub3RoaW5nIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgTm9kZSAtPj4rUGVyc2lzdGVuY2U6IFBlcnNpc3Qoa2V5LHZhbHVlLGlkKVxuICAgIFBlcnNpc3RlbmNlLS0-PitOb2RlOiBQZXJzaXN0ZWQoa2V5LGlkKSBvciBub3RoaW5nIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>å‰é¢æåˆ°è¿‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼Œæ— è®ºä¸»ä»ï¼Œéƒ½æœ‰ä¸€ä¸ªè‡ªå·±ç‹¬äº«çš„persistenceã€‚æ‰€ä»¥ä¸Šå›¾ä¸­çš„Nodeå…¼æŒ‡ä¸»æˆ–è€…ä»èŠ‚ç‚¹ã€‚<br>Persistenceæœ¬èº«çš„èŒè´£å¾ˆç®€å•ï¼ŒæŠŠNodeå‘Šè¯‰å®ƒçš„æ•°æ®æŒä¹…åŒ–ä¸‹æ¥ã€‚<br>ä½†æ˜¯ï¼Œæ­¤å¤„æˆ‘ä»¬å¹¶<strong>æ²¡æœ‰å‡è®¾æŒä¹…åŒ–æ€»æ˜¯å¯é çš„</strong>ï¼Œæ‰€ä»¥ä¸Šå›¾ä¸­çš„ç¬¬äºŒæ ¹çº¿æ˜¯<strong>æœªå¿…æ€»æ˜¯èƒ½æˆåŠŸå‘ç”Ÿ</strong>çš„ã€‚</p><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgTm9kZSAtPj4rQXJiaXRlcjpKb2luXG4gICAgTm9kZSAtPj4rTm9kZTogUmV0cnkgUGVyc2lzdCBldmVyeSAxMDBtc1xuICAgIEFyYml0ZXItLT4-K05vZGU6Sm9pbmVkIFByaW1hcnkgb3IgU2Vjb25kYXJ5XG4gICAgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgTm9kZSAtPj4rQXJiaXRlcjpKb2luXG4gICAgTm9kZSAtPj4rTm9kZTogUmV0cnkgUGVyc2lzdCBldmVyeSAxMDBtc1xuICAgIEFyYml0ZXItLT4-K05vZGU6Sm9pbmVkIFByaW1hcnkgb3IgU2Vjb25kYXJ5XG4gICAgIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>è¿™é‡Œçš„Nodeå…¼æŒ‡ä¸»æˆ–è€…ä»èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸Šå›¾ä¸­çš„äº‹æƒ…æ˜¯æ¯ä¸ªNodeæ— è®ºä¸»ä»éƒ½è¦åšçš„ã€‚<br>æ¯ä¸€ä¸ªNodeï¼Œåœ¨å®ƒç”Ÿå‘½å‘¨æœŸçš„æœ€æ—©å¼€å§‹ä½œçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å‘Šè¯‰Arbiterï¼šâ€œæˆ‘æ¥äº†â€œã€‚</p><p>ä¸Šé¢æåˆ°è¿‡ï¼ŒPersistenceæœªå¿…æ€»æ˜¯å¯é çš„ã€‚æ‰€ä»¥æ¯ä¸ªNodeä¸€æ—¦å¼€å§‹å­˜æ´»ï¼Œå°±ä¼šç»™è‡ªå·±å¯åŠ¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”100mså°±å»retry persistï¼Œç›´åˆ°Persitenceå›è¯è¯´Persistedä¸ºæ­¢æ‰åœæ­¢retryã€‚</p><h2 id="Secondary"><a href="#Secondary" class="headerlink" title="Secondary"></a>Secondary</h2><h3 id="Secondary-Snapshot"><a href="#Secondary-Snapshot" class="headerlink" title="Secondary - Snapshot"></a>Secondary - Snapshot</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUmVwbGljYXRvciAtPj4rU2Vjb25kYXJ5OlNuYXBzaG90KGtleSx2YWx1ZSxzZXEpXG4gICAgYWx0IHNlcT09ZXhwZWN0ZWRTZXFcbiAgICAgICAgU2Vjb25kYXJ5LT4-K1NlY29uZGFyeTogdXBkYXRlIGludGVybmFsIGt2IHN0b3JlXG4gICAgICAgIFNlY29uZGFyeS0-PitQZXJzaXN0ZW5jZTpQZXJzaXN0KGtleSx2YWx1ZSxzZXEpXG4gICAgICAgIFNlY29uZGFyeS0-PlNlY29uZGFyeTphZGQgb25lIGl0ZW0gdG8gaW50ZXJuYWwgcmV0cnkgcGVyc2lzdCBsaXN0XG4gICAgZWxzZSBzZXE8ZXhwZWN0ZWRTZXFcbiAgICAgICAgU2Vjb25kYXJ5LT4-K1JlcGxpY2F0b3I6U25hcHNob3RBY2soa2V5LHNlcSlcbiAgICBlbmRcbiAgICAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0IiwiZmxvd2NoYXJ0Ijp7ImN1cnZlIjoiYmFzaXMifX0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUmVwbGljYXRvciAtPj4rU2Vjb25kYXJ5OlNuYXBzaG90KGtleSx2YWx1ZSxzZXEpXG4gICAgYWx0IHNlcT09ZXhwZWN0ZWRTZXFcbiAgICAgICAgU2Vjb25kYXJ5LT4-K1NlY29uZGFyeTogdXBkYXRlIGludGVybmFsIGt2IHN0b3JlXG4gICAgICAgIFNlY29uZGFyeS0-PitQZXJzaXN0ZW5jZTpQZXJzaXN0KGtleSx2YWx1ZSxzZXEpXG4gICAgICAgIFNlY29uZGFyeS0-PlNlY29uZGFyeTphZGQgb25lIGl0ZW0gdG8gaW50ZXJuYWwgcmV0cnkgcGVyc2lzdCBsaXN0XG4gICAgZWxzZSBzZXE8ZXhwZWN0ZWRTZXFcbiAgICAgICAgU2Vjb25kYXJ5LT4-K1JlcGxpY2F0b3I6U25hcHNob3RBY2soa2V5LHNlcSlcbiAgICBlbmRcbiAgICAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0IiwiZmxvd2NoYXJ0Ijp7ImN1cnZlIjoiYmFzaXMifX0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"></a></p><p>ä¸Šå›¾æè¿°çš„æ˜¯å½“Replicatorå‘Secondaryæ‰©æ•£æ•°æ®çš„æ—¶å€™ï¼ŒSecondaryå¦‚ä½•å¤„ç†ã€‚<br>ä¸€æ—¦ä¸€ä¸ªReplicatorå‘Šè¯‰Secondaryå»æ›´æ–°æ•°æ®ï¼ˆå¢&#x2F;åˆ &#x2F;æ”¹ï¼‰ï¼ŒSecondaryå…ˆå»æ›´æ–°è‡ªå·±å†…éƒ¨çš„kvï¼Œç„¶åå»å‘ŠçŸ¥Persistenceå»åšæŒä¹…åŒ–ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå°±æ˜¯å›¾ä¸­å‡ºç°çš„seqï¼ˆsequence number åºåˆ—å·ï¼‰ã€‚Replicatorå’ŒSecondaryä¹‹é—´å°±æ˜¯é è¿™ä¸ªseqæ¥ä¿è¯æ•°æ®æ›´æ–°æ“ä½œæ€»æ˜¯å…ˆæ¥çš„å…ˆå¤„ç†ï¼Œåæ¥çš„åå¤„ç†ã€‚<br>æ®æ­¤æ¥æä¾›ä¸€å®šç¨‹åº¦çš„consistencyã€‚é¿å…è€æ•°æ®è¦†ç›–æ–°æ•°æ®ï¼ˆæ­¤å¤„éœ€è¦ç»“åˆä¸‹æ–‡ä¸­replicatorçš„retry snapshotæ¥ç†è§£ï¼‰ã€‚</p><h3 id="Secondary-Persisted"><a href="#Secondary-Persisted" class="headerlink" title="Secondary - Persisted"></a>Secondary - Persisted</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUGVyc2lzdGVuY2UtPj5TZWNvbmRhcnk6UGVyc2lzdGVkKGtleSxzZXEpXG4gICAgU2Vjb25kYXJ5LT4-UmVwbGljYXRvcjpTbmFwc2hvdEFjayhrZXksc2VxKVxuICAgIFNlY29uZGFyeS0-PlNlY29uZGFyeTppbmNyZWFzZSBleHBlY3RlZFNlcVxuICAgIFNlY29uZGFyeS0-PlNlY29uZGFyeTpyZW1vdmUgc2VxIGZyb20gcmV0cnkgcGVyc2lzdCBsaXN0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUGVyc2lzdGVuY2UtPj5TZWNvbmRhcnk6UGVyc2lzdGVkKGtleSxzZXEpXG4gICAgU2Vjb25kYXJ5LT4-UmVwbGljYXRvcjpTbmFwc2hvdEFjayhrZXksc2VxKVxuICAgIFNlY29uZGFyeS0-PlNlY29uZGFyeTppbmNyZWFzZSBleHBlY3RlZFNlcVxuICAgIFNlY29uZGFyeS0-PlNlY29uZGFyeTpyZW1vdmUgc2VxIGZyb20gcmV0cnkgcGVyc2lzdCBsaXN0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>ä¸Šå›¾æè¿°çš„æ˜¯ï¼Œå½“Persistenceå‘Šè¯‰Secondaryï¼šâ€œæŒä¹…åŒ–å¥½äº†â€œçš„æ—¶å€™ï¼ŒSecondaryå¦‚ä½•å¤„ç†ã€‚<br>å¯ä»¥çœ‹å‡ºæ¥ï¼Œåªæœ‰ç¡®è®¤æŒä¹…åŒ–å®Œæˆä¹‹åï¼ŒSecondaryæ‰ä¼šå‘Šè¯‰Replicatorï¼šâ€œæ‰©æ•£æ•°æ®å®Œæˆäº†â€œï¼Œå¹¶ä¸”åœ¨Secondaryè‡ªå·±å†…éƒ¨å–æ¶ˆæ‰è¿™ä¸€æ¡æ•°æ®çš„retry persistã€‚</p><h3 id="Secondary-Get"><a href="#Secondary-Get" class="headerlink" title="Secondary - Get"></a>Secondary - Get</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgQ2xpZW50LT4-U2Vjb25kYXJ5OkdldChrZXksaWQpXG4gICAgU2Vjb25kYXJ5LT4-U2Vjb25kYXJ5OnF1ZXJ5IGludGVybmFsIGt2XG4gICAgU2Vjb25kYXJ5LS0-PkNsaWVudDpHZXRSZXN1bHQoa2V5LHZhbHVlLGlkKSAodmFsdWUgY291bGQgYmUgZW1wdHkpIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgQ2xpZW50LT4-U2Vjb25kYXJ5OkdldChrZXksaWQpXG4gICAgU2Vjb25kYXJ5LT4-U2Vjb25kYXJ5OnF1ZXJ5IGludGVybmFsIGt2XG4gICAgU2Vjb25kYXJ5LS0-PkNsaWVudDpHZXRSZXN1bHQoa2V5LHZhbHVlLGlkKSAodmFsdWUgY291bGQgYmUgZW1wdHkpIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCIsImZsb3djaGFydCI6eyJjdXJ2ZSI6ImJhc2lzIn19LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>å¯¹äºæ¥è‡ªäºClientçš„è¯»å–æ“ä½œï¼ŒSecondaryæ€»æ˜¯å¿ƒç›´å£å¿«ï¼Œæœ‰å°±æ˜¯æœ‰ï¼Œæ²¡æœ‰å°±æ˜¯æ²¡æœ‰ã€‚</p><h2 id="Replicator"><a href="#Replicator" class="headerlink" title="Replicator"></a>Replicator</h2><h3 id="Replicator-retry-snapshots"><a href="#Replicator-retry-snapshots" class="headerlink" title="Replicator - retry snapshots"></a>Replicator - retry snapshots</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUmVwbGljYXRvci0-PlJlcGxpY2F0b3I6cmV0cnkgc25hcHNob3QgZXZlcnkgMTAwbXNcbiAgICAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0IiwiZmxvd2NoYXJ0Ijp7ImN1cnZlIjoiYmFzaXMifX0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUmVwbGljYXRvci0-PlJlcGxpY2F0b3I6cmV0cnkgc25hcHNob3QgZXZlcnkgMTAwbXNcbiAgICAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0IiwiZmxvd2NoYXJ0Ijp7ImN1cnZlIjoiYmFzaXMifX0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"></a></p><p>ä¸Šé¢æåˆ°è¿‡ï¼ŒPersistenceæœªå¿…æ€»æ˜¯å¯é çš„ï¼Œä¹Ÿå°±æ„å‘³ç€æ•°æ®æ‰©æ•£æ“ä½œä¹Ÿæœªå¿…æ€»æ˜¯æˆåŠŸï¼Œæ‰€ä»¥ï¼ŒReplicatorä¸€æ—¦å¯åŠ¨ï¼ˆè¢«Primaryåˆ›å»ºå‡ºæ¥ï¼‰ï¼Œå°±è¦å¼€å§‹ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ¥ä¸æ–­retryå°šæœªæˆåŠŸçš„æ•°æ®æ‰©æ•£æ“ä½œã€‚</p><h3 id="Replicator-Replicate"><a href="#Replicator-Replicate" class="headerlink" title="Replicator - Replicate"></a>Replicator - Replicate</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUHJpbWFyeS0-PlJlcGxpY2F0b3I6UmVwbGljYXRlKGtleSx2YWx1ZSxpZClcbiAgICBSZXBsaWNhdG9yLT4-U2Vjb25kYXJ5OlNuYXBzaG90KGtleSx2YWx1ZSxzZXEpXG4gICAgUmVwbGljYXRvci0-PlJlcGxpY2F0b3I6YWRkIGl0ZW0gdG8gaW50ZXJuYWwgcGVuZGluZyBhY2sgbGlzdFxuICAgIFJlcGxpY2F0b3ItPj5SZXBsaWNhdG9yOmluY3JlYXNlIGludGVybmFsIHNlcVxuICAgICIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QiLCJmbG93Y2hhcnQiOnsiY3VydmUiOiJiYXNpcyJ9fSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUHJpbWFyeS0-PlJlcGxpY2F0b3I6UmVwbGljYXRlKGtleSx2YWx1ZSxpZClcbiAgICBSZXBsaWNhdG9yLT4-U2Vjb25kYXJ5OlNuYXBzaG90KGtleSx2YWx1ZSxzZXEpXG4gICAgUmVwbGljYXRvci0-PlJlcGxpY2F0b3I6YWRkIGl0ZW0gdG8gaW50ZXJuYWwgcGVuZGluZyBhY2sgbGlzdFxuICAgIFJlcGxpY2F0b3ItPj5SZXBsaWNhdG9yOmluY3JlYXNlIGludGVybmFsIHNlcVxuICAgICIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QiLCJmbG93Y2hhcnQiOnsiY3VydmUiOiJiYXNpcyJ9fSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><p>ä¸Šå›¾æè¿°çš„æ˜¯å½“Primaryè¦æ±‚Replicatorå»æ‰©æ•£æ•°æ®åˆ°ä¸€ä¸ªSecondaryçš„æ—¶å€™Replicatorå¦‚ä½•å¤„ç†ã€‚<br>é‚£ä¹ˆReplicatoré¦–å…ˆå‘Šè¯‰Secondaryå»æ›´æ–°æ•°æ®ï¼Œç„¶ååœ¨è‡ªä½“å†…éƒ¨æŠŠåˆšæ‰çš„æ“ä½œè®°ä¸‹æ¥ï¼Œä»¥ä¾¿åç»­retryã€‚å¹¶ä¸”æŠŠè‡ªå·±çš„seqåŠ ä¸€ï¼Œè¿™é‡Œçš„seqå°±æ˜¯Replicatorå’ŒSecondaryä¹‹é—´çš„ä¿¡ç‰©ï¼Œç”¨æ¥ç»´æŒconsistencyã€‚</p><h3 id="Replicator-SnapshotAck"><a href="#Replicator-SnapshotAck" class="headerlink" title="Replicator - SnapshotAck"></a>Replicator - SnapshotAck</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgU2Vjb25kYXJ5LT4-UmVwbGljYXRvcjpTbmFwc2hvdEFjayhrZXksc2VxKVxuICAgIFJlcGxpY2F0b3ItPj5QcmltYXJ5OlJlcGxpY2F0ZWQoa2V5LGlkKVxuICAgIFJlcGxpY2F0b3ItPj5SZXBsaWNhdG9yOnJlbW92ZSBvbmUgaXRlbSBmcm9tIHBlbmRpbmcgYWNrIGxpc3QiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0IiwiZmxvd2NoYXJ0Ijp7ImN1cnZlIjoiYmFzaXMifX0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgU2Vjb25kYXJ5LT4-UmVwbGljYXRvcjpTbmFwc2hvdEFjayhrZXksc2VxKVxuICAgIFJlcGxpY2F0b3ItPj5QcmltYXJ5OlJlcGxpY2F0ZWQoa2V5LGlkKVxuICAgIFJlcGxpY2F0b3ItPj5SZXBsaWNhdG9yOnJlbW92ZSBvbmUgaXRlbSBmcm9tIHBlbmRpbmcgYWNrIGxpc3QiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0IiwiZmxvd2NoYXJ0Ijp7ImN1cnZlIjoiYmFzaXMifX0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"></a></p><p>ä¸Šå›¾æè¿°çš„æ˜¯Replicatoråœ¨è¢«Secondaryå‘ŠçŸ¥æ‰©æ•£æ•°æ®æˆåŠŸåå¦‚ä½•å¤„ç†ã€‚<br>å…ˆæŠŠè¿™ä¸ªå¥½æ¶ˆæ¯å‘Šè¯‰ç»™Primaryï¼Œç„¶ååœ¨retryçš„åˆ—è¡¨é‡Œé¢å»é™¤æ‰åˆšåˆšæˆåŠŸçš„è¿™æ¬¡æ“ä½œï¼Œè¿™æ ·åé¢å°±å†ä¹Ÿä¸ä¼šå†å»retryè¿™æ¬¡æ“ä½œäº†ã€‚</p><h2 id="Primary"><a href="#Primary" class="headerlink" title="Primary"></a>Primary</h2><p>æœ€åæ˜¯Primaryã€‚ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œå®ƒçš„èŒè´£æ˜¯æœ€å¤šæœ€è¾›åŠ³çš„ã€‚</p><h3 id="Primary-Insert-Remove"><a href="#Primary-Insert-Remove" class="headerlink" title="Primary - Insert&#x2F;Remove"></a>Primary - Insert&#x2F;Remove</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgQ2xpZW50LT4-UHJpbWFyeTpJbnNlcnQoa2V5LHZhbHVlLGlkKSBvciBSZW1vdmUoa2V5LGlkKVxuICAgIFByaW1hcnktPj5QcmltYXJ5OnVwZGF0ZSBpbnRlcm5hbCBrdlxuICAgIFByaW1hcnktPj5QZXJzaXN0ZW5jZTpQZXJzaXN0KGtleSx2YWx1ZSxpZClcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTphZGQgb25lIGl0ZW0gdG8gaW50ZXJuYWwgcmV0cnkgcGVyc2lzdCBsaXN0XG4gICAgUHJpbWFyeS0-PlJlcGxpY2F0b3IgMTpSZXBsaWNhdGUoa2V5LHZhbHVlLGlkKVxuICAgIFByaW1hcnktPj5QcmltYXJ5OmFkZCBvbmUgaXRlbSB0byBwZW5kaW5nIHJlcGxpY2F0ZXMgbGlzdFxuICAgIFByaW1hcnktPj5SZXBsaWNhdG9yIDI6UmVwbGljYXRlKGtleSx2YWx1ZSxpZClcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTphZGQgb25lIGl0ZW0gdG8gcGVuZGluZyByZXBsaWNhdGVzIGxpc3RcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTpzY2hlZHVsZSBmYWlsdXJlIGZvciBhZnRlciAxcyIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QiLCJmbG93Y2hhcnQiOnsiY3VydmUiOiJiYXNpcyJ9fSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgQ2xpZW50LT4-UHJpbWFyeTpJbnNlcnQoa2V5LHZhbHVlLGlkKSBvciBSZW1vdmUoa2V5LGlkKVxuICAgIFByaW1hcnktPj5QcmltYXJ5OnVwZGF0ZSBpbnRlcm5hbCBrdlxuICAgIFByaW1hcnktPj5QZXJzaXN0ZW5jZTpQZXJzaXN0KGtleSx2YWx1ZSxpZClcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTphZGQgb25lIGl0ZW0gdG8gaW50ZXJuYWwgcmV0cnkgcGVyc2lzdCBsaXN0XG4gICAgUHJpbWFyeS0-PlJlcGxpY2F0b3IgMTpSZXBsaWNhdGUoa2V5LHZhbHVlLGlkKVxuICAgIFByaW1hcnktPj5QcmltYXJ5OmFkZCBvbmUgaXRlbSB0byBwZW5kaW5nIHJlcGxpY2F0ZXMgbGlzdFxuICAgIFByaW1hcnktPj5SZXBsaWNhdG9yIDI6UmVwbGljYXRlKGtleSx2YWx1ZSxpZClcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTphZGQgb25lIGl0ZW0gdG8gcGVuZGluZyByZXBsaWNhdGVzIGxpc3RcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTpzY2hlZHVsZSBmYWlsdXJlIGZvciBhZnRlciAxcyIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QiLCJmbG93Y2hhcnQiOnsiY3VydmUiOiJiYXNpcyJ9fSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><p>ä¸Šå›¾æ˜¯Primaryå¤„ç†æ¥è‡ªClientçš„Insertæˆ–è€…Removeè¯·æ±‚ã€‚<br>å‰é¢ä¸€åŠå’ŒSecondaryå¤„ç†Snapshotæ–¹å¼åŸºæœ¬ä¸€è‡´ã€‚</p><p>ä¸åŒä¹‹å¤„å°±åœ¨äºï¼š<br>Primaryè¿˜è¦è´Ÿè´£å‘Šè¯‰æ‰€æœ‰ç°å­˜çš„Replicatorï¼ˆå›¾é‡Œåªç”»äº†ä¸¤ä¸ªï¼Œç†è®ºä¸Šå¯ä»¥æœ‰ä»»æ„Nä¸ªï¼‰å»æ‰©æ•£æ•°æ®ã€‚å¹¶ä¸”æŠŠè¿™ä¸ªæ“ä½œè®°åœ¨å†…éƒ¨çŠ¶æ€é‡Œã€‚<br>ä»¥åŠè®¾ç½®ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œä¸€ç§’é’Ÿä¹‹åï¼Œå¦‚æœæ²¡æœ‰è¾¾æˆPrimaryè‡ªå·±persistæˆåŠŸå¹¶ä¸”æ¯ä¸€ä¸ªReplicatoréƒ½æ‰©æ•£æˆåŠŸçš„çŠ¶æ€ï¼Œé‚£å°±å‘Šè¯‰Clientè¿™æ¬¡æ“ä½œæ˜¯å¤±è´¥çš„ã€‚</p><h3 id="Primary-Get"><a href="#Primary-Get" class="headerlink" title="Primary - Get"></a>Primary - Get</h3><p>è‡³äºPrimaryå¤„ç†æ¥è‡ªäºClientçš„Getè¯·æ±‚çš„å›¾å°±ä¸ç”»äº†ï¼Œä¸Secondaryå®Œå…¨ä¸€è‡´ã€‚</p><h3 id="Primary-Persisted"><a href="#Primary-Persisted" class="headerlink" title="Primary - Persisted"></a>Primary - Persisted</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUGVyc2lzdGVuY2UtPj5QcmltYXJ5OlBlcnNpc3RlZChrZXksaWQpXG4gICAgUHJpbWFyeS0-PlByaW1hcnk6IHJlbW92ZSBvbmUgaXRlbSBmcm9tIHBlbmRpbmcgcGVyc2lzdCBsaXN0XG4gICAgYWx0IFJlcGxpY2F0aW9ucyBhbGwgZmluaXNoZWRcbiAgICBQcmltYXJ5LT4-Q2xpZW50Ok9wZXJhdGlvbkFjayhpZClcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUGVyc2lzdGVuY2UtPj5QcmltYXJ5OlBlcnNpc3RlZChrZXksaWQpXG4gICAgUHJpbWFyeS0-PlByaW1hcnk6IHJlbW92ZSBvbmUgaXRlbSBmcm9tIHBlbmRpbmcgcGVyc2lzdCBsaXN0XG4gICAgYWx0IFJlcGxpY2F0aW9ucyBhbGwgZmluaXNoZWRcbiAgICBQcmltYXJ5LT4-Q2xpZW50Ok9wZXJhdGlvbkFjayhpZClcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9"></a></p><p>ä¸Šå›¾æ˜¯Primaryæ”¶åˆ°PersistenceæˆåŠŸæ¶ˆæ¯çš„æ—¶å€™è¦åšçš„äº‹æƒ…ã€‚<br>é¦–å…ˆä»pending persiståˆ—è¡¨ä¸­ç§»é™¤åˆšåˆšpersistæˆåŠŸçš„ä¸€æ¡ã€‚<br>ç„¶åæ£€æŸ¥ä¸‹æ˜¯ä¸æ˜¯æ‰€æœ‰Replicationsä¹Ÿéƒ½å®Œæˆäº†ï¼Œä¸¤ä¸ªæ¡ä»¶çš„éƒ½ç¬¦åˆçš„è¯ï¼Œå°±å‘Šè¯‰Clientè¯´æ“ä½œå®Œæˆäº†ã€‚</p><h3 id="Primary-Replicated"><a href="#Primary-Replicated" class="headerlink" title="Primary - Replicated"></a>Primary - Replicated</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUmVwbGljYXRvci0-PlByaW1hcnk6UmVwbGljYXRlZChrZXksaWQpXG4gICAgUHJpbWFyeS0-PlByaW1hcnk6IHJlbW92ZSBvbmUgaXRlbSBmcm9tIHBlbmRpbmcgcmVwbGlhdGVzXG4gICAgYWx0IEFsbCBSZXBsaWNhdGlvbnMgRmluaXNoZWRcbiAgICBhbHQgUGVyc2lzdCBmaW5pc2hlZFxuICAgIFByaW1hcnktPj5DbGllbnQ6T3BlcmF0aW9uQWNrKGlkKVxuICAgIGVuZFxuICAgIGVuZFxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgUmVwbGljYXRvci0-PlByaW1hcnk6UmVwbGljYXRlZChrZXksaWQpXG4gICAgUHJpbWFyeS0-PlByaW1hcnk6IHJlbW92ZSBvbmUgaXRlbSBmcm9tIHBlbmRpbmcgcmVwbGlhdGVzXG4gICAgYWx0IEFsbCBSZXBsaWNhdGlvbnMgRmluaXNoZWRcbiAgICBhbHQgUGVyc2lzdCBmaW5pc2hlZFxuICAgIFByaW1hcnktPj5DbGllbnQ6T3BlcmF0aW9uQWNrKGlkKVxuICAgIGVuZFxuICAgIGVuZFxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>ä¸Šå›¾æ˜¯Primaryæ”¶åˆ°æ¥è‡ªReplicatorçš„æ‰©æ•£æˆåŠŸæ¶ˆæ¯æ—¶å€™çš„å¤„ç†ã€‚<br>é¦–å…ˆæŠŠåˆšæˆåŠŸçš„è¿™ä¸€æ¡ä»pending replicatesä¸­ç§»é™¤ã€‚<br>ç„¶åæ£€æŸ¥ä¸‹æ˜¯ä¸æ˜¯æ‰€æœ‰çš„replicationséƒ½å®Œæˆäº†ï¼ˆæ¯•ç«Ÿè¿™é‡Œåªæ˜¯æ”¶åˆ°äº†ä¸€ä¸ªreplicatorçš„æ¶ˆæ¯ï¼‰ï¼Œå¹¶ä¸”persistä¹Ÿå®Œæˆäº†ï¼Œå¦‚æœä¸¤æ¡éƒ½ç¬¦åˆï¼Œå°±å‘Šè¯‰Clientè¯´æ“ä½œå®Œæˆäº†ã€‚</p><p>åˆ°è¿™é‡Œå°±æ˜æ˜¾å¯ä»¥çœ‹å‡ºï¼Œpending replicatesçš„ä½œç”¨å°±æ˜¯primaryç”¨æ¥è®°å½•å°šæœªå®Œæˆçš„replicationã€‚</p><h3 id="Primary-Replicas"><a href="#Primary-Replicas" class="headerlink" title="Primary - Replicas"></a>Primary - Replicas</h3><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgQXJiaXRlci0-PlByaW1hcnk6UmVwbGljYXMobm9kZXMpXG4gICAgbG9vcCBldmVyeSBuZXcgc2Vjb25kYXJ5XG4gICAgUHJpbWFyeS0-PlByaW1hcnk6Y3JlYXRlIG5ldyByZXBsaWNhdG9yIGZvciBuZXcgc2Vjb25kYXJ5XG4gICAgbG9vcCBldmVyeSBrdiBwYWlyXG4gICAgUHJpbWFyeS0-PlJlcGxpY2F0b3I6UmVwbGljYXRlKGtleSx2YWx1ZSxpZClcbiAgICBlbmRcbiAgICBlbmRcblxuICAgIGxvb3AgZXZlcnkgbGVmdCBzZWNvbmRhcnlcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTpyZW1vdmUgaXRlbXMgZnJvbSBwZW5kaW5nIHJlcGxpY2F0ZXNcbiAgICBhbHQgYWxsIHJlcGxpY2F0aW9ucyBmaW5pc2hlZFxuICAgIGFsdCBwZXJzaXN0IGZpbmlzaGVkXG4gICAgUHJpbWFyeS0-PkNsaWVudDpPcGVyYXRpb25BY2soaWQpXG4gICAgZW5kXG4gICAgZW5kXG4gICAgUHJpbWFyeS0-PlByaW1hcnk6ZGVzdHJveSBpdHMgbWF0Y2hpbmcgcmVwbGljYXRvclxuICAgIFxuICAgIGVuZFxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"><img data-src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgQXJiaXRlci0-PlByaW1hcnk6UmVwbGljYXMobm9kZXMpXG4gICAgbG9vcCBldmVyeSBuZXcgc2Vjb25kYXJ5XG4gICAgUHJpbWFyeS0-PlByaW1hcnk6Y3JlYXRlIG5ldyByZXBsaWNhdG9yIGZvciBuZXcgc2Vjb25kYXJ5XG4gICAgbG9vcCBldmVyeSBrdiBwYWlyXG4gICAgUHJpbWFyeS0-PlJlcGxpY2F0b3I6UmVwbGljYXRlKGtleSx2YWx1ZSxpZClcbiAgICBlbmRcbiAgICBlbmRcblxuICAgIGxvb3AgZXZlcnkgbGVmdCBzZWNvbmRhcnlcbiAgICBQcmltYXJ5LT4-UHJpbWFyeTpyZW1vdmUgaXRlbXMgZnJvbSBwZW5kaW5nIHJlcGxpY2F0ZXNcbiAgICBhbHQgYWxsIHJlcGxpY2F0aW9ucyBmaW5pc2hlZFxuICAgIGFsdCBwZXJzaXN0IGZpbmlzaGVkXG4gICAgUHJpbWFyeS0-PkNsaWVudDpPcGVyYXRpb25BY2soaWQpXG4gICAgZW5kXG4gICAgZW5kXG4gICAgUHJpbWFyeS0-PlByaW1hcnk6ZGVzdHJveSBpdHMgbWF0Y2hpbmcgcmVwbGljYXRvclxuICAgIFxuICAgIGVuZFxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImZvcmVzdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>æœ€åä¸€å¼ å›¾ï¼Œæè¿°çš„æ˜¯å½“Arbiterå‘ŠçŸ¥Primaryé›†ç¾¤ä¸­æœ‰å˜åŠ¨æ—¶ï¼ŒPrimaryçš„å¤„ç†æ–¹å¼ã€‚</p><p>å¯¹äºæ–°åŠ å…¥çš„Secondaryï¼Œç»™å®ƒä»¬æ¯ä¸ªéƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„Replicatorã€‚ç„¶åé€šè¿‡ReplicatoræŠŠæ‰€æœ‰ç°å­˜çš„kvæ•°æ®éƒ½ç”©ç»™æ–°åŠ å…¥çš„Secondaryã€‚ç±»ä¼¼äºç»™æ’ç­ç”Ÿ<strong>è¡¥è¯¾</strong>ã€‚</p><p>å¯¹äºç¦»å¼€é›†ç¾¤çš„Secondaryï¼ŒæŠŠå’Œå®ƒä»¬ç›¸å…³çš„pending replicateséƒ½åˆ æ‰ï¼Œæ—¢ç„¶å®ƒç¦»å¼€äº†ï¼Œé‚£å°±æ²¡å¿…è¦ç­‰å®ƒäº†ã€‚åˆ é™¤æ‰ä¹‹åé©¬ä¸Šæ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯replicationså’Œpersistéƒ½å®Œäº†ï¼ˆå› ä¸ºæœ‰å¯èƒ½å½“å‰ç­‰çš„å°±æ˜¯è¿™ä¸ªç¦»å¼€çš„Secondaryï¼Œå®ƒä¸€ç¦»å¼€ï¼Œæ²¡æœ‰åˆ«çš„éœ€è¦ç­‰çš„äº†ï¼‰ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œé‚£å°±å‘Šè¯‰Clientæ›´æ–°æˆåŠŸäº†ã€‚<br>æœ€åï¼Œé”€æ¯æ‰å¯¹åº”çš„replicatorã€‚è¿™ä¸ªSecondaryçš„å†å²ä½¿å‘½å°±ç®—ç»ˆç»“äº†ã€‚å¦‚æœåç»­è¿™ä¸ªSecondaryåˆåŠ å…¥å›æ¥äº†ï¼Œé‚£èµ°çš„å°±æ˜¯ä¸Šé¢ä¸€æ®µ<strong>è¡¥è¯¾</strong>çš„å¤„ç†ã€‚</p><h1 id="OK"><a href="#OK" class="headerlink" title="OK"></a>OK</h1><p>è™½ç„¶è®²çš„æ˜¯ä¸€ä¸ªåŠ äº†è‹¥å¹²é™åˆ¶çš„åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ï¼Œä½†æ˜¯è¿˜æ˜¯ç”¨äº†åå››å¼ å›¾ã€‚</p><p>è¿™äº›å›¾é‡Œæ²¡èƒ½ä½“ç°åˆ°çš„ä¸€ç‚¹æ˜¯å…³äºå¼‚æ­¥çš„é—®é¢˜ï¼Œåœ¨æœ€åè¡¥å……ä¸€å¥ï¼š<br>é™¤äº†Clientä¹‹å¤–ï¼Œä»¥ä¸Šæ‰€æœ‰æåˆ°çš„å‚ä¸è€…ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ä¸¥æ ¼å•çº¿ç¨‹çš„ï¼Œä¸ä¼šåœ¨ä»»ä½•æ—¶å€™åŒæ—¶åšä¸¤ä»¶äº‹ã€‚<br>å®é™…çš„å®ç°ä»£ç ä¸­ï¼Œæ˜¯ç”¨<strong>akka</strong>å†™çš„ï¼Œè¿™äº›å‚ä¸è€…åšçš„å¤šæ•°éƒ½æ˜¯<strong>async message passing</strong>çš„å·¥ä½œã€‚<br>ç”±äºè¿™æ˜¯ä¸€é—¨è¯¾çš„ä½œä¸šé¢˜ï¼Œæ‰€ä»¥å…·ä½“å®ç°ä»£ç å°±ä¸æåŠäº†ã€‚</p><p>å¸Œæœ›è¿™äº›å›¾è¡¨å¯¹äºç†è§£åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ï¼ˆDistributed Key-Value Storeï¼‰ä¼šæœ‰ä¸€äº›å¸®åŠ©ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ï¼ˆDistributed Key-Value Storeï¼‰å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°é²œçš„ç©æ„ã€‚&lt;br&gt;å¸¸è§çš„Redisï¼ŒMemcacheç­‰ç­‰</summary>
      
    
    
    
    
    <category term="Reactive" scheme="https://cuipengfei.me/tags/Reactive/"/>
    
    <category term="åˆ†å¸ƒå¼" scheme="https://cuipengfei.me/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>[è¯‘] ç±» vs æ•°æ®ç»“æ„</title>
    <link href="https://cuipengfei.me/blog/2020/02/15/classes-vs-data-structures/"/>
    <id>https://cuipengfei.me/blog/2020/02/15/classes-vs-data-structures/</id>
    <published>2020-02-15T15:44:13.000Z</published>
    <updated>2020-02-15T15:44:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡ä½œè€…ï¼šRobert C. Martin (Uncle Bob)<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.cleancoder.com/uncle-bob/2019/06/16/ObjectsAndDataStructures.html">https://blog.cleancoder.com/uncle-bob/2019/06/16/ObjectsAndDataStructures.html</a></p><blockquote><p>ç±»æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>ç±»æ˜¯ä¸€ç»„ç›¸ä¼¼å¯¹è±¡çš„èŒƒæœ¬ã€‚</p><blockquote><p>å¯¹è±¡åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p></blockquote><p>å¯¹è±¡æ˜¯å¯¹å°è£…çš„æ•°æ®è¿›è¡Œæ“ä½œçš„ä¸€ç»„å‡½æ•°ã€‚</p><blockquote><p>ä¸å¦‚è¿™ä¹ˆè¯´:å¯¹è±¡æ˜¯å¯¹éšå«æ•°æ®è¿›è¡Œæ“ä½œçš„ä¸€ç»„å‡½æ•°ã€‚</p></blockquote><p>éšå¼æ•°æ®ï¼Ÿä»€ä¹ˆæ„æ€ï¼Ÿ</p><blockquote><p>å¯¹è±¡çš„å‡½æ•°éšå«æ„å‘³ç€æŸäº›æ•°æ®æ˜¯å­˜åœ¨çš„ã€‚ä½†æ˜¯è¯¥æ•°æ®æ— æ³•åœ¨å¯¹è±¡å¤–éƒ¨ç›´æ¥è®¿é—®æˆ–çœ‹åˆ°ã€‚</p></blockquote><p>æ•°æ®ä¸æ˜¯å¯¹è±¡å†…éƒ¨çš„å—ï¼Ÿ</p><blockquote><p>å¯èƒ½æ˜¯; ä½†æ²¡æœ‰è§„åˆ™è¯´å¿…é¡»å¦‚æ­¤ã€‚ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸è¿‡æ˜¯ä¸€ç»„å‡½æ•°ã€‚è¿™äº›å‡½æ•°æ‰€éœ€è¦çš„æ•°æ®å¿…é¡»å­˜åœ¨ï¼Œä½†æ˜¯ç”¨æˆ·ä¸çŸ¥é“è¯¥æ•°æ®çš„ä½ç½®ã€‚</p></blockquote><p>å—¯ï¼Œå¥½ï¼Œæˆ‘åŒæ„ã€‚</p><blockquote><p>å¥½ã€‚ç°åœ¨è¯´è¯´ï¼Œæ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>æ•°æ®ç»“æ„æ˜¯ä¸€ç»„å†…èšçš„æ•°æ®ã€‚</p><blockquote><p>æˆ–è€…ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°æ®ç»“æ„æ˜¯ç”±éšå«å‡½æ•°æ“ä½œçš„ä¸€ç»„æ•°æ®ã€‚</p></blockquote><p>å¥½çš„ï¼Œå¥½çš„ã€‚æˆ‘çŸ¥é“äº†ã€‚æ•°æ®ç»“æ„æ²¡æœ‰å®šä¹‰å¯¹æ•°æ®ç»“æ„è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œä½†æ˜¯æ•°æ®ç»“æ„çš„å­˜åœ¨æ„å‘³ç€æŸäº›å‡½æ•°å¿…é¡»å­˜åœ¨ã€‚</p><blockquote><p>å¯¹ã€‚ä½ æœ‰ä»€ä¹ˆå‘ç°æ²¡æœ‰ï¼Ÿ</p></blockquote><p>å¯¹è±¡å’Œæ•°æ®ç»“æ„ä¼¼ä¹æ˜¯å½¼æ­¤ç›¸åçš„ã€‚</p><blockquote><p>ç¡®å®ã€‚å®ƒä»¬æ˜¯å½¼æ­¤äº’è¡¥çš„ã€‚</p><ul><li>å¯¹è±¡æ˜¯å¯¹éšå¼æ•°æ®è¿›è¡Œæ“ä½œçš„ä¸€ç»„å‡½æ•°ã€‚</li><li>æ•°æ®ç»“æ„æ˜¯è¢«éšå¼å‡½æ•°æ“ä½œçš„ä¸€ç»„æ•°æ®ã€‚</li></ul></blockquote><p>å“‡ï¼Œæ‰€ä»¥å¯¹è±¡ä¸æ˜¯æ•°æ®ç»“æ„äº†ï¼Ÿ</p><blockquote><p>è¯´å¯¹äº†ã€‚å¯¹è±¡ä¸æ•°æ®ç»“æ„ç›¸åã€‚</p></blockquote><p>é‚£ä¹ˆDTOï¼ˆData Transfer Objectï¼‰ä¸æ˜¯å¯¹è±¡å—ï¼Ÿ</p><blockquote><p>DTOæ˜¯æ•°æ®ç»“æ„ã€‚</p></blockquote><p>æ‰€ä»¥æ•°æ®åº“è¡¨ä¹Ÿä¸æ˜¯å¯¹è±¡å—ï¼Ÿ</p><blockquote><p>æ•°æ®åº“åŒ…å«æ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚</p></blockquote><p>å¯æ˜¯ï¼Œç­‰ç­‰ã€‚ORM(Object Relational Mapper)ä¸æ˜¯å°†æ•°æ®åº“è¡¨æ˜ å°„åˆ°å¯¹è±¡å—ï¼Ÿ</p><blockquote><p>å½“ç„¶ä¸æ˜¯ã€‚æ•°æ®åº“è¡¨å’Œå¯¹è±¡ä¹‹é—´æ²¡æœ‰æ˜ å°„ã€‚æ•°æ®åº“è¡¨æ˜¯æ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯å¯¹è±¡ã€‚</p></blockquote><p>é‚£ä¹ˆï¼ŒORMç®—æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ</p><blockquote><p>åœ¨æ•°æ®ç»“æ„ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</p></blockquote><p>ORMä¸å¯¹è±¡æ— å…³æ˜¯å—ï¼Ÿ</p><blockquote><p>å®Œå…¨æ— å…³ï¼ŒORMå…¶å®æ˜¯ä¸å­˜åœ¨çš„ã€‚å› ä¸ºæ•°æ®åº“è¡¨å’Œå¯¹è±¡ä¹‹é—´æ²¡æœ‰æ˜ å°„ã€‚</p></blockquote><p>ä½†æ˜¯æˆ‘è¿˜ä»¥ä¸ºORMä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸šåŠ¡å¯¹è±¡å‘¢ã€‚</p><blockquote><p>ä¸å¯¹ï¼ŒORMä¼šæå–ä¸šåŠ¡å¯¹è±¡æ‰€æ“ä½œçš„æ•°æ®ã€‚è¯¥æ•°æ®åŒ…å«åœ¨ORMåŠ è½½çš„æ•°æ®ç»“æ„ä¸­ã€‚</p></blockquote><p>ä½†æ˜¯ï¼Œä¸šåŠ¡å¯¹è±¡æ˜¯ä¸æ˜¯ä¼šåŒ…å«è¯¥æ•°æ®ç»“æ„å•Šï¼Ÿ</p><blockquote><p>å®ƒå¯èƒ½åŒ…å«ï¼Œä¹Ÿå¯èƒ½ä¸åŒ…å«ã€‚ä½†æ˜¯è¿™ä¸å…³ORMçš„äº‹ã€‚</p></blockquote><p>è¿™ç§è¯´æ³•ä¼¼ä¹æ˜¯å’¬æ–‡åš¼å­—ï¼Œä¸å¤ªé‡è¦ã€‚</p><blockquote><p>ä¸ï¼Œè¿™å…·æœ‰é‡å¤§æ„ä¹‰ã€‚</p></blockquote><p>æ€ä¹ˆè®²ï¼Ÿ</p><blockquote><p>ä¾‹å¦‚æ•°æ®åº“schemaçš„è®¾è®¡ä¸ä¸šåŠ¡å¯¹è±¡çš„è®¾è®¡ã€‚ä¸šåŠ¡å¯¹è±¡å®šä¹‰ä¸šåŠ¡è¡Œä¸ºçš„ç»“æ„ã€‚æ•°æ®åº“schemaå®šä¹‰ä¸šåŠ¡æ•°æ®çš„ç»“æ„ã€‚è¿™ä¸¤ä¸ªç»“æ„å—åˆ°éå¸¸ä¸åŒçš„åŠ›çš„çº¦æŸã€‚ä¸šåŠ¡æ•°æ®çš„ç»“æ„ä¸ä¸€å®šæ˜¯ä¸šåŠ¡è¡Œä¸ºçš„æœ€ä½³ç»“æ„ã€‚</p></blockquote><p>å—¯ï¼Ÿä»¤äººå›°æƒ‘ã€‚</p><blockquote><p>è¿™æ ·æƒ³å§ã€‚æ•°æ®åº“schemaä¸ä»…ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºæœåŠ¡ï¼›å®ƒå¿…é¡»æœåŠ¡äºæ•´ä¸ªä¼ä¸šã€‚å› æ­¤ï¼Œè¯¥æ•°æ®çš„ç»“æ„æ˜¯è®¸å¤šä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´çš„æŠ˜è¡·æ–¹æ¡ˆã€‚</p></blockquote><p>å¥½ï¼Œæˆ‘çŸ¥é“äº†ã€‚</p><blockquote><p>å¥½ã€‚ä½†æ˜¯ç°åœ¨æ¥è¯´å•ç‹¬çš„åº”ç”¨ç¨‹åºã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ¨¡å‹æè¿°äº†è¯¥åº”ç”¨ç¨‹åºçš„è¡Œä¸ºçš„æ„é€ æ–¹å¼ã€‚æ¯ä¸ªåº”ç”¨ç¨‹åºå°†å…·æœ‰ä¸åŒçš„å¯¹è±¡æ¨¡å‹ï¼Œå¹¶æ ¹æ®è¯¥åº”ç”¨ç¨‹åºçš„è¡Œä¸ºè¿›è¡Œè°ƒæ•´ã€‚</p></blockquote><p>å“¦ï¼Œæˆ‘æ‡‚äº†ã€‚ç”±äºæ•°æ®åº“schemaæ˜¯å„ç§åº”ç”¨ç¨‹åºçš„æŠ˜è¡·æ–¹æ¡ˆï¼Œå› æ­¤è¯¥schemaå°†ä¸ç¬¦åˆä»»ä½•ç‰¹å®šåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ¨¡å‹ã€‚</p><blockquote><p>å¯¹ï¼å¯¹è±¡å’Œæ•°æ®ç»“æ„å—åˆ°éå¸¸ä¸åŒçš„ä½œç”¨åŠ›çš„çº¦æŸã€‚ä»–ä»¬å¾ˆå°‘èƒ½å¯¹é½ã€‚äººä»¬ä¹ æƒ¯ç§°å…¶ä¸ºå¯¹è±¡&#x2F;å…³ç³»é˜»æŠ—å¤±è¡¡ï¼ˆObject&#x2F;Relational impedance mismatchï¼‰ã€‚</p></blockquote><p>æˆ‘å¬è¯´è¿‡ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºé˜»æŠ—å¤±è¡¡æ˜¯ç”±ORMè§£å†³çš„ã€‚</p><blockquote><p>ç°åœ¨ä½ çŸ¥é“ä¸æ˜¯è¿™æ ·çš„äº†ã€‚å› ä¸ºå¯¹è±¡å’Œæ•°æ®ç»“æ„æ˜¯äº’è¡¥çš„ï¼Œè€Œä¸æ˜¯åŒæ„çš„ï¼Œæ‰€ä»¥æ²¡æœ‰é˜»æŠ—å¤±é…ã€‚</p></blockquote><p>ä»€ä¹ˆï¼Ÿ</p><blockquote><p>å®ƒä»¬æ˜¯å¯¹ç«‹çš„ï¼Œä¸æ˜¯ç›¸ä¼¼çš„å®ä½“ã€‚</p></blockquote><p>ç›¸åå—?</p><blockquote><p>æ˜¯çš„ï¼Œä»¥ä¸€ç§éå¸¸æœ‰è¶£çš„æ–¹å¼ã€‚ä½ ä¼šçœ‹åˆ°ï¼Œå¯¹è±¡å’Œæ•°æ®ç»“æ„æ„å‘³ç€ç›¸åçš„æ§åˆ¶ç»“æ„ã€‚</p></blockquote><p>ç­‰ä¸€ä¸‹ï¼Œä»€ä¹ˆ?</p><blockquote><p>è€ƒè™‘ä¸€ç»„ç¬¦åˆå…¬å…±æ¥å£çš„ç±»ã€‚ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹è¡¨ç¤ºäºŒç»´å½¢çŠ¶çš„ç±»ï¼Œè¿™äº›ç±»éƒ½å…·æœ‰è®¡ç®—areaé¢ç§¯å’Œperimeterå‘¨é•¿çš„å‡½æ•°ã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆæ¯ä¸ªè½¯ä»¶ç¤ºä¾‹éƒ½æ€»æ˜¯æåˆ°å½¢çŠ¶ï¼Ÿ</p><blockquote><p>è®©æˆ‘ä»¬åªè€ƒè™‘ä¸¤ç§ä¸åŒçš„ç±»å‹ï¼šSquareå’ŒCircleã€‚åº”è¯¥å¾ˆå®¹æ˜“çœ‹æ¸…æ¥šçš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªç±»çš„areaå’Œpermimeterå‡½æ•°åœ¨ä¸åŒçš„éšå¼æ•°æ®ç»“æ„ä¸Šè¿è¡Œã€‚è¿˜åº”è¯¥æ¸…æ¥šçš„æ˜¯ï¼Œè°ƒç”¨è¿™äº›å‡½æ•°çš„æ–¹å¼æ˜¯é€šè¿‡åŠ¨æ€å¤šæ€æ€§è¿›è¡Œçš„ã€‚</p></blockquote><p>ç­‰ä¸‹ï¼Œæ…¢ä¸€ç‚¹ï¼Œä»€ä¹ˆï¼Ÿ</p><blockquote><p>æœ‰ä¸¤ç§ä¸åŒçš„areaå‡½æ•°ï¼›ä¸€ä¸ªæ˜¯Squareçš„ï¼Œå¦ä¸€ä¸ªæ˜¯Circleçš„ã€‚å½“è°ƒç”¨è€…åœ¨ç‰¹å®šå¯¹è±¡ä¸Šè°ƒç”¨areaå‡½æ•°æ—¶ï¼Œåªæœ‰è¯¥å¯¹è±¡æ‰çŸ¥é“è¦è°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºåŠ¨æ€å¤šæ€æ€§ã€‚</p></blockquote><p>å¥½ã€‚å½“ç„¶ã€‚è¯¥å¯¹è±¡çŸ¥é“å…¶æ–¹æ³•çš„å®ç°ã€‚å½“ç„¶ã€‚</p><blockquote><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†è¿™äº›å¯¹è±¡æ¢æˆæ•°æ®ç»“æ„ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æ ‡ç­¾è”åˆï¼ˆdiscriminated unionï¼‰ã€‚</p></blockquote><p>æ ‡ç­¾è”åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>æ ‡ç­¾è”åˆã€‚åœ¨æˆ‘ä»¬å½“å‰è®¨è®ºçš„æƒ…å†µä¸‹ï¼Œè¿™åªæ˜¯ä¸¤ä¸ªä¸åŒçš„æ•°æ®ç»“æ„ã€‚ä¸€ä¸ªæ˜¯Squareå¦ä¸€ä¸ªæ˜¯Circleã€‚Circleæ•°æ®ç»“æ„æœ‰ä¸€ä¸ªåœ†å¿ƒå’ŒåŠå¾„ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªå°†å…¶æ ‡è¯†ä¸ºCircleçš„ç±»å‹ç ã€‚</p></blockquote><p>ä½ æ˜¯è¯´åƒæšä¸¾ï¼Ÿ</p><blockquote><p>å½“ç„¶ã€‚Squareæ•°æ®ç»“æ„æœ‰å·¦é¡¶ç‚¹ï¼Œå’Œè¾¹é•¿ã€‚å®ƒè¿˜æœ‰ç±»å‹åŒºåˆ†ç¬¦(type discriminator)â€“æšä¸¾ã€‚</p></blockquote><p>å¥½ã€‚å…·æœ‰ç±»å‹ç çš„ä¸¤ä¸ªæ•°æ®ç»“æ„ã€‚</p><blockquote><p>å¯¹ã€‚ç°åœ¨è€ƒè™‘areaå‡½æ•°ã€‚å®ƒè¦æœ‰ä¸€ä¸ªswitchè¯­å¥ï¼Œä¸æ˜¯å—ï¼Ÿ</p></blockquote><p>å—¯ï¼Œå½“ç„¶ï¼Œå¯¹åº”ä¸¤ç§ä¸åŒçš„æƒ…å†µã€‚ä¸€ä¸ªç”¨äºSquareå¦ä¸€ä¸ªç”¨äºCircleã€‚å¹¶ä¸”perimeterå‡½æ•°ä¹Ÿéœ€è¦ç±»ä¼¼çš„switchè¯­å¥ã€‚</p><blockquote><p>å¯¹ã€‚ç°åœ¨è€ƒè™‘è¿™ä¸¤ç§åœºæ™¯çš„ç»“æ„ã€‚åœ¨å¯¹è±¡åœºæ™¯ä¸­ï¼Œareaå‡½æ•°çš„ä¸¤ä¸ªå®ç°å½¼æ­¤ç‹¬ç«‹ï¼Œå¹¶ä¸”ï¼ˆåœ¨æŸç§æ„ä¹‰ä¸Šï¼‰ä»å±äºç±»å‹ã€‚Squareçš„areaå‡½æ•°å±äºSquareï¼ŒCircleçš„areaå‡½æ•°å±äºCircleã€‚</p></blockquote><p>å¥½çš„ï¼Œæˆ‘çŸ¥é“æ‚¨çš„æ„æ€äº†ã€‚åœ¨æ•°æ®ç»“æ„åœºæ™¯ä¸­ï¼Œareaçš„ä¸¤ä¸ªå®ç°åœ¨åŒä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå®ƒä»¬å¹¶ä¸â€œä»å±äºâ€ç±»å‹ã€‚</p><blockquote><p>æ¥ä¸‹æ¥ä¼šæ›´æœ‰è¶£ã€‚å¦‚æœè¦å°†Triangleç±»å‹æ·»åŠ åˆ°å¯¹è±¡æ–¹æ¡ˆä¸­ï¼Œå¿…é¡»æ›´æ”¹å“ªäº›ä»£ç ï¼Ÿ</p></blockquote><p>æ— éœ€æ›´æ”¹ä»£ç ã€‚æ‚¨åªéœ€åˆ›å»ºæ–°Triangleç±»ã€‚å“¦ï¼Œæˆ‘æƒ³å¿…é¡»æ›´æ”¹å®ä¾‹çš„åˆ›å»ºè€…ã€‚</p><blockquote><p>å¯¹ã€‚å› æ­¤ï¼Œå½“æ·»åŠ æ–°ç±»å‹æ—¶ï¼Œå‡ ä¹æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚ç°åœ¨ï¼Œå‡è®¾æ‚¨è¦æ·»åŠ ä¸€ä¸ªæ–°å‡½æ•°-æ¯”å¦‚centerå‡½æ•°ã€‚</p></blockquote><p>é‚£ä¹ˆï¼Œä½ å°±å¿…é¡»åœ¨Circleï¼ŒSquareï¼Œå’ŒTriangleè¿™ä¸‰ä¸ªç±»é‡Œé¢éƒ½å»æ·»åŠ centerå‡½æ•°ã€‚</p><blockquote><p>å¥½ã€‚å› æ­¤æ·»åŠ æ–°å‡½æ•°å¾ˆå›°éš¾ï¼Œå¿…é¡»æ›´æ”¹æ¯ä¸ªç±»ã€‚</p></blockquote><p>ä½†æ˜¯åœ¨æ•°æ®ç»“æ„ä¸Šå´æœ‰æ‰€ä¸åŒã€‚ä¸ºäº†æ·»åŠ Triangleï¼Œå¿…é¡»æ›´æ”¹æ¯ä¸ªå‡½æ•°ä»¥å°†Triangleçš„caseæ·»åŠ åˆ°switchè¯­å¥é‡Œé¢å»ã€‚</p><blockquote><p>å¯¹ã€‚æ·»åŠ æ–°ç±»å‹å¾ˆå›°éš¾ï¼Œå¿…é¡»æ›´æ”¹æ¯ä¸ªå‡½æ•°ã€‚</p></blockquote><p>ä½†æ˜¯ï¼Œå½“æ‚¨æ·»åŠ æ–°centerå‡½æ•°æ—¶ï¼Œæ— éœ€æ›´æ”¹ä»»ä½•ç°å­˜ä»£ç ã€‚</p><blockquote><p>å¯¹ã€‚æ·»åŠ æ–°å‡½æ•°å¾ˆå®¹æ˜“ã€‚</p></blockquote><p>å“‡ã€‚æ°æ°ç›¸åã€‚</p><blockquote><p>å¯¹ã€‚æˆ‘ä»¬æ¥å¤ä¹ ï¼š</p><ul><li>å‘ä¸€ç»„ç±»ä¸­æ·»åŠ æ–°å‡½æ•°å¾ˆå›°éš¾ï¼Œå¿…é¡»æ›´æ”¹æ¯ä¸ªç±»ã€‚</li><li>å‘ä¸€ç»„æ•°æ®ç»“æ„ä¸­æ·»åŠ æ–°å‡½æ•°å¾ˆå®¹æ˜“ï¼Œåªéœ€æ·»åŠ å‡½æ•°ï¼Œæ— éœ€å…¶ä»–æ”¹å˜ã€‚</li><li>å‘ä¸€ç»„ç±»ä¸­æ·»åŠ æ–°ç±»å‹å¾ˆå®¹æ˜“ï¼Œåªéœ€æ·»åŠ æ–°ç±»å³å¯ã€‚</li><li>å‘ä¸€ç»„æ•°æ®ç»“æ„ä¸­æ·»åŠ æ–°ç±»å‹å¾ˆå›°éš¾ï¼Œå¿…é¡»æ›´æ”¹æ¯ä¸ªå‡½æ•°ã€‚</li></ul></blockquote><p>æ˜¯çš„ï¼Œç›¸åã€‚ä»¥ä¸€ç§æœ‰è¶£çš„æ–¹å¼å¯¹ç«‹ã€‚æˆ‘çš„æ„æ€æ˜¯ï¼Œå¦‚æœæ‚¨çŸ¥é“è¦å‘ä¸€ç»„ç±»å‹ä¸­æ·»åŠ æ–°å‡½æ•°ï¼Œåˆ™åº”è¯¥ä½¿ç”¨æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨çŸ¥é“è¦æ·»åŠ æ–°çš„ç±»å‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ç±»ã€‚</p><blockquote><p>è¯´å¾—å¥½ï¼ä½†æ˜¯ï¼Œä»Šå¤©æˆ‘ä»¬è¿˜æœ‰æœ€åä¸€ä»¶äº‹è¦è€ƒè™‘ã€‚æ•°æ®ç»“æ„å’Œç±»çš„å¯¹ç«‹è¿˜æœ‰å¦ä¸€ç§æ–¹å¼ï¼Œä¸ä¾èµ–å…³ç³»æœ‰å…³ã€‚</p></blockquote><p>ä¾èµ–å…³ç³»ï¼Ÿ</p><blockquote><p>æ˜¯çš„ï¼Œæºä»£ç çš„ä¾èµ–æ–¹å‘ã€‚</p></blockquote><p>å…·ä½“æ¥è¯´å‘¢ï¼Ÿ</p><blockquote><p>è€ƒè™‘æ•°æ®ç»“æ„çš„æƒ…å†µã€‚æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªswitchè¯­å¥ï¼Œè¯¥è¯­å¥æ ¹æ®ç±»å‹ç é€‰æ‹©é€‚å½“çš„å®ç°ã€‚</p></blockquote><p>å¯¹ï¼Œç„¶åï¼Ÿ</p><blockquote><p>è€ƒè™‘å¯¹areaå‡½æ•°çš„è°ƒç”¨ã€‚è°ƒç”¨è€…ä¾èµ–äºareaå‡½æ•°ï¼Œè€Œareaå‡½æ•°ä¾èµ–äºæ¯ä¸ªç‰¹å®šçš„å®ç°ã€‚</p></blockquote><p>æ‚¨æ‰€è¯´çš„â€œä¾èµ–â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p><blockquote><p>æƒ³è±¡ä¸€ä¸‹ï¼Œareaçš„æ¯ä¸ªå®ç°éƒ½è¢«å†™å…¥äº†å•ç‹¬çš„å‡½æ•°ä¸­ã€‚æ‰€ä»¥æœ‰circleAreaï¼ŒsquareAreaå’ŒtriangleAreaã€‚</p></blockquote><p>OKï¼Œswitchè¯­å¥ä¼šè°ƒç”¨è¿™å‡ ä¸ªå‡½æ•°ã€‚</p><blockquote><p>æƒ³è±¡ä¸€ä¸‹è¿™å‡ ä¸ªå‡½æ•°åœ¨ä¸åŒçš„æºæ–‡ä»¶ä¸­ã€‚</p></blockquote><p>é‚£ä¹ˆï¼ŒåŒ…å«æœ‰switchè¯­å¥çš„æºæ–‡ä»¶å°±å¿…é¡»importï¼Œuseæˆ–includeè¿™äº›æºæ–‡ä»¶ã€‚</p><blockquote><p>å¯¹ã€‚è¿™å°±æ˜¯æºä»£ç ä¾èµ–æ€§ã€‚ä¸€ä¸ªæºæ–‡ä»¶ä¾èµ–äºå¦ä¸€ä¸ªæºæ–‡ä»¶ã€‚è¿™ç§ä¾èµ–çš„æ–¹å‘æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>å¸¦æœ‰switchè¯­å¥çš„æºæ–‡ä»¶ä¾èµ–äºåŒ…å«å®ç°çš„æºæ–‡ä»¶ã€‚</p><blockquote><p>é‚£areaå‡½æ•°çš„è°ƒç”¨è€…å‘¢ï¼Ÿ</p></blockquote><p>areaå‡½æ•°çš„è°ƒç”¨è€…ä¾èµ–äºåŒ…å«switchè¯­å¥çš„æºæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶çš„switchè¯­å¥ä¾èµ–äºå„ä¸ªå®ç°ã€‚</p><blockquote><p>æ­£ç¡®ã€‚ä»è°ƒç”¨è€…åˆ°å®ç°ï¼Œæ‰€æœ‰æºæ–‡ä»¶ä¾èµ–æ€§éƒ½æŒ‡å‘è°ƒç”¨çš„æ–¹å‘ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨å¯¹å…¶ä¸­çš„ä¸€ç§å®ç°è¿›è¡Œäº†å¾®å°çš„æ›´æ”¹â€¦â€¦</p></blockquote><p>å¥½çš„ï¼Œæˆ‘çŸ¥é“æ‚¨çš„æ„æ€ã€‚å¯¹ä»»ä½•ä¸€ç§å®ç°çš„æ›´æ”¹å°†å¯¼è‡´é‡æ–°ç¼–è¯‘å¸¦æœ‰switchè¯­å¥çš„æºæ–‡ä»¶ï¼Œä»è€Œå¯¼è‡´æ¯ä¸ªè°ƒç”¨switchè¯­å¥çš„äººé‡æ–°ç¼–è¯‘ã€‚</p><blockquote><p>å¯¹ã€‚è‡³å°‘å¯¹äºä¾èµ–äºæºæ–‡ä»¶çš„æ›´æ”¹æ—¥æœŸæ¥ç¡®å®šåº”ç¼–è¯‘å“ªäº›æ¨¡å—çš„è¯­è¨€ç³»ç»Ÿè€Œè¨€ï¼Œè¿™ä¹ˆè¯´æ˜¯æ­£ç¡®çš„ã€‚</p></blockquote><p>å‡ ä¹æ‰€æœ‰ä½¿ç”¨é™æ€ç±»å‹çš„è¯­è¨€ï¼Œå¯¹å—ï¼Ÿ</p><blockquote><p>æ˜¯çš„ï¼Œæœ‰äº›éé™æ€çš„ä¹Ÿä¼šã€‚</p></blockquote><p>å¤§é‡çš„é‡æ–°ç¼–è¯‘ã€‚</p><blockquote><p>è¿˜æœ‰å¤§é‡çš„é‡æ–°éƒ¨ç½²ã€‚</p></blockquote><p>æ˜¯çš„ï¼Œä½†æ˜¯åœ¨ç±»çš„æƒ…å†µä¸‹è¿™æ˜¯ç›¸åçš„å—ï¼Ÿ</p><blockquote><p>æ˜¯çš„ï¼Œå› ä¸ºareaå‡½æ•°çš„è°ƒç”¨è€…ä¾èµ–äºæ¥å£ï¼Œè€Œå‡½æ•°å®ç°ä¹Ÿä¾èµ–äºè¯¥æ¥å£ã€‚</p></blockquote><p>æˆ‘æ˜ç™½ä½ çš„æ„æ€äº†ã€‚Squareç±»çš„æºæ–‡ä»¶å°†importï¼Œuseæˆ–include Shapeæ¥å£çš„æºæ–‡ä»¶ã€‚</p><blockquote><p>å¯¹ã€‚å®ç°çš„æºæ–‡ä»¶æŒ‡å‘è°ƒç”¨çš„ç›¸åæ–¹å‘ã€‚ä»–ä»¬ä»å®ç°æŒ‡å‘è°ƒç”¨è€…ã€‚è‡³å°‘å¯¹äºé™æ€ç±»å‹çš„è¯­è¨€æ¥è¯´æ˜¯è¿™æ ·ã€‚å¯¹äºåŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œareaå‡½æ•°çš„è°ƒç”¨è€…å®Œå…¨ä¸ä¾èµ–ä»»ä½•å†…å®¹ã€‚é“¾æ¥åœ¨è¿è¡Œæ—¶ç¡®å®šã€‚</p></blockquote><p>å¯¹ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨æ›´æ”¹å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼â€¦</p><blockquote><p>ä»…æ›´æ”¹çš„æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘æˆ–é‡æ–°éƒ¨ç½²ã€‚</p></blockquote><p>é‚£æ˜¯å› ä¸ºæºæ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»æŒ‡å‘è°ƒç”¨æ–¹å‘çš„åæ–¹å‘ã€‚</p><blockquote><p>å¯¹ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºä¾èµ–å€’ç½®ã€‚</p></blockquote><p>å¥½ï¼Œè®©æˆ‘çœ‹çœ‹æˆ‘æ˜¯å¦å¯ä»¥æ€»ç»“ä¸€ä¸‹ã€‚ç±»å’Œæ•°æ®ç»“æ„åœ¨è‡³å°‘ä¸‰ç§ä¸åŒçš„æ–¹å¼ä¸Šæ˜¯ç›¸åçš„ã€‚</p><ul><li>ç±»ä½¿å‡½æ•°å¯è§ï¼Œéšè—æ•°æ®ã€‚æ•°æ®ç»“æ„ä½¿æ•°æ®å¯è§ï¼Œéšè—å‡½æ•°ã€‚</li><li>ç±»ä½¿æ·»åŠ ç±»å‹å˜å¾—å®¹æ˜“ï¼Œä½†æ˜¯å´éš¾ä»¥æ·»åŠ å‡½æ•°ã€‚æ•°æ®ç»“æ„ä½¿æ·»åŠ å‡½æ•°å˜å¾—å®¹æ˜“ï¼Œä½†éš¾ä»¥æ·»åŠ ç±»å‹ã€‚</li><li>æ•°æ®ç»“æ„å¯¼è‡´è°ƒç”¨è€…é‡æ–°ç¼–è¯‘å’Œé‡æ–°éƒ¨ç½²ã€‚ç±»å°†è°ƒç”¨è€…ä¸é‡æ–°ç¼–è¯‘å’Œé‡æ–°éƒ¨ç½²éš”ç¦»å¼€ã€‚</li></ul><blockquote><p>ä½ è¯´å¯¹äº†ã€‚è¿™äº›éƒ½æ˜¯æ¯ä¸ªä¼˜ç§€çš„è½¯ä»¶è®¾è®¡äººå‘˜å’Œæ¶æ„å¸ˆéƒ½éœ€è¦ç‰¢è®°çš„é—®é¢˜ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åŸæ–‡ä½œè€…ï¼šRobert C. Martin (Uncle Bob)&lt;br&gt;åŸæ–‡é“¾æ¥ï¼š&lt;a href=&quot;https://blog.cleancoder.com/uncle-bob/2019/06/16/ObjectsAndDataStructures.html&quot;&gt;https:</summary>
      
    
    
    
    
    <category term="Uncle Bob" scheme="https://cuipengfei.me/tags/Uncle-Bob/"/>
    
  </entry>
  
  <entry>
    <title>Desugar Scala 20 -- Self Type</title>
    <link href="https://cuipengfei.me/blog/2020/01/07/desugar-scala-20-self-type/"/>
    <id>https://cuipengfei.me/blog/2020/01/07/desugar-scala-20-self-type/</id>
    <published>2020-01-07T10:57:20.000Z</published>
    <updated>2020-01-07T10:57:20.000Z</updated>
    
    <content type="html"><![CDATA[<p>Scalaé‡Œæœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„è¯­è¨€ç‰¹æ€§å«åšSelf Typeï¼Œå¯ä»¥ç”¨æ¥é™å®šä¸€ä¸ªtraitå¯ä»¥è¢«mixinåˆ°å“ªé‡Œå»ã€‚</p><p>çœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">username</span></span>: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Tweeter</span> </span>&#123;</span><br><span class="line">  self: <span class="type">User</span> =&gt;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">tweet</span></span>(tweetText: <span class="type">String</span>) = println(<span class="string">s&quot;<span class="subst">$username</span>: <span class="subst">$tweetText</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VerifiedTweeter</span>(<span class="params">val username_ : <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">username</span> </span>= <span class="string">s&quot;real <span class="subst">$username_</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">SelfTypeBlog</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> realBeyoncÃ© = <span class="keyword">new</span> <span class="type">VerifiedTweeter</span>(<span class="string">&quot;BeyoncÃ©&quot;</span>) <span class="keyword">with</span> <span class="type">User</span> <span class="keyword">with</span> <span class="type">Tweeter</span></span><br><span class="line">    realBeyoncÃ©.tweet(<span class="string">&quot;Just spilled my glass of lemonade&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Userå°±ä»…ä»…ç›¸å½“äºä¸€ä¸ªInterfaceï¼Œå®šä¹‰ä¸€ä¸ªusernameã€‚</p><p>Tweeterå†…çš„ç¬¬ä¸€è¡Œæ˜¯é‡ç‚¹ <code>self: User =&gt;</code> å°±é™å®šäº†Tweeteråªèƒ½è¢«mixinåˆ°å®ç°äº†Userçš„ç±»é‡Œé¢å»ã€‚<br>ç”±äºå¯ä»¥ç¡®å®šTweeteråªèƒ½è¢«mixinåˆ°å®ç°äº†Userçš„ç±»é‡Œé¢å»ï¼Œè¿™æ ·Tweeterçš„tweetæ–¹æ³•å†…å°±å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°ç”¨ <code>username</code> äº†ã€‚</p><p>VerifiedTweeteræ˜¯ä¸€ä¸ªå¾ˆæ™®é€šçš„classï¼Œåˆ«äººnewå®ƒçš„æ—¶å€™ç»™ä»€ä¹ˆå­—ç¬¦ä¸²ï¼Œå®ƒçš„usernameå°±æ˜¯å•¥ã€‚</p><p>æœ€åï¼Œåœ¨mainå‡½æ•°é‡Œnewä¸€ä¸ªVerifiedTweeterï¼ŒæŠŠUserå’ŒTweeteréƒ½mixinè¿›å»ã€‚<br>ç„¶åå°±å¯ä»¥è°ƒç”¨tweetæ–¹æ³•äº†ã€‚</p><p>è€Œå¦‚æœæ²¡æœ‰mixin Userï¼Œç›´æ¥è¯•å›¾mixin Tweeterï¼Œå°±ä¼šå‡ºä¸€ä¸ªç¼–è¯‘é”™è¯¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Illegal inheritance, self-type VerifiedTweeter with Tweeter does not conform to User</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œå…¶å®å°±å¯ä»¥çŒœåˆ°äº†ï¼š<br>ç”±äºSelf Typeæ˜¯åœ¨ç¼–è¯‘æ—¶é™å®šä¸€ä¸ªtraitå¯ä»¥è¢«mixinåˆ°å“ªé‡Œå»çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“åœ¨bytecode levelä¸Šæ²¡æœ‰é™å®šä¸€ä¸ªInterfaceå¯ä»¥è¢«è°å®ç°çš„æœºåˆ¶ã€‚<br>ç”±æ­¤å¯çŸ¥ï¼Œåç¼–è¯‘è¿™æ®µScalaå¯¹åº”çš„classæ–‡ä»¶æ˜¯çœ‹ä¸åˆ°ä»»ä½•ç¥å¥‡çš„ä¸œè¥¿çš„ã€‚</p><p>ä¸è¿‡ï¼Œ<strong>å¾ˆä¹…ä¹‹å‰</strong>å†™è¿‡â€œScalaä¸­çš„è¯­è¨€ç‰¹æ€§æ˜¯å¦‚ä½•å®ç°çš„(3) â€“ traitâ€ï¼š<br><a href="https://cuipengfei.me/blog/2013/10/13/scala-trait/">https://cuipengfei.me/blog/2013/10/13/scala-trait/</a></p><p>å…¶ä¸­å¯¹äºScalaå¦‚ä½•ç¼–è¯‘traitåšäº†é€†å‘å·¥ç¨‹çš„åˆ†æï¼Œå½“æ—¶çš„traitæ˜¯ç¼–è¯‘æˆäº†ä¸€ä¸ªæŠ½è±¡ç±»åŠ ä¸€ä¸ªæ¥å£ã€‚è¿™ä¸ªä¿¡æ¯å·²ç»è¿‡æ—¶äº†ã€‚<br>ç°åœ¨æ›´æ–°ç‰ˆçš„Scalaå¯ä»¥ç¼–è¯‘å‡ºbytecode version 52ï¼Œè¿™ä¸€ç‰ˆæ˜¯æœ‰interface default methodçš„ã€‚</p><p>æ‰€ä»¥ï¼Œè¿˜æ˜¯åç¼–è¯‘ä¸€ä¸‹å§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">User</span></span><br><span class="line">&#123;</span><br><span class="line">    String <span class="title function_">username</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Tweeter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">default</span> <span class="comment">/* synthetic */</span> <span class="keyword">void</span> tweet$(<span class="keyword">final</span> Tweeter $<span class="built_in">this</span>, <span class="keyword">final</span> String tweetText) &#123;</span><br><span class="line">        $<span class="built_in">this</span>.tweet(tweetText);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">tweet</span><span class="params">(<span class="keyword">final</span> String tweetText)</span> &#123;</span><br><span class="line">        Predef$.MODULE$.println((Object)<span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">2</span>).append(((User)<span class="built_in">this</span>).username()).append(<span class="string">&quot;: &quot;</span>).append(tweetText).toString());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> $init$(<span class="keyword">final</span> Tweeter $<span class="built_in">this</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VerifiedTweeter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String username_;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">username_</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.username_;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">username</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">5</span>).append(<span class="string">&quot;real &quot;</span>).append(<span class="built_in">this</span>.username_()).toString();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">VerifiedTweeter</span><span class="params">(<span class="keyword">final</span> String username_)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username_ = username_;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯User Tweeter VerifiedTweeterä»–ä»¬ä¸‰ä¸ªçš„åç¼–è¯‘ç»“æœï¼Œéƒ½æ¯”è¾ƒå•çº¯ã€‚<br>åªæ˜¯Tweeterè¿™ä¸ªå«æœ‰ä¸€ä¸ªå®ç°æ–¹æ³•çš„traitè¢«ç¼–è¯‘æˆäº†æœ‰default methodçš„Interfaceï¼Œè€Œä¸åƒè€ç‰ˆæœ¬çš„Scalaè¦ç¼–è¯‘æˆä¸€ä¸ªæŠ½è±¡ç±»åŠ ä¸€ä¸ªInterfaceã€‚</p><p>ç„¶åçœ‹ä¸€ä¸‹mainå‡½æ•°åç¼–è¯‘å‡ºæ¥çš„æ ·å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="keyword">final</span> String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> VerifiedTweeter realBeyonc\u00e9 = (VerifiedTweeter)<span class="keyword">new</span> <span class="title class_">SelfTypeBlog$$anon</span>.SelfTypeBlog$$anon$<span class="number">1</span>();</span><br><span class="line">    ((Tweeter)realBeyonc\u00e9).tweet(<span class="string">&quot;Just spilled my glass of lemonade&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œnewçš„æ˜¯ä¸€ä¸ªå«åšSelfTypeBlog$$anon$1çš„ç±»ã€‚è¿™ä¸ªç±»åç¼–è¯‘å‡ºæ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">SelfTypeBlog$$anon$1</span> <span class="keyword">extends</span> <span class="title class_">VerifiedTweeter</span> <span class="keyword">implements</span> <span class="title class_">User</span>, Tweeter &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tweet</span><span class="params">(<span class="keyword">final</span> String tweetText)</span> &#123;</span><br><span class="line">        Tweeter.tweet$((Tweeter)<span class="built_in">this</span>, tweetText);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> SelfTypeBlog$$anon$<span class="number">1</span>() &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;Beyonc\u00e9&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        Tweeter.$init$((Tweeter)<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒç»§æ‰¿äº†VerifiedTweeterï¼Œå®ç°äº†Userå’ŒTweeterã€‚<br>ç”±æ­¤å¯è§Scalaä¸­åœ¨å¯¹è±¡åˆ›å»ºæ—¶æ‰with traitçš„å†™æ³•ï¼ŒScalaç¼–è¯‘å™¨ä¼šäº§å‡ºä¸€ä¸ªç±»æ¥è¡¨è¾¾ã€‚</p><p>å¦‚åŒå‰é¢æ¨æµ‹çš„ä¸€æ ·ï¼Œåœ¨bytecode levelä¸Šï¼Œæ²¡æœ‰ç¥å¥‡çš„ä¸œè¥¿ï¼Œself typeè¿™ä¸ªè¯­è¨€ç‰¹æ€§æ˜¯ä»°èµ–äºScala compileræ¥åšåˆ°çš„ã€‚</p><p>ä¸è¿‡ï¼Œæ—¢ç„¶æ˜¯å…¨é Scala compileræ¥åšåˆ°çš„ï¼Œé‚£å°±æ„å‘³ç€å¦‚æœæˆ‘ç”¨åˆ«çš„compilerçš„è¯ï¼Œè¿™ä¸ªé™å®šå°±æ— æ³•åœ¨<strong>ç¼–è¯‘æ—¶</strong>ç”Ÿæ•ˆäº†ã€‚</p><p>æ¥è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JNotUser</span> <span class="keyword">implements</span> <span class="title class_">Tweeter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">abc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µJavaä»£ç ç¼–è¯‘èµ·æ¥å®Œå…¨æ²¡é—®é¢˜ï¼Œæ²¡äººå¼ºè¿«æˆ‘å»å®ç°Userï¼Œæ¯•ç«ŸTweeterå¯¹äºJavaæ¥è¯´å°±æ˜¯ä¸ªæ™®é€šçš„Interfaceå˜›ã€‚</p><p>ç„¶åè·‘ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">JNotUser</span>().tweet(<span class="string">&quot;hello&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¼šæ€æ ·å‘¢ï¼Ÿ</p><p>ç»“æœæ˜¯æ‰§è¡Œçš„æ—¶å€™å‡ºç°ä¸€ä¸ªç±»å‹è½¬æ¢å¼‚å¸¸ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.ClassCastException: class TraitSelfTypeBlog.JNotUser cannot be cast to class TraitSelfTypeBlog.User</span><br></pre></td></tr></table></figure><p>ä¸ºå•¥ä¼šè¿™æ ·å‘¢ï¼Ÿä»”ç»†çœ‹ä¸‹ä¸Šé¢Tweeteråç¼–è¯‘çš„ç»“æœä¸­tweetæ–¹æ³•çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">tweet</span><span class="params">(<span class="keyword">final</span> String tweetText)</span> &#123;</span><br><span class="line">    Predef$.MODULE$.println((Object)<span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">2</span>).append(((User)<span class="built_in">this</span>).username()).append(<span class="string">&quot;: &quot;</span>).append(tweetText).toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³é”®å°±åœ¨è¿™ä¸ª <code>(User)this</code> äº†ã€‚</p><p>è™½ç„¶ç¼–è¯‘æ—¶é™åˆ¶ä¸ä½ï¼Œè¿è¡Œæ—¶ç»ˆå½’é€ƒä¸è¿‡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Scalaé‡Œæœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„è¯­è¨€ç‰¹æ€§å«åšSelf Typeï¼Œå¯ä»¥ç”¨æ¥é™å®šä¸€ä¸ªtraitå¯ä»¥è¢«mixinåˆ°å“ªé‡Œå»ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p</summary>
      
    
    
    
    
    <category term="Desugar_Scala" scheme="https://cuipengfei.me/tags/Desugar-Scala/"/>
    
    <category term="Scala" scheme="https://cuipengfei.me/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>Desugar Scala(19) -- Partial Function</title>
    <link href="https://cuipengfei.me/blog/2020/01/05/desugar-scala-19-partial-function/"/>
    <id>https://cuipengfei.me/blog/2020/01/05/desugar-scala-19-partial-function/</id>
    <published>2020-01-05T11:58:10.000Z</published>
    <updated>2020-01-05T11:58:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆçœ‹è¿™ä¹ˆä¸€æ®µScalaä»£ç ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PFBlog</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">usePF</span></span>(pf: <span class="type">PartialFunction</span>[<span class="type">Option</span>[<span class="type">Int</span>], <span class="type">Int</span>]) = &#123;</span><br><span class="line">    pf(<span class="type">Some</span>(<span class="number">11</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  usePF &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Some</span>(x) =&gt; x + <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">None</span> =&gt; <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å£°æ˜ä¸€ä¸ªusePFæ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªPartialFunctionä½œä¸ºå‚æ•°ï¼Œå®ƒçš„å®ç°å°±æ˜¯ä¼ ä¸€ä¸ª <code>Some(11)</code> ç»™pfã€‚<br>pfçš„å…·ä½“ç±»å‹æ˜¯ <code>PartialFunction[Option[Int], Int]</code> æ‰€ä»¥ä¼ é€’ç»™å®ƒä¸€ä¸ª<code>Some(11)</code>å¯ä»¥æœŸå¾…å®ƒä¼šè¿”å›ä¸€ä¸ªIntã€‚</p><p>ç„¶åè°ƒç”¨usePFï¼Œä¼ é€’ç»™usePFçš„æ˜¯ä¸€ä¸ªpattern matchè¡¨è¾¾å¼ã€‚ç»™SomeåŠ ä¸€ï¼Œç»™Noneè¿”å›0ã€‚</p><p>è¿™æ—¶é—®é¢˜å°±æ¥äº†ï¼Œè¿™ä¸ªpattern matchè¡¨è¾¾å¼æ˜¯æ€ä¹ˆèƒ½å¤Ÿç¬¦åˆusePFéœ€è¦çš„å‚æ•°ç±»å‹çš„å‘¢ï¼Ÿ<br>è¿™ä¹ˆå•çº¯çš„ä¸€ä¸ªpattern matchè¡¨è¾¾å¼æ€ä¹ˆå˜æˆ<code>PartialFunction[Option[Int], Int]</code>çš„å‘¢ï¼Ÿ</p><p>ä¸ºäº†æ¢å¯»ç­”æ¡ˆï¼Œå…ˆæŠŠè¿™å‡ è¡ŒScalaä»£ç ç¼–è¯‘æˆclassæ–‡ä»¶ï¼Œç„¶åæŠŠbyte codeåç¼–è¯‘æˆJavaæ¥ä¸€æ¢ç©¶ç«Ÿå§ã€‚</p><p>ä»¥ä¸ŠScalaä»£ç ä¼šç¼–è¯‘å‡º3ä¸ªclassæ–‡ä»¶ï¼š</p><ul><li>PFBlog.class</li><li>PFBlog$.class</li><li>PFBlog$$anonfun$1.class</li></ul><p>é€ä¸ªåç¼–è¯‘å‡ºæ¥çœ‹ä¸€ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">PFBlog</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">usePF</span><span class="params">(<span class="keyword">final</span> PartialFunction&lt;Option&lt;Object&gt;, Object&gt; pf)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> PFBlog$.MODULE$.usePF((PartialFunction)pf);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯PFBlogï¼Œé‡Œé¢å£°æ˜äº†ä¸€ä¸ªusePFæ–¹æ³•ï¼Œå®ƒçš„å®ç°å®Œå…¨ä»£ç†ç»™PFBlog$ã€‚é‚£ä¹ˆå®ƒå°±åªæ˜¯å¯¹åº”Scalaä»£ç å†…çš„object PFBlogçš„å¯¹å¤–å£°æ˜ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œé‚£å°±çœ‹ä¸‹PFBlog$å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">PFBlog$</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> PFBlog$ MODULE$;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        (MODULE$ = <span class="keyword">new</span> <span class="title class_">PFBlog$</span>()).usePF((PartialFunction&lt;Option&lt;Object&gt;, Object&gt;)<span class="keyword">new</span> <span class="title class_">PFBlog$$anonfun</span>.PFBlog$$anonfun$<span class="number">1</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">usePF</span><span class="params">(<span class="keyword">final</span> PartialFunction&lt;Option&lt;Object&gt;, Object&gt; pf)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> BoxesRunTime.unboxToInt(pf.apply((Object)<span class="keyword">new</span> <span class="title class_">Some</span>((Object)BoxesRunTime.boxToInteger(<span class="number">11</span>))));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> PFBlog$() &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢çš„usePFå°±æœ‰çœŸçš„å®ç°äº†ï¼Œå¯¹åº”åŸScalaçš„usePFã€‚è°ƒç”¨pf.applyï¼Œå¹¶ä¼ é€’Some(11)ã€‚<br>å¹¶ä¸”ï¼Œå®ƒçš„é™æ€å—é‡Œè‡ªå·±è°ƒç”¨äº†usePFã€‚è¿™å°±å¯¹åº”äº†åŸScalaä¸­å¯¹usePFçš„è°ƒç”¨ã€‚<br>å€¼å¾—æ³¨æ„çš„è°ƒç”¨usePFæ—¶ä¼ é€’çš„å‚æ•°ï¼Œæ˜¯ä¸€ä¸ª<code>new PFBlog$$anonfun.PFBlog$$anonfun$1()</code>ï¼Œè¿™å°±æ˜¯ç¬¬ä¸‰ä¸ªclassæ–‡ä»¶çš„å†…å®¹äº†ã€‚<br>é‚£è¿™ä¸ª<code>new PFBlog$$anonfun.PFBlog$$anonfun$1()</code>å°±ä¸€å®šæ˜¯å¯¹åº”åŸæœ¬çš„pattern matchè¡¨è¾¾å¼äº†ã€‚</p><p>æ¥ä¸‹æ¥çœ‹ä¸‹<code>PFBlog$$anonfun$1.class</code> :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">PFBlog$$anonfun$1</span> <span class="keyword">extends</span> <span class="title class_">AbstractPartialFunction</span>&lt;Option&lt;Object&gt;, Object&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">0L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> &lt;A1 <span class="keyword">extends</span> <span class="title class_">Option</span>&lt;Object&gt;, B1&gt; B1 <span class="title function_">applyOrElse</span><span class="params">(<span class="keyword">final</span> A1 x1, <span class="keyword">final</span> Function1&lt;A1, B1&gt; <span class="keyword">default</span>)</span> &#123;</span><br><span class="line">        Object o;</span><br><span class="line">        <span class="keyword">if</span> (x1 <span class="keyword">instanceof</span> Some) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">x2</span> <span class="operator">=</span> BoxesRunTime.unboxToInt(((Some)x1).value());</span><br><span class="line">            o = BoxesRunTime.boxToInteger(x2 + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (None$.MODULE$.equals(x1)) &#123;</span><br><span class="line">            o = BoxesRunTime.boxToInteger(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            o = <span class="keyword">default</span>.apply((Object)x1);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (B1)o;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">isDefinedAt</span><span class="params">(<span class="keyword">final</span> Option&lt;Object&gt; x1)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x1 <span class="keyword">instanceof</span> Some || None$.MODULE$.equals(x1);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> PFBlog$$anonfun$<span class="number">1</span>() &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼ŒPFBlog$$anonfun$1ç»§æ‰¿äº†AbstractPartialFunctionã€‚<br>è¿™ä¸ªAbstractPartialFunctionæ˜¯åœ¨Scalaæ ‡å‡†åº“é‡Œå®šä¹‰äº†çš„ï¼Œå®ƒmixinäº†PartialFunctionã€‚<br>æ‰€ä»¥ï¼ŒPFBlog$$anonfun$1è‡ªç„¶å°±ç¬¦åˆäº†usePFå¯¹å‚æ•°è¦æ±‚çš„ç±»å‹ã€‚</p><p>å†çœ‹PFBlog$$anonfun$1å†…çš„å…·ä½“å®ç°ï¼ŒisDefinedAtå¯¹äºSomeæˆ–è€…Noneè¿”å›trueã€‚applyOrElseåˆ™åšäº†åŸScalaä¸­pattern matchè¡¨è¾¾å¼ç»™SomeåŠ ä¸€ï¼Œç»™Noneè¿”å›é›¶çš„é€»è¾‘ã€‚</p><p>ç”±äºAbstractPartialFunctionä¸­çš„applyæ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(x: <span class="type">T1</span>): <span class="type">R</span> = applyOrElse(x, <span class="type">PartialFunction</span>.empty)</span><br></pre></td></tr></table></figure><p>è¿™å°±ç¡®ä¿äº†å½“PFBlog$$anonfun$1çš„applyè¢«è°ƒç”¨åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åŸScalaä¸­çš„pattern matchè¡¨è¾¾å¼çš„é€»è¾‘å¯ä»¥å¾—åˆ°æ‰§è¡Œã€‚</p><p>åˆ°è¿™é‡Œå°±æ˜ç™½äº†ï¼ŒScalaç¼–è¯‘å™¨å¾ˆå‹¤åŠ³ï¼Œå­å“§å­å“§çš„ç»™ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="type">Some</span>(x) =&gt; x + <span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> <span class="type">None</span> =&gt; <span class="number">0</span></span><br></pre></td></tr></table></figure><p>äº§å‡ºäº†ä¸€ä¸ªPFBlog$$anonfun$1å¹¶äº§å‡ºäº†isDefinedAtå’ŒapplyOrElseæ–¹æ³•ã€‚<br>ä»è€Œè®©è¿™ä¸ªpattern matchè¡¨è¾¾å¼å¯ä»¥ç¬¦åˆusePFçš„å‚æ•°ç±»å‹ã€‚</p><p>æœ€åï¼Œå¾ˆä¹…å‰å†™è¿‡ä¸€ä¸ªå…³äºpartial applicationçš„åšå®¢ï¼š <a href="https://cuipengfei.me/blog/2013/12/25/desugar-scala-6/">https://cuipengfei.me/blog/2013/12/25/desugar-scala-6/</a><br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶partial functionå’Œpartial applicationåå­—é‡Œéƒ½æœ‰partialè¿™ä¸ªå­—ï¼Œä½†æ˜¯<strong>ä»–ä¿©å…¶å®æ²¡å•¥å…³ç³»</strong>ã€‚<br>ä¸€ä¸ªæ˜¯å…³äºæŠŠpattern matchè¡¨è¾¾å¼ç¼–è¯‘æˆPartialFunctionçš„å®ç°ç±»çš„ã€‚å¦ä¸€ä¸ªæ˜¯å…³äºæŸ¯é‡ŒåŒ–çš„ã€‚</p><p>è¿™ç¯‡åšå®¢åªå…³å¿ƒScalaç¼–è¯‘å™¨æ˜¯æ€ä¹ˆæ”¯æŒPartial Functionè¿™ä¸ªè¯­è¨€ç‰¹æ€§çš„ã€‚<br>å…³äºPartial Functionçš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥çœ‹çœ‹è€äººå®¶çš„æ–‡ç« ï¼š <a href="https://www.jianshu.com/p/b0b4e3a349c3">https://www.jianshu.com/p/b0b4e3a349c3</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å…ˆçœ‹è¿™ä¹ˆä¸€æ®µScalaä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight scala&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2</summary>
      
    
    
    
    
    <category term="Desugar_Scala" scheme="https://cuipengfei.me/tags/Desugar-Scala/"/>
    
    <category term="Scala" scheme="https://cuipengfei.me/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>Future-å¼‚æ­¥å‡½æ•°çš„ä¸¤ä¸ªè§†è§’</title>
    <link href="https://cuipengfei.me/blog/2019/12/29/future-from-two-perspectives/"/>
    <id>https://cuipengfei.me/blog/2019/12/29/future-from-two-perspectives/</id>
    <published>2019-12-29T13:02:39.000Z</published>
    <updated>2019-12-29T13:02:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸€ä¸‹ä¸¤ä¸ªç¨‹åºå‘˜ä¹‹é—´çš„æ•…äº‹ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ˜¯ç”¨Scalaå†™çš„ï¼Œä¸è¿‡æœ¬æ–‡æ‰€è®²çš„è¯é¢˜å¹¶ä¸ä»…é™äºScalaï¼Œä»»ä½•æœ‰Future&#x2F;Promiseæ”¯æŒçš„è¯­è¨€éƒ½æ˜¯é€‚ç”¨çš„ã€‚<br>ä¸‹é¢è¿™ä¸ªwikié¡µé¢ç½—åˆ—äº†å„ä¸ªæœ‰Future&#x2F;Promiseæ”¯æŒçš„è¯­è¨€ï¼Œå·²ç»æ¶µç›–äº†å¤§å¤šæ•°çš„å¸¸ç”¨è¯­è¨€ã€‚<br><a href="https://zh.wikipedia.org/wiki/Future%E4%B8%8Epromise#%E5%AE%9E%E7%8E%B0%E5%88%97%E8%A1%A8">Futureä¸promiseå®ç°åˆ—è¡¨</a></p><h1 id="æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„ç¼–å†™è€…"><a href="#æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„ç¼–å†™è€…" class="headerlink" title="æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„ç¼–å†™è€…"></a>æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„ç¼–å†™è€…</h1><p>æˆ‘å†™äº†ä¸¤ä¸ªå¼‚æ­¥å‡½æ•°,æ¥æä¾›ç»™å…¶ä»–ç¨‹åºå‘˜åŒäº‹ä½¿ç”¨ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">CallBack</span> </span>= <span class="type">Try</span>[<span class="type">String</span>] =&gt; <span class="type">Unit</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pretendCallAPI</span></span>(callBack: <span class="type">CallBack</span>, okMsg: <span class="type">String</span>, failedMsg: <span class="type">String</span>) = &#123;</span><br><span class="line">  <span class="keyword">val</span> task = <span class="keyword">new</span> <span class="type">TimerTask</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">run</span></span>() = &#123;</span><br><span class="line">      <span class="keyword">val</span> percentage = <span class="type">Random</span>.between(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (percentage &gt;= <span class="number">50</span>)</span><br><span class="line">        callBack(<span class="type">Success</span>(okMsg))</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (percentage &lt;= <span class="number">30</span>)</span><br><span class="line">        callBack(<span class="type">Failure</span>(<span class="keyword">new</span> <span class="type">Exception</span>(failedMsg)))</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        callBack(<span class="type">Failure</span>(<span class="keyword">new</span> <span class="type">Exception</span>(<span class="string">&quot;network problem&quot;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="type">Timer</span>().schedule(task, <span class="type">Random</span>.between(<span class="number">200</span>, <span class="number">500</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> searchTB = pretendCallAPI(_, <span class="string">&quot;product price found&quot;</span>, <span class="string">&quot;product not listed&quot;</span>)</span><br><span class="line"><span class="keyword">val</span> buyFromTB = pretendCallAPI(_, <span class="string">&quot;product bought&quot;</span>, <span class="string">&quot;can not buy, no money left&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªå¼‚æ­¥å‡½æ•°: <code>searchTB</code>ç”¨æ¥ä»æ·˜å®æœç´¢ç‰©å“,å¦ä¸€ä¸ª<code>buyFromTB</code>ç”¨æ¥è´­ä¹°æœåˆ°çš„ç‰©å“ã€‚</p><p>ç”±äºä»…ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºè€Œå†™çš„,ä»–ä»¬ä¸¤ä¸ªéƒ½æ˜¯åŸºäºä¸€ä¸ªå«åš<code>pretendCallAPI</code>çš„å‡½æ•°å®ç°çš„ã€‚<br>é¡¾åæ€ä¹‰,<code>pretendCallAPI</code>å¹¶ä¸ä¼šçœŸçš„å»è°ƒç”¨æ·˜å®çš„API,è€Œåªæ˜¯æ¨¡æ‹ŸAPIçš„è¡Œä¸ºã€‚</p><p>è¿™ä¸ª<code>pretendCallAPI</code>å‡½æ•°æœ‰å‡ ä¸ªè¡Œä¸ºç‰¹å¾:</p><ul><li>æ¯æ¬¡è€—æ—¶200åˆ°500æ¯«ç§’ä¹‹é—´</li><li>æ¯æ¬¡æ‰§è¡Œæœ‰50%çš„å‡ ç‡æˆåŠŸ</li><li>20%çš„å‡ ç‡é‡åˆ°ç½‘ç»œæ•…éšœ</li><li>å¦å¤–30%çš„å‡ ç‡è™½ç„¶ç½‘ç»œæ²¡é—®é¢˜ä½†æ˜¯æœåŠ¡å™¨ä¼šç»™ä½ ä¸€ä¸ªéæ­£å¸¸çš„ç»“æœ</li></ul><p>å½“ç„¶,ç”±äºæˆ‘å†™çš„æ˜¯å¼‚æ­¥ç®—æ³•,éœ€è¦é¿å…block caller threadã€‚<br>æ‰€ä»¥å½“ä½ è°ƒç”¨<code>pretendCallAPI</code>çš„æ—¶å€™,è¿™ä¸ªå‡½æ•°æ˜¯<strong>ç¬é—´ç«‹å³è¿”å›çš„</strong>ã€‚<br>é‚£ä¹ˆå½“ç„¶æˆ‘å°±<strong>æ— æ³•åœ¨å‡½æ•°è¿”å›çš„æ—¶å€™returnä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿</strong>ç»™ä½ äº†ã€‚</p><p>å¦‚æœä½ æƒ³çŸ¥é“æ‰§è¡Œçš„ç»“æœåˆ°åº•æ˜¯å•¥,ä½ éœ€è¦ä¼ ç»™æˆ‘ä¸€ä¸ª<code>CallBack</code>,åœ¨æˆ‘æ‰§è¡Œå®Œå,é€šè¿‡<code>CallBack</code>æ¥å‘ŠçŸ¥ä½ æ‰§è¡Œçš„ç»“æœã€‚<br>è¿™ä¸ª<code>CallBack</code>çš„å®Œæ•´ç­¾åè¡¨è¾¾å¼å±•å¼€æ˜¯<code>Try[String] =&gt; Unit</code></p><p>å¤§å®¶çœ‹<code>searchTB</code>å’Œ<code>buyFromTB</code>å¯èƒ½è§‰å¾—ä»–ä»¬é•¿çš„æœ‰ç‚¹å¥‡æ€ª,è¿™æ˜¯Scalaé‡ŒæŸ¯é‡ŒåŒ–çš„å†™æ³•ã€‚<br>ä¹Ÿå°±æ˜¯é€šè¿‡æŠŠ<code>pretendCallAPI</code>åŒ…ä¸€å±‚æ¥æ„é€ æ–°çš„å‡½æ•°,é”æ­»ä¸¤ä¸ªå‚æ•°,å‰©ä¸‹çš„ä¸€ä¸ªå‚æ•°(ä¹Ÿå°±æ˜¯<code>CallBack</code>)å°±å˜æˆäº†æ–°æ„é€ å‡ºæ¥çš„å‡½æ•°çš„å”¯ä¸€å‚æ•°äº†ã€‚<br>ä¹Ÿå°±æ˜¯è¯´<code>searchTB</code>å’Œ<code>buyFromTB</code>çš„ç­¾åæ˜¯<code>(Try[String] =&gt; Unit) =&gt; Unit</code>ã€‚</p><p>å…³äºæŸ¯é‡ŒåŒ–è¿™ä¸ªè¯­è¨€ç‰¹æ€§çš„æ›´å¤šä¿¡æ¯:<br><a href="https://cuipengfei.me/blog/2013/12/25/desugar-scala-6/">https://cuipengfei.me/blog/2013/12/25/desugar-scala-6/</a></p><p>å¥½äº†,ç°åœ¨è¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥æä¾›ç»™å¤§å®¶ä½¿ç”¨äº†ã€‚</p><h1 id="æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨è€…"><a href="#æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨è€…" class="headerlink" title="æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨è€…"></a>æˆ‘æ˜¯å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨è€…</h1><p>å¬è¯´å¼‚æ­¥å‡½æ•°å·²ç»å†™å¥½äº†,æˆ‘ç»ˆäºå¯ä»¥ç”¨ä»–ä»¬æ¥å®ç°å‰æ‰‹ä¸šåŠ¡äº†ã€‚</p><p>å¬å‡½æ•°ä½œè€…è®²äº†ä¸€ä¸‹,ç”¨èµ·æ¥åº”è¯¥ä¸ä¼šå¾ˆéš¾,é‚£æˆ‘æ¥å®ç°ä¸€ä¸‹å§ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">searchPriceThenBuy</span></span>() = &#123;</span><br><span class="line">  searchTB &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Success</span>(searchMsg) =&gt;</span><br><span class="line">      println(searchMsg)</span><br><span class="line">      buyFromTB &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Success</span>(buyMsg) =&gt; println(buyMsg)</span><br><span class="line">        <span class="keyword">case</span> <span class="type">Failure</span>(err) =&gt; println(err.getMessage)</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Failure</span>(err) =&gt; println(err.getMessage)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>searchTB</code>å’Œ<code>buyFromTB</code>å¹¶ä¸éš¾. ä»–ä»¬ä¸¤ä¸ªéƒ½æ˜¯æ¥å—<code>CallBack</code>ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚<br><code>CallBack</code>æœ¬èº«æ˜¯ä¸ªå‡½æ•°,å®ƒçš„ç­¾åæ˜¯<code>Try[String] =&gt; Unit</code>ã€‚<br>è€Œ<code>Try</code>æœ‰ä¸¤ç§å½¢å¼,åˆ†åˆ«æ˜¯<code>Success</code>å’Œ<code>Failure</code>ã€‚</p><p>æ‰€ä»¥åœ¨è°ƒç”¨<code>searchTB</code>å’Œ<code>buyFromTB</code>çš„æ—¶å€™,å¿…é¡»æŠŠä¸¤ä¸ªåˆ†æ”¯éƒ½ç»™åˆ°(ä»¥å…pattern matchä¸åˆ°)ã€‚<br>è¿™æ ·åœ¨å¼‚æ­¥å‡½æ•°æœ‰ç»“æœçš„æ—¶å€™(æ— è®ºæˆè´¥)æ‰èƒ½call backè¿‡æ¥åˆ°æˆ‘çš„ä»£ç ,ä»¥ä¾¿æˆ‘èƒ½å¤Ÿåœ¨åˆé€‚çš„æ—¶æœºåšåç»­çš„å¤„ç†(æ— è®ºæ˜¯åŸºäºæˆåŠŸåšåç»­ä¸šåŠ¡,è¿˜æ˜¯åšerror handling)ã€‚</p><p>å…³äºpattern match,å¯ä»¥å‚è€ƒè¿™é‡Œ:<br><a href="https://cuipengfei.me/blog/2013/12/29/desugar-scala-8/">https://cuipengfei.me/blog/2013/12/29/desugar-scala-8/</a><br><a href="https://cuipengfei.me/blog/2015/06/16/visitor-pattern-pattern-match/">https://cuipengfei.me/blog/2015/06/16/visitor-pattern-pattern-match/</a></p><p>è¿™æ®µä»£ç è·‘ä¸€ä¸‹çš„è¯,ä¼šæœ‰è¿™ä¹ˆå‡ ç§ç»“æœ:</p><ul><li>æœåˆ°äº†,ä¹Ÿä¹°åˆ°äº†</li><li>æœåˆ°äº†,è´­ä¹°æ—¶é‡åˆ°äº†ç½‘ç»œæ•…éšœ</li><li>æœåˆ°äº†,ç”±äºæ”¯ä»˜å®é’±ä¸å¤Ÿè€Œæ²¡ä¹°åˆ°</li><li>æ²¡æœåˆ°,è´­ä¹°è¡Œä¸ºæœªè§¦å‘</li><li>æœç´¢é‡åˆ°ç½‘ç»œæ•…éšœ,è´­ä¹°è¡Œä¸ºæœªè§¦å‘</li></ul><p>ä¸€å…±å°±è¿™ä¹ˆå‡ ç§å¯èƒ½,å› ä¸º<code>pretendCallAPI</code>æ˜¯è·‘æ¦‚ç‡çš„,å¤šè·‘å‡ æ¬¡è¿™äº›æƒ…å†µéƒ½èƒ½é‡åˆ°ã€‚</p><p>è™½ç„¶å®ç°å‡ºæ¥ä¸éš¾,æ‰§è¡Œç»“æœä¹Ÿæ²¡é—®é¢˜,ä½†æ˜¯æ€»æœ‰ç‚¹<strong>éšå¿§</strong>ã€‚</p><p>è¿™é‡Œåªæœ‰<code>searchTB</code>å’Œ<code>buyFromTB</code>ä¸¤ä¸ªå‡½æ•°,å¦‚æœå…¶ä»–åœºæ™¯ä¸‹æˆ‘éœ€è¦æŠŠæ›´å¤šçš„å¼‚æ­¥å‡½æ•°ç»„åˆèµ·æ¥ä½¿ç”¨å‘¢?å²‚ä¸æ˜¯è¦ç¼©è¿›å¾ˆå¤šå±‚?</p><p>å½“ç„¶,ç¼©è¿›åªæ˜¯ä¸ªè§†è§‰å®¡ç¾é—®é¢˜,æ˜¯ä¸ªè¡¨è±¡,ä¸æ˜¯ç‰¹åˆ«è¦ç´§.å…³é”®æ˜¯<strong>æˆ‘çš„ä¸šåŠ¡é€»è¾‘å¾ˆå®¹æ˜“è¢«è¿™æ ·çš„ä»£ç ç»™å‰²è£‚çš„é¸¡é›¶ç‹—ç¢</strong>,é‚£å°±ä¸å¥½äº†ã€‚<br>æˆ‘è¦ç»™ä¸Šæ¸¸ç¼–å†™å¼‚æ­¥å‡½æ•°çš„åŒäº‹åé¦ˆä¸€ä¸‹ï¼Œçœ‹æ˜¯å¦æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h1 id="é•œå¤´åˆ‡å›åˆ°å¼‚æ­¥å‡½æ•°ç¼–å†™è€…"><a href="#é•œå¤´åˆ‡å›åˆ°å¼‚æ­¥å‡½æ•°ç¼–å†™è€…" class="headerlink" title="é•œå¤´åˆ‡å›åˆ°å¼‚æ­¥å‡½æ•°ç¼–å†™è€…"></a>é•œå¤´åˆ‡å›åˆ°å¼‚æ­¥å‡½æ•°ç¼–å†™è€…</h1><p>ä¹‹å‰å†™çš„ä¸¤ä¸ªå‡½æ•°åé¦ˆä¸å¤ªå¥½ï¼Œä¸»è¦æ˜¯å› ä¸ºåŒäº‹ä»¬è®¤ä¸ºä½¿ç”¨<code>CallBack</code>ä¸æ˜¯æœ€ä¼˜çš„æ–¹å¼ã€‚<br>è¿™ä¸ªåé¦ˆç¡®å®å¾ˆä¸­è‚¯ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°å•ç‹¬ä½¿ç”¨ï¼Œç”¨<code>CallBack</code>ä¹Ÿæ²¡ä»€ä¹ˆå¤ªå¤§çš„é—®é¢˜ï¼Œå¦‚æœæ˜¯å¾ˆå¤šä¸ªå¼‚æ­¥å‡½æ•°ç»„åˆä½¿ç”¨ç¡®å®ä¼šå½¢æˆå¤šå±‚åµŒå¥—çš„é—®é¢˜ã€‚<br>æˆ‘ä½œä¸ºä¸Šæ¸¸ç¨‹åºå‘˜ï¼Œç¡®å®éœ€è¦æ›´å¤šåœ°ä¸ºä¸‹æ¸¸è°ƒç”¨è€…è€ƒè™‘ã€‚</p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘æ”¹ç‰ˆä¸€ä¸‹ï¼Œå…é™¤æ‰è®©ä¸‹æ¸¸ä½¿ç”¨<code>CallBack</code>çš„å¿…è¦æ€§ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">CallBackBasedFunction</span> </span>= (<span class="type">CallBack</span>) =&gt; <span class="type">Unit</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">futurize</span></span>(f: <span class="type">CallBackBasedFunction</span>) = () =&gt; &#123;</span><br><span class="line">  <span class="keyword">val</span> promise = <span class="type">Promise</span>[<span class="type">String</span>]()</span><br><span class="line"></span><br><span class="line">  f &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Success</span>(msg) =&gt; promise.success(msg)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Failure</span>(err) =&gt; promise.failure(err)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  promise.future</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> searchTBFutureVersion = futurize(searchTB)</span><br><span class="line"><span class="keyword">val</span> buyFromTBFutureVersion = futurize(buyFromTB)</span><br></pre></td></tr></table></figure><p>å…ˆå®šä¹‰ä¸€ä¸ª<code>CallBackBasedFunction</code>ï¼Œå®ƒä»£è¡¨ä¸€ä¸ªæ¥å—<code>CallBack</code>ä¸ºå‚æ•°çš„å‡½æ•°çš„ç­¾åã€‚</p><p>è¡¨è¾¾å¼å±•å¼€åå°±æ˜¯ï¼šã€€<code>(Try[String] =&gt; Unit) =&gt; Unit</code><br>è¿™å°±ç¬¦åˆäº†<code>searchTB</code>å’Œ<code>buyFromTB</code>ä¸¤ä¸ªå‡½æ•°çš„ç­¾åã€‚</p><p><code>futurize</code>ç®—æ˜¯ä¸ªhigher order function,å®ƒæ¥å—ä¸€ä¸ª<code>CallBackBasedFunction</code>ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª<code>() =&gt; Future[String]</code>ã€‚<br>(<code>Future</code>æ˜¯Scalaæ ‡å‡†åº“çš„å†…å®¹ï¼Œå¯ä»¥è®¤ä¸ºå’ŒJS Promises&#x2F;A+æ˜¯ç±»ä¼¼çš„æ¦‚å¿µ)</p><p>ä¹Ÿå°±æ˜¯è¯´<code>futurize</code>å¯ä»¥æŠŠ<code>searchTB</code>å’Œ<code>buyFromTB</code>æ”¹é€ æˆè¿”å›<code>Future</code>çš„å‡½æ•°ã€‚ä¸Šé¢ä»£ç æœ€åä¸¤è¡Œå°±æ˜¯æ”¹é€ çš„ç»“æœã€‚</p><p>è¿™æ ·ï¼ŒåŸæœ¬æ¥å—<code>CallBack</code>åšä¸ºå‚æ•°ä¸”æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œå°±å˜æˆäº†ä¸æ¥å—å‚æ•°ä¸”è¿”å›<code>Future</code>çš„å‡½æ•°ã€‚</p><p>å†çœ‹<code>futurize</code>çš„å…·ä½“å®ç°ï¼Œå®ƒä½¿ç”¨äº†Scalaçš„<code>Promise</code>ï¼Œè®©è¿”å›çš„<code>Future</code>åœ¨åŸç‰ˆå‡½æ•°æˆåŠŸæ—¶æˆåŠŸï¼Œåœ¨åŸç‰ˆå‡½æ•°å¤±è´¥æ—¶å¤±è´¥ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘å°±å¾—åˆ°äº†<code>searchTBFutureVersion</code>å’Œ<code>buyFromTBFutureVersion</code>è¿™ä¸¤ä¸ª<strong>ä»ç„¶æ˜¯ç«‹å³ç¬é—´è¿”å›ï¼Œä¸ä¼šblock caller thread</strong>çš„å‡½æ•°ã€‚</p><p>å…³äºScalaä¸­Promiseå’ŒFutureçš„æ›´å¤šä¿¡æ¯ï¼š<br><a href="https://docs.scala-lang.org/overviews/core/futures.html">https://docs.scala-lang.org/overviews/core/futures.html</a></p><h1 id="é•œå¤´å†åˆ‡åˆ°å¼‚æ­¥å‡½æ•°è°ƒç”¨è€…"><a href="#é•œå¤´å†åˆ‡åˆ°å¼‚æ­¥å‡½æ•°è°ƒç”¨è€…" class="headerlink" title="é•œå¤´å†åˆ‡åˆ°å¼‚æ­¥å‡½æ•°è°ƒç”¨è€…"></a>é•œå¤´å†åˆ‡åˆ°å¼‚æ­¥å‡½æ•°è°ƒç”¨è€…</h1><p>ç°åœ¨æœ‰äº†<code>searchTBFutureVersion</code>å’Œ<code>buyFromTBFutureVersion</code>ï¼Œæˆ‘æ¥è¯•ç€é‡æ–°å®ç°ä¸€æ¬¡ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">searchPriceThenBuyFutureVersion</span></span>() = &#123;</span><br><span class="line">  <span class="keyword">val</span> eventualResult = <span class="keyword">for</span> &#123;</span><br><span class="line">    searchResult &lt;- searchTBFutureVersion().map(msg =&gt; println(msg))</span><br><span class="line">    buyResult &lt;- buyFromTBFutureVersion().map(msg =&gt; println(msg))</span><br><span class="line">  &#125; <span class="keyword">yield</span> (searchResult, buyResult)</span><br><span class="line"></span><br><span class="line">  eventualResult.onComplete &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Failure</span>(err) =&gt; println(err.getMessage)</span><br><span class="line">    <span class="keyword">case</span> _ =&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨åˆ°äº†Scalaçš„for comprehensionï¼Œç¼–è¯‘åä¼šå˜æˆmapï¼ŒflatMapç­‰ç­‰monadic operatorã€‚<br>è€Œmap,flatMapç­‰æ“ä½œç¬¦æ­£æ˜¯Scalaä¸­Futureæ‹¿æ¥åšç»„åˆç”¨çš„ã€‚</p><p>è¿™æ ·ï¼Œç”¨foræŠŠä¸¤ä¸ªè¿”å›Futureçš„å¼‚æ­¥å‡½æ•°ç»„ç»‡èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„Futureï¼Œç„¶ååœ¨æ–°çš„Future completeæ—¶ç»Ÿä¸€å¤„ç†å¼‚å¸¸ã€‚</p><p>å…³äºforçš„æ›´å¤šä¿¡æ¯ï¼š<br><a href="https://cuipengfei.me/blog/2014/08/30/options-for/">https://cuipengfei.me/blog/2014/08/30/options-for/</a></p><p>è¿™æ¬¡å®ç°çš„ä»£ç ä¸ä¸Šæ¬¡çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„,æ²¡ä»€ä¹ˆä¸¤æ ·ã€‚<br>ä¸è¿‡æˆ‘çš„<strong>ä¸šåŠ¡ä»£ç ä»é¸¡é›¶ç‹—ç¢å˜æˆäº†å¹³é“ºç›´å™å¹³æ˜“è¿‘äºº</strong>ã€‚<br>(è¿™ç§æ•ˆæœåœ¨è¿™é‡Œè¡¨ç°çš„å¹¶ä¸æ˜¯ç‰¹åˆ«çªå‡ºï¼Œä¸è¿‡å¾ˆå®¹æ˜“æƒ³è±¡å¦‚æœéœ€è¦ç»„åˆä½¿ç”¨çš„å¼‚æ­¥å‡½æ•°æ›´å¤šä¸€äº›çš„è¯ï¼Œè¿™ç§æ•ˆæœçš„å¥½å¤„å°±æ˜¾éœ²å‡ºæ¥äº†)</p><p>å½“ç„¶äº†ï¼Œè®©ä¸šåŠ¡ä»£ç æ˜“è¯»æ˜“æ‡‚ä¸»è¦è¿˜æ˜¯è¦é <strong>ä¸ªäººå¥‹æ–—</strong>ï¼Œè€Œæœ‰äº†Promiseå’ŒFutureè¿™ç§<strong>å†å²è¿›ç¨‹</strong>çš„æ¨åŠ›ï¼Œåˆ™æ›´æœ‰å¢ç›Šä½œç”¨ã€‚</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æœ€è¿‘åœ¨çœ‹Scala Reactiveçš„ä¸€äº›å†…å®¹<br>æƒ³èµ·äº†å¾ˆä¹…ä¹‹å‰å†™è¿‡ä¸€ç¯‡å«åš<strong>è‡ªå·±åŠ¨æ‰‹å®ç°Promises&#x2F;A+è§„èŒƒ</strong>çš„åšå®¢ï¼Œç”¨JSå®ç°äº†ä¸€ä¸ªç®€ç‰ˆçš„Promise:<br><a href="https://cuipengfei.me/blog/2016/05/15/promise/">https://cuipengfei.me/blog/2016/05/15/promise/</a></p><p>æˆ‘åœ¨å½“æ—¶çš„ä¸€æ®µæ¼”ç¤ºä»£ç é‡Œé¢å†™äº†ä¸¤å¥æ³¨é‡Šï¼š</p><blockquote><p>Promiseçš„ä½œç”¨åœ¨äº</p><ol><li>ç»™å¼‚æ­¥ç®—æ³•çš„ç¼–å†™è€…å’Œä½¿ç”¨è€…ä¹‹é—´æä¾›ä¸€ç§ç»Ÿä¸€çš„äº¤æµæ‰‹æ®µ</li><li>ç»™å¼‚æ­¥ç®—æ³•çš„ä½¿ç”¨è€…æä¾›ä¸€ç§ç»„ç»‡ä»£ç çš„æ‰‹æ®µ,ä»¥ä¾¿äºå°†ä¸€å±‚åˆä¸€å±‚åµŒå¥—çš„ä¸šåŠ¡ä¸»æµç¨‹å˜æˆä¸€æ¬¡ä¸€æ¬¡çš„å¯¹thençš„è°ƒç”¨</li></ol></blockquote><p>ä¸è¿‡å½“æ—¶çš„åšå®¢é‡Œåªè®²äº†å®ç°Promiseè§„èŒƒçš„äº‹æƒ…,å¹¶æ²¡æœ‰è¯¦ç»†è§£é‡Šè¿‡è¿™ä¸¤å¥è¯ã€‚<br>æ—¢ç„¶åˆé‡åˆ°äº†è¿™ä¸ªè¯é¢˜ï¼Œäºæ˜¯å†™ç‚¹Scalaæ¥æŠŠå½“æ—¶æ²¡å±•å¼€å†™åˆ°çš„å†…å®¹è¡¥å……äº†ä¸€ä¸‹ã€‚</p><p>ä¸Šæ–‡çš„å››ä¸ªé•œå¤´å±•ç°äº†ä¸¤ä¸ªè§’è‰²çš„æ€è€ƒè¿‡ç¨‹ï¼Œé€šè¿‡è¿™ä¸ªè¿‡ç¨‹å…¶å®ä¹Ÿå°±è§£é‡Šäº†ä¸Šé¢ä¸¤å¥æ³¨é‡Šçš„å«ä¹‰ã€‚</p><blockquote><ol><li>ç»™å¼‚æ­¥ç®—æ³•çš„ç¼–å†™è€…å’Œä½¿ç”¨è€…ä¹‹é—´æä¾›ä¸€ç§ç»Ÿä¸€çš„äº¤æµæ‰‹æ®µ</li></ol></blockquote><p>æ‰€è°“ç»Ÿä¸€çš„äº¤æµæ‰‹æ®µï¼Œå…¶å®å°±æ˜¯å¼‚æ­¥å‡½æ•°çš„ç­¾åé—®é¢˜ã€‚<br>ç”±äºéœ€è¦å¤„ç†çš„ä¸šåŠ¡äº”èŠ±å…«é—¨ï¼Œå¼‚æ­¥å‡½æ•°æ¥å—çš„å‚æ•°åˆ—è¡¨æ²¡æ³•ç»Ÿä¸€ï¼Œä½†æ˜¯è¿”å›å€¼æ˜¯å¯ä»¥ç»Ÿä¸€çš„ã€‚</p><p>ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ¥å—äº†å¤–ç•Œç»™çš„å‚æ•°ï¼Œç«‹å³ç¬é—´è¿”å›ä¸€ä¸ªJsçš„Promiseæˆ–è€…Scalaçš„Future(<strong>æˆ–è€…æ˜¯ä»»ä½•è¯­è¨€ä¸­ç±»ä¼¼æ¦‚å¿µçš„å«æ³•</strong>)ã€‚<br>ç„¶ååœ¨å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œçš„æ—¶å€™æŠŠPromise resolve&#x2F;rejectæ‰(è®©Future successæˆ–è€…failure),å€Ÿæ­¤æ¥è®©è°ƒç”¨æ–¹çš„ä»£ç çŸ¥é“è¯¥åˆ°äº†å®ƒè·‘åç»­å¤„ç†çš„æ—¶å€™äº†ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±è·å¾—äº†ä¸€ä¸ª<strong>sensible default</strong>ï¼Œæ— éœ€åœ¨æ¯æ¬¡è®¾è®¡å¼‚æ­¥å‡½æ•°çš„æ—¶å€™éƒ½å»å•†è®®è¯¥è¿”å›ä»€ä¹ˆä¸œè¥¿ï¼Œè¯¥æ€ä¹ˆè·å¾—å¼‚æ­¥æ‰§è¡Œçš„ç»“æœã€‚</p><blockquote><ol start="2"><li>ç»™å¼‚æ­¥ç®—æ³•çš„ä½¿ç”¨è€…æä¾›ä¸€ç§ç»„ç»‡ä»£ç çš„æ‰‹æ®µ,ä»¥ä¾¿äºå°†ä¸€å±‚åˆä¸€å±‚åµŒå¥—çš„ä¸šåŠ¡ä¸»æµç¨‹å˜æˆä¸€æ¬¡ä¸€æ¬¡çš„å¯¹thençš„è°ƒç”¨</li></ol></blockquote><p>æ‰€è°“ç»„ç»‡ä»£ç çš„æ‰‹æ®µï¼Œå°±æ˜¯å…³äºå¼‚æ­¥å‡½æ•°è°ƒç”¨è€…çš„é‚£ä¸¤ä¸ªé•œå¤´çš„å†…å®¹äº†ã€‚<br>ä¸€å¼€å§‹<code>CallBack</code>å¥—ç€<code>CallBack</code>ï¼Œå¼‚æ­¥çš„å‘³é“å¾ˆé‡ï¼Œè¿™ä½“ç°å‡ºäº†ä»£ç çš„ç»„ç»‡æ–¹å¼åœ¨å‘ä»£ç çš„æŠ€æœ¯å®ç°ä½å¤´ã€‚æˆ–è€…è¯´æ˜¯ä»£ç çš„<strong>æŠ€æœ¯å®ç°å¹²æ‰°äº†æˆ‘è¡Œæ–‡çš„é£æ ¼</strong>ã€‚<br>åæ¥å˜æˆäº†çœ‹èµ·æ¥å¾ˆåƒæ˜¯æ¶ˆè´¹åŒæ­¥å‡½æ•°ç»“æœçš„å†™æ³•ã€‚ä»è€Œè®©æˆ‘æƒ¯å¸¸çš„æ–‡é£å¾—ä»¥ä¿æŒã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸€ä¸‹ä¸¤ä¸ªç¨‹åºå‘˜ä¹‹é—´çš„æ•…äº‹ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ˜¯ç”¨Scalaå†™çš„ï¼Œä¸è¿‡æœ¬æ–‡æ‰€è®²çš„è¯é¢˜å¹¶ä¸ä»…é™äºScalaï¼Œä»»ä½•æœ‰Future&amp;#x2F;Promiseæ”¯æŒçš„è¯­è¨€éƒ½æ˜¯é€‚ç”¨çš„ã€‚&lt;br&gt;ä¸‹é¢è¿™ä¸ªwikié¡µé¢ç½—åˆ—äº†å„ä¸ªæœ‰Future&amp;#x2F;Promiseæ”¯æŒ</summary>
      
    
    
    
    
    <category term="Scala" scheme="https://cuipengfei.me/tags/Scala/"/>
    
    <category term="Reactive" scheme="https://cuipengfei.me/tags/Reactive/"/>
    
    <category term="ğŸ¸" scheme="https://cuipengfei.me/tags/%F0%9F%90%B8/"/>
    
    <category term="Future" scheme="https://cuipengfei.me/tags/Future/"/>
    
  </entry>
  
  <entry>
    <title>ã€Œè¯‘ã€å¤§è§„æ¨¡æ•æ·</title>
    <link href="https://cuipengfei.me/blog/2019/12/06/in-the-large/"/>
    <id>https://cuipengfei.me/blog/2019/12/06/in-the-large/</id>
    <published>2019-12-06T08:19:00.000Z</published>
    <updated>2019-12-06T08:19:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡åœ°å€ï¼š <a href="https://blog.cleancoder.com/uncle-bob/2018/04/02/InTheLarge.html">https://blog.cleancoder.com/uncle-bob/2018/04/02/InTheLarge.html</a></p><p>åŸä½œè€…ï¼šRobert C. Martin (Uncle Bob)</p><p>è‡ªæ•æ·ä¹‹å¼€ç«¯å§‹ï¼Œæˆ‘ä»¬å°±æ€è€ƒå¤§è§„æ¨¡æ•æ·çš„é—®é¢˜ã€‚æˆ‘ä»¬æ˜¯å¦èƒ½å¤ŸæŠŠè½»é‡çº§ï¼Œè¿­ä»£ï¼Œå¢é‡ï¼Œå¿«é€Ÿåé¦ˆç­‰è½¯ä»¶å¼€å‘çš„åŸç†åº”ç”¨äºè§„æ¨¡å·¨å¤§çš„é¡¹ç›®å‘¢ï¼Ÿ</p><p>æœ€åˆæˆ‘ä»¬æƒ³åˆ°çš„ç­”æ¡ˆæ˜¯Scrum of Scrumsä¹‹ç±»çš„ä¸œè¥¿ã€‚è¿™ä¸ªæƒ³æ³•æ˜¯åœ¨æ›´é«˜çš„å±‚æ¬¡ä¸Šé€’å½’åœ°åº”ç”¨æ•æ·å¼€å‘çš„åŸç†ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®éœ€è¦è¶…è¿‡5-12ä¸ªå¼€å‘äººå‘˜ï¼Œé‚£ä¹ˆå¯ä»¥ç»„ç»‡ä¸¤ä¸ªè¿™æ ·çš„å›¢é˜Ÿï¼Œä»¥åŠä¸€ä¸ªæ›´é«˜çº§åˆ«çš„å›¢é˜Ÿæ¥â€œç›‘ç£ï¼Ÿâ€ä»–ä»¬ã€‚</p><p>è¯·æ³¨æ„ä¸Šé¢çš„é—®å·ã€‚å½“æˆ‘ä»¬å¼€å§‹è€ƒè™‘å¤§å‹é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ä¸å¯é¿å…åœ°è¦è°ˆåŠå±‚çº§åŒ–çš„ç»„ç»‡ã€‚ä½†æ˜¯æ•æ·ä¼¼ä¹æ˜¯åŒæ¶ç»„ç»‡å±‚çº§çš„ã€‚æ¯•ç«Ÿï¼Œæ•æ·å°±æ˜¯å…³äºå¹³ç­‰ä¸»ä¹‰çš„ã€‚æ•æ·æ˜¯æ‹’ç»å‘½ä»¤å’Œæ§åˆ¶çš„ã€‚æ•æ·æ˜¯æ‹’ç»è®¡åˆ’å’Œæ—¶é—´è¡¨çš„ï¼Œè¿˜æœ‰â€¦</p><p><strong>æ— ç¨½ä¹‹è°ˆï¼å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼</strong></p><p>æ•æ·å…¶å®æ˜¯ä¸€åœºâ€œé£æ°´è½®æµè½¬â€çš„é©å‘½ã€‚åœ¨è½¯ä»¶è¡Œä¸šçš„æ—©æœŸï¼Œæˆ‘ä»¬åŸæœ¬å°±ä»¥æ•æ·çš„æ–¹å¼ç¼–å†™ä»£ç ã€‚æˆ‘ä»¬å†™å°å—ä»£ç ç‰‡æ®µï¼Œå¯¹å…¶è¿›è¡Œäº†æµ‹è¯•ï¼Œå°†å®ƒä»¬æ„å»ºä¸ºæ›´å¤§çš„å—ï¼Œå¦‚æ­¤å¾ªç¯å¾€å¤ã€‚å¦‚æœæ‚¨å›åˆ°1960å¹´ä»£åæœŸï¼Œå¹¶è§‚å¯Ÿå½“æ—¶äººä»¬ç¼–å†™ä»£ç çš„æ–¹å¼ï¼Œæ‚¨ä¼šå‘ç°æ•æ·çš„å°è·å°–å°–è§’æ­£åœ¨æ˜¾éœ²å‡ºæ¥ã€‚</p><p>å½“ç„¶ï¼Œå½“æ—¶æˆ‘ä»¬åœ¨ç¡¬ä»¶æ–¹é¢å—åˆ°äº†å¾ˆå¤§çš„é™åˆ¶ã€‚ç¼–è¯‘è¦è·‘å¥½å‡ ä¸ªå°æ—¶ã€‚ä»£ç ç¼–è¾‘è¦ç”¨ç”µä¼ æ‰“å­—æœºã€‚é‚£æ—¶ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜æ ¹æœ¬ä¸ä¼šä½¿ç”¨é”®ç›˜ã€‚å› æ­¤ä»–ä»¬è®©æŒ‰é”®æ“ä½œå‘˜æ›¿ä»–ä»¬è¾“å…¥ä»£ç ã€‚åœ¨è¿™ç§ç¯å¢ƒä¸‹ï¼Œå¾ˆéš¾å®ç°å¿«é€Ÿåé¦ˆæœºåˆ¶ã€‚</p><p>å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬ä»ç«­å°½æ‰€èƒ½å»ç¼©çŸ­åé¦ˆå‘¨æœŸã€‚æˆ‘ä»¬ä½¿ç”¨æ±‡ç¼–å™¨ç¼–å†™ç¨‹åºï¼Œååœ¨æ§åˆ¶å°å‰é€šè¿‡ç”¨å…«è¿›åˆ¶æˆ–åå…­è¿›åˆ¶æ‰“è¡¥ä¸çš„æ–¹å¼æ¥è¿›è¡Œè°ƒè¯•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è°ƒè¯•å™¨ä¸­æ‰§è¡Œä»£ç ï¼Œç”šè‡³é€šè¿‡å•æ­¥æ‰§è¡Œæ¥æµ‹è¯•ä»£ç ã€‚ç»å¹´ç´¯æœˆï¼Œç†Ÿèƒ½ç”Ÿå·§ã€‚è¿™æ˜¯åœ¨åˆç†çš„æ—¶é—´å†…å®Œæˆå·¥ä½œçš„å”¯ä¸€æ–¹æ³•ã€‚</p><p>ä½†æ˜¯â€œé£æ°´è½®æµè½¬â€äº†ã€‚æˆ‘ä»¬å¼€å§‹ä½¿ç”¨åœ¨æ§åˆ¶å°ä¸Šä¸å®¹æ˜“è°ƒè¯•çš„è¯­è¨€ã€‚æˆ‘ä»¬å¼€å§‹ç¼–å†™è¶Šæ¥è¶Šå¤§çš„ç¨‹åºã€‚ä¸ºäº†åœ¨åé¦ˆå‘¨æœŸå¦‚æ­¤é•¿çš„ç¯å¢ƒä¸­å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦åˆ¶å®šè®¡åˆ’ã€‚</p><p>ç€‘å¸ƒå°±åœ¨è¿™æ ·çš„ç¯å¢ƒä¸­è¯ç”Ÿäº†å‡ºæ¥ã€‚å½“ç¼–è¾‘,ç¼–è¯‘,æµ‹è¯•çš„å¾ªç¯å‘¨æœŸéœ€è¦ä¸€æ•´å¤©çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œå¤§é‡çš„è®¡åˆ’å’Œæ£€æŸ¥ã€‚åœ¨24å°æ—¶çš„å¾ªç¯å‘¨æœŸå†…åšTDDå’Œé‡æ„æ˜¯ä¸ç°å®çš„ï¼</p><p>ä½†æ˜¯â€œé£æ°´â€ä¸€ç›´åœ¨è½¬åŠ¨ã€‚ä»Šå¤©çš„å¤§å¤šæ•°ç¨‹åºå‘˜éƒ½æ²¡æœ‰æ·±åˆ‡ä½“ä¼šåˆ°æ‘©å°”å®šå¾‹çš„æŒ‡æ•°å‘å±•ã€‚æˆ‘ä»¬ä»1970å¹´çš„24å°æ—¶å¾ªç¯å‘¨æœŸï¼Œåˆ°1980å¹´çš„60åˆ†é’Ÿå¾ªç¯å‘¨æœŸï¼Œåˆ°1990å¹´çš„ååˆ†é’Ÿå¾ªç¯å‘¨æœŸï¼Œå†åˆ°2000å¹´çš„10ç§’å¾ªç¯å‘¨æœŸã€‚åˆ°2005å¹´ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜çš„å¾ªç¯å‘¨æœŸä¸åˆ°1ç§’ã€‚</p><p>æ•æ·å°±åœ¨è¿™æ ·çš„ç¯å¢ƒä¸­è¯ç”Ÿäº†å‡ºæ¥ã€‚æ•æ·æ˜¯å¯¹1960å¹´ä»£å¿«é€Ÿå‘¨è½¬ï¼Œé«˜é¢‘åé¦ˆå¼€å‘ç­–ç•¥çš„ä¸€ç§å†å²å›å½’ï¼Œä¸è¿‡è¿™æ¬¡æˆ‘ä»¬æœ‰äº†æ›´å¼ºå¤§çš„æœºå™¨ï¼Œæ›´å¼ºå¤§çš„è¯­è¨€å’Œå·¥å…·ä»¥åŠæ›´å¤§è§„æ¨¡çš„é¡¹ç›®ã€‚</p><p>æ•æ·ä¹Ÿå¯ä»¥è¯´æ˜¯ä»å†å²çš„ç°çƒ¬ä¸­æµ´ç«é‡ç”Ÿè€Œæ¥çš„ã€‚ç€‘å¸ƒè™½ç„¶åœ¨70å¹´ä»£å’Œ80å¹´ä»£æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œä½†å´ä»¤äººéå¸¸ç—›è‹¦ã€‚åœ¨é‚£å‡ åå¹´ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†å“ªäº›äº‹æƒ…æ˜¯ä¸è¯¥åšçš„ã€‚å› æ­¤ï¼Œå½“æ•æ·åœ¨90å¹´ä»£æœ«å‡ºç°æ—¶ï¼Œå®ƒä¹Ÿæ‰¿è½½ç€ä¹‹å‰é‚£æ®µé»‘æš—æ—¶æœŸæ‰€ç§¯ç´¯çš„æ•™è®­ã€‚</p><p>æ•æ·å´ä¹Ÿä¸ä»…ä»…æ˜¯å¯¹çŸ­åé¦ˆå‘¨æœŸçš„å†å²å›å½’ã€‚æ•æ·åœ¨çŸ­åé¦ˆå‘¨æœŸçš„åŸºç¡€ä¹‹ä¸Šå¢å¼ºäº†çºªå¾‹ã€‚è¯¸å¦‚æµ‹è¯•ï¼Œé‡æ„ï¼Œç»“å¯¹ç¼–ç¨‹å’Œé«˜åº¦è‡ªåŠ¨åŒ–ä¹‹ç±»çš„å®è·µã€‚æ•æ·ç¡®å®è®©æˆ‘ä»¬ä»å…­åå¹´ä»£çš„ç­–ç•¥ä¸­å‰è¿›äº†ã€‚</p><p>ä¸è¿‡å‰è¿›çš„æ–¹å‘æ˜¯ä»€ä¹ˆï¼Ÿæ•æ·é©å‘½æ”¹è¿›äº†ä»€ä¹ˆï¼Ÿ</p><p>æ•æ·é©å‘½å…³æ³¨çš„æ˜¯ç›¸å¯¹è¾ƒ<em>å°</em>çš„å›¢é˜Ÿå¦‚ä½•å¼€å‘ç›¸å¯¹è¾ƒ<em>å°</em>çš„è½¯ä»¶é¡¹ç›®ã€‚è¯·æ³¨æ„ï¼Œæˆ‘å¼ºè°ƒäº†â€œ<em>å°</em>â€è¿™ä¸ªå­—ã€‚</p><p>æ•æ·å›¢é˜Ÿæ“…é•¿äºåˆ›å»ºåä¸‡è¡Œå·¦å³çš„è½¯ä»¶ç³»ç»Ÿã€‚åä¸‡è¡Œå·²ç»å¯ä»¥åšå¾ˆå¤šäº‹æƒ…äº†ã€‚å¯¹äºè®¸å¤šå…¬å¸è€Œè¨€ï¼Œä¸€ä¸¤ä¸ªæ•æ·å›¢é˜Ÿè¶³ä»¥æ»¡è¶³ä»–ä»¬ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªåƒä¸‡è¡Œä»£ç çš„ç³»ç»Ÿï¼Œé‚£ä¹ˆä¸€ä¸ªæ•æ·å›¢é˜Ÿå°±ä¸å¤Ÿäº†ã€‚æ‚¨éœ€è¦å¤§çº¦ä¸€ç™¾ä¸ªå›¢é˜Ÿæ¥æ„å»ºåƒä¸‡ä»£ç è¡Œçº§åˆ«çš„ç³»ç»Ÿã€‚</p><p>ä½†æ˜¯ï¼Œæ‚¨å¦‚ä½•ç®¡ç†ä¸€ç™¾ä¸ªæ•æ·å›¢é˜Ÿï¼Ÿæ‚¨å¦‚ä½•ç»™ä»–ä»¬æä¾›ç”¨æˆ·æ•…äº‹ï¼Ÿæ‚¨å¦‚ä½•åè°ƒå®ƒä»¬ä¹‹é—´çš„æ¥å£ï¼Ÿæ‚¨å¦‚ä½•åœ¨é‚£åƒä¸‡è¡Œä»£ç ä¸­åˆ›é€ è¾¹ç•Œè€Œè®©å›¢é˜Ÿå¯ä»¥å½¼æ­¤ç‹¬ç«‹å·¥ä½œï¼Ÿ</p><p>ä»¥åŠæ‚¨å¦‚ä½•ä»¥â€œæ•æ·â€çš„æ–¹å¼åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿ ï¼ˆè¿™æ‰æ˜¯çœŸæ­£çš„é—®é¢˜ï¼‰</p><p><strong>ç­”æ¡ˆæ˜¯ï¼šä½ ä¸èƒ½ï¼</strong></p><p>æˆ‘ä»¬äººç±»éå¸¸æ“…é•¿äºå»ºè®¾å¤§å‹é¡¹ç›®ã€‚é•¿ä¹…ä»¥æ¥æˆ‘ä»¬å°±çŸ¥é“å¦‚ä½•åšè¿™ä»¶äº‹ã€‚</p><p><img data-src="https://blog.cleancoder.com/assets/pyramids.jpg" alt="alt img"></p><p>æƒ³æƒ³æˆ‘ä»¬äººç±»å®Œæˆè¿‡çš„çœŸæ­£å·¨å¤§çš„é¡¹ç›®å§ã€‚</p><ul><li>é˜¿æ³¢ç½—ç™»æœˆï¼šæˆ‘ä»¬æŠŠäººé€åˆ°æœˆçƒä¸Šï¼</li><li>è¯ºæ›¼åº•æˆ˜å½¹ï¼šæˆ‘ä»¬åœ¨50è‹±é‡Œåšå›ºçš„é˜²çº¿ä¸Šï¼Œä»¥156000åå£«å…µå…¥ä¾µäº†è¯ºæ›¼åº•ã€‚</li><li>æˆ‘ä»¬æ‹¥æœ‰æ”¯æŒ80äº¿äººå£çš„ä¸–ç•Œç»æµã€‚</li><li>å…¨çƒå„åœ°éƒ½æœ‰åºå¤§çš„ç½‘ç»œï¼Œæ‚¨å¯ä»¥åœ¨æ ‘æ—é‡Œå¾’æ­¥æ—¶åœ¨æ‰‹æœºä¸Šè¯»è¿™ç¯‡æ–‡ç« ï¼</li><li>ä½ è¦ä¹°ä¸œè¥¿å—ï¼ŸæŒ‰å‡ ä¸‹æ‰‹æœºï¼Œæ˜å¤©ç”šè‡³ä»Šå¤©å°±ä¼šæœ‰äººæ¥é€å¿«é€’ã€‚</li><li>æˆ‘ä»¬å°†çº¢è‰²è·‘è½¦é©¶å…¥äº†å¤ªé˜³è½¨é“ã€‚</li></ul><p>åº”è¯¥ä¸ç”¨è¯´æ›´å¤šä¾‹å­äº†ã€‚æˆ‘ä»¬äººç±»ç¡®å®éå¸¸æ“…é•¿åšå¤§äº‹ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯¹å¤§å‹è½¯ä»¶ä¼šæœ‰æ‰€å¿§è™‘å‘¢ï¼Ÿæˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•æ„å»ºå¤§å‹è½¯ä»¶äº†ã€‚æˆ‘ä»¬å·²ç»è¿™æ ·åšäº†50å¤šå¹´æˆ–æ›´ä¹…äº†ã€‚â€œå¤§â€çš„éƒ¨åˆ†å®é™…ä¸Šä»æ¥ä¸æ˜¯é—®é¢˜æ‰€åœ¨ã€‚æˆ‘ä»¬ç”¨æ•æ·è§£å†³çš„é—®é¢˜æ˜¯å…³äºâ€œ<strong>å°</strong>â€çš„é‚£éƒ¨åˆ†ã€‚æˆ‘ä»¬ä¹‹å‰ä¸çŸ¥é“å¦‚ä½•æå®šçš„ï¼Œæ˜¯åš<strong>å°</strong>å‹é¡¹ç›®ã€‚</p><p>æˆ‘ä»¬ä¸€ç›´éƒ½çŸ¥é“å¦‚ä½•åšå¤§å‹é¡¹ç›®ã€‚é‚£å°±æ˜¯åˆ†è€Œæ²»ä¹‹ã€‚æ•æ·è§£å†³äº†å…¶ä¸­â€œ<strong>å°</strong>â€çš„é‚£ä¸€éƒ¨åˆ†ã€‚æ•æ·ä¸â€œ<strong>å¤§</strong>â€çš„éƒ¨åˆ†æ— å…³ã€‚</p><p>ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯â€¦â€¦å¹³ç­‰ä¸»ä¹‰ï¼æ‹’ç»è®¡åˆ’å’Œå‘½ä»¤ä¸æ§åˆ¶ï¼æ•æ·ï¼</p><p><strong>æ— ç¨½ä¹‹è°ˆï¼</strong></p><p>æ•æ·ä¸æ˜¯å¹³ç­‰ä¸»ä¹‰ã€‚æ•æ·ä¸æ˜¯æ‹’ç»è®¡åˆ’ï¼Œä¹Ÿä¸æ˜¯æ‹’ç»å‘½ä»¤å’Œæ§åˆ¶ã€‚äº‹å®ä¸Šï¼Œæ•æ·æ˜¯å‘½ä»¤å’Œæ§åˆ¶ä½“ç³»ä¸­æœ€å°å•å…ƒçš„ä½“ç°ï¼šæˆ˜æœ¯å°é˜Ÿã€‚</p><p>æ˜¯çš„ï¼Œåœ¨å±‚çº§ç»“æ„çš„æœ«ç«¯ï¼Œå‘½ä»¤å’Œæ§åˆ¶ä¸å†æœ‰æ•ˆã€‚ä¸€å°ç»„äººå¯ä»¥é€šè¿‡å¤§é‡åé¦ˆå’Œæ¿€çƒˆçš„æ²Ÿé€šåœ¨è¾ƒçŸ­çš„å‘¨æœŸå†…å·¥ä½œï¼Œä»¥å®ç°ç›®æ ‡ã€‚è¿™å°±æ˜¯ä¸€æ”¯æ•æ·çš„å›¢é˜Ÿã€‚åœ¨è¿™ä¸ªçº§åˆ«ä¸Šï¼Œä¸¥æ ¼çš„å‘½ä»¤å’Œæ§åˆ¶æ˜¯æä¸ºæœ‰å®³çš„ã€‚ä½†æ˜¯åœ¨æ­¤çº§åˆ«ä¹‹ä¸Šï¼Œå‘½ä»¤å’Œæ§åˆ¶å°±å˜å¾—æœ‰å¿…è¦äº†ã€‚åœ¨å±‚çº§ä¸Šè¶Šå¾€ä¸Šèµ°ï¼Œè¿™ç§æ•ˆåº”å°±è¶Šæ˜æ˜¾ã€‚æ²¡æœ‰å¤§é‡çš„å‘½ä»¤å’Œæ§åˆ¶ï¼Œå°±æ— æ³•è®¾è®¡ï¼Œå»ºé€ ï¼Œç”Ÿäº§å’Œé”€å”®æ•°ä»¥äº¿éƒ¨çš„iPhoneã€‚</p><p>å¸‚åœºä¸Šæœ‰å¾ˆå¤šç§å¤§è§„æ¨¡æ•æ·çš„ç©æ³•ã€‚æœ‰å…³è¯¥ä¸»é¢˜çš„ä¹¦ç±å’Œåšå®¢ä¹Ÿæœ‰å¾ˆå¤šã€‚ä¹Ÿæœ‰äººæˆç«‹äº†å’¨è¯¢å…¬å¸ï¼Œä¸“é—¨ä¸ºå¤§å…¬å¸åšå¤§è§„æ¨¡æ•æ·çš„è½¬å‹ã€‚è¿™æ²¡æœ‰ä»€ä¹ˆä¸å¥½çš„ã€‚</p><p>è¿™äº›å¤§è§„æ¨¡æ•æ·æ–¹æ³•æ‰€è®²çš„ç­–ç•¥å’ŒæŠ€æœ¯éƒ½æ²¡æœ‰é”™ã€‚åªä¸è¿‡ï¼Œå®ƒä»¬ä¸æ˜¯æ•æ·çš„ã€‚å®ƒä»¬ä¸æ•æ·æ— å…³ã€‚å®ƒä»¬æ˜¯åœ¨äººç±»å‡ åƒå¹´æ¥ç”¨äºå®Œæˆé‡å¤§å·¥ä½œçš„ç­–ç•¥å’ŒæŠ€æœ¯çš„åŸºç¡€ä¸ŠåŠ äº†ç‚¹æ•æ·çš„â€œå‘³é“â€ã€‚</p><p>è¿™ç‚¹å‘³é“æ¥è‡ªæ•æ·ä½¿ç”¨çš„è¯æ±‡å’Œæ¦‚å¿µã€‚å¢æ·»äº›å£å‘³æ²¡æœ‰é”™â€“æ²¡é—®é¢˜ã€‚å¦‚æœæ‚¨å–œæ¬¢ä½¿ç”¨æ•æ·ä¸­çš„è¯è¯­å’Œæ¦‚å¿µï¼Œé‚£å°±å°½ç®¡å»ç”¨ã€‚ä½†æ˜¯ä¸è¦è¿‡åˆ†å…³æ³¨å®ƒçš„â€œæ•æ·æ€§â€ã€‚ä¸€æ—¦ä½ è¦åšå¤§è§„æ¨¡çš„äº‹æƒ…ï¼Œå°±ç¦»å¼€äº†æ•æ·çš„é¢†åŸŸã€‚å¸Œæœ›æ‚¨çš„å„ä¸ªå¼€å‘å°ç»„æ­£åœ¨ä½¿ç”¨æ•æ·ï¼›ä½†æ˜¯æ•´ä¸ªå¤§è§„æ¨¡é¡¹ç›®å¹¶ä¸æ˜¯æ•æ·çš„ã€‚</p><p>å› ä¸ºæ•æ·æ˜¯ä¸“æ³¨äºåšâ€<strong>å°</strong>â€œäº‹æƒ…çš„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åŸæ–‡åœ°å€ï¼š &lt;a href=&quot;https://blog.cleancoder.com/uncle-bob/2018/04/02/InTheLarge.html&quot;&gt;https://blog.cleancoder.com/uncle-bob/2018/04/02/InTheLa</summary>
      
    
    
    
    
    <category term="Uncle Bob" scheme="https://cuipengfei.me/tags/Uncle-Bob/"/>
    
  </entry>
  
  <entry>
    <title>[è¯‘] FP vs OO</title>
    <link href="https://cuipengfei.me/blog/2019/11/03/fp-vs-oo/"/>
    <id>https://cuipengfei.me/blog/2019/11/03/fp-vs-oo/</id>
    <published>2019-11-03T04:39:00.000Z</published>
    <updated>2019-11-03T04:39:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŸæ–‡åœ°å€ï¼š<a href="https://blog.cleancoder.com/uncle-bob/2018/04/13/FPvsOO.html">https://blog.cleancoder.com/uncle-bob/2018/04/13/FPvsOO.html</a></p><p>åŸä½œè€…ï¼šRobert C. Martin (Uncle Bob)</p><p>åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œæˆ‘é€šè¿‡ä¸äººç»“å¯¹æ¥å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œä»–ä»¬ä¸­çš„å¾ˆå¤šäººè¡¨è¾¾äº†åå¯¹OOçš„åè§ã€‚ä»–ä»¬ç»å¸¸ä¼šè¯´ï¼šâ€œå•Šï¼Œè¿™å¤ªåƒå¯¹è±¡äº†ã€‚â€</p><p>ä»–ä»¬ä¼šè¿™æ ·è¯´æ˜¯å› ä¸ºä»–ä»¬è®¤ä¸ºFPå’ŒOOåœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯äº’æ–¥çš„ã€‚è®¸å¤šäººä¼¼ä¹è®¤ä¸ºç¨‹åºFPçš„ç¨‹åº¦ç­‰åŒäºå…¶éOOçš„ç¨‹åº¦ã€‚æˆ‘è®¤ä¸ºè¿™ç§è§‚ç‚¹æ˜¯å­¦ä¹ æ–°äº‹ç‰©çš„è‡ªç„¶ç»“æœã€‚</p><p>å½“æˆ‘ä»¬é‡‡ç”¨ä¸€ç§æ–°æŠ€æœ¯æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å€¾å‘äºé¿å¼€ä»¥å‰ä½¿ç”¨çš„æ—§æŠ€æœ¯ã€‚è¿™å¾ˆè‡ªç„¶ï¼Œå› ä¸ºæˆ‘ä»¬è®¤ä¸ºæ–°æŠ€æœ¯â€œæ›´å¥½â€ï¼Œå› æ­¤æ—§æŠ€æœ¯å°±ä¸€å®šæ˜¯â€œæ›´ç³Ÿâ€çš„ã€‚</p><p>åœ¨æ­¤åšå®¢ä¸­ï¼Œæˆ‘å°†è¯´æ˜OOå’ŒFPæ˜¯æ­£äº¤çš„ï¼Œä½†å®ƒä»¬å¹¶ä¸äº’æ–¥ã€‚ä¸€ä¸ªå¥½çš„å‡½æ•°å¼ç¨‹åºå¯ä»¥ï¼ˆå¹¶ä¸”åº”è¯¥ï¼‰æ˜¯é¢å‘å¯¹è±¡çš„ã€‚è€Œä¸”ä¸€ä¸ªå¥½çš„é¢å‘å¯¹è±¡ç¨‹åºå¯ä»¥ï¼ˆå¹¶ä¸”åº”è¯¥ï¼‰æ˜¯å‡½æ•°å¼çš„ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»éå¸¸è°¨æ…åœ°ç»™FPå’ŒOOè¿™ä¸¤ä¸ªè¯è¯­ä¸‹ä¸ªå®šä¹‰ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯OOï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯OOï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯OOï¼Ÿ"></a>ä»€ä¹ˆæ˜¯OOï¼Ÿ</h1><p>æˆ‘å°†åœ¨è¿™é‡Œé‡‡å–éå¸¸è¿˜åŸä¸»ä¹‰çš„ç«‹åœºã€‚OOæœ‰è®¸å¤šæœ‰æ•ˆçš„å®šä¹‰ï¼Œæ¶µç›–äº†ä¸°å¯Œçš„æ¦‚å¿µï¼ŒåŸç†ï¼ŒæŠ€æœ¯ï¼Œæ¨¡å¼å’Œå“²å­¦ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†å¿½ç•¥æ‰€æœ‰è¿™äº›å†…å®¹ï¼Œè€Œå°†é‡ç‚¹æ”¾åœ¨æœ€åŸºç¡€çš„ä¸œè¥¿ä¸Šã€‚æˆ‘é‡‡å–è¿™ç§è¿˜åŸä¸»ä¹‰çš„åŸå› æ˜¯ï¼Œå¾ˆå¤šå›´ç»•ç€OOçš„ä¸°å¯Œç‰¹æ€§å®é™…ä¸Šæ ¹æœ¬ä¸æ˜¯OOæ‰€ç‰¹æœ‰çš„ï¼Œè€Œæ˜¯æ•´ä½“è½¯ä»¶å¼€å‘ä¸°å¯Œæ€§çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°†é‡ç‚¹ä»‹ç»é¢å‘å¯¹è±¡ä¸å¯åˆ†å‰²çš„é‚£éƒ¨åˆ†ã€‚</p><p>çœ‹çœ‹ä»¥ä¸‹ä¸¤ä¸ªè¡¨è¾¾å¼ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>ï¼š<span class="built_in">f</span>(o);</span><br><span class="line"><span class="number">2</span>ï¼šo<span class="selector-class">.f</span>();</span><br></pre></td></tr></table></figure><p>æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>æ˜¾ç„¶ï¼Œæ²¡æœ‰å®é™…çš„è¯­ä¹‰å·®å¼‚ã€‚å·®å¼‚å®Œå…¨åœ¨è¯­æ³•ä¸Šã€‚ä½†æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥æ˜¯FPçš„ï¼Œå¦ä¸€ä¸ªçœ‹èµ·æ¥æ˜¯OOçš„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¼šæ¨æ–­è¡¨è¾¾å¼2å…·æœ‰ç‰¹æ®Šçš„è¯­ä¹‰è¡Œä¸ºï¼ŒåŒæ—¶æˆ‘ä»¬æ¨æ–­è¡¨è¾¾å¼1ä¸å…·æœ‰è¿™ç§ç‰¹æ®Šè¯­ä¹‰è¡Œä¸ºã€‚è¿™ç§ç‰¹æ®Šè¯­ä¹‰è¡Œä¸ºå°±æ˜¯ï¼šå¤šæ€æ€§ã€‚</p><p>å½“æˆ‘ä»¬çœ‹åˆ°è¡¨è¾¾å¼1æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°åä¸ºfçš„å‡½æ•°è¢«åº”ç”¨åœ¨äº†oä¸Šã€‚æˆ‘ä»¬æ¨æ–­åªæœ‰ä¸€ä¸ªåä¸ºfçš„å‡½æ•°ï¼Œå¹¶ä¸”å®ƒå¯èƒ½ä¸æ˜¯å›´ç»•ç€oçš„æ ‡å‡†å‡½æ•°ä¸­çš„ä¸€å‘˜ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°è¡¨è¾¾å¼2æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªåä¸ºfçš„æ¶ˆæ¯è¢«å‘é€ç»™äº†ä¸€ä¸ªåä¸ºoçš„å¯¹è±¡ã€‚æˆ‘ä»¬æ¨æµ‹å¯èƒ½è¿˜æœ‰å…¶ä»–ç±»å‹çš„å¯¹è±¡å¯ä»¥æ¥å—è¯¥æ¶ˆæ¯fï¼Œå› æ­¤æˆ‘ä»¬ä¸çŸ¥é“è¢«è°ƒç”¨çš„få…·ä½“æ˜¯å“ªä¸€ä¸ªã€‚<strong>å…¶è¡Œä¸ºå–å†³äºoçš„ç±»å‹ï¼Œå³fæ˜¯å¤šæ€çš„ã€‚</strong></p><p>å¯¹å¤šæ€æ€§çš„è¿™ç§é¢„æœŸæ˜¯OOç¼–ç¨‹çš„æœ¬è´¨ã€‚è¿™æ˜¯è¿˜åŸè®ºçš„å®šä¹‰ï¼›å®ƒä¸OOå¯†ä¸å¯åˆ†ã€‚æ²¡æœ‰å¤šæ€æ€§çš„OOä¸æ˜¯OOã€‚OOçš„æ‰€æœ‰å…¶ä»–å±æ€§ï¼Œä¾‹å¦‚å°è£…çš„æ•°æ®ï¼Œç»‘å®šåˆ°è¯¥æ•°æ®çš„æ–¹æ³•ï¼Œç”šè‡³ç»§æ‰¿ï¼Œä¸è¡¨è¾¾å¼1çš„å…³ç³»è¦æ¯”ä¸è¡¨è¾¾å¼2çš„å…³ç³»æ›´å¤šã€‚</p><p>Cå’ŒPascalç¨‹åºå‘˜ï¼ˆç”šè‡³åœ¨æŸç§ç¨‹åº¦ä¸Šç”šè‡³åŒ…æ‹¬Fortranå’ŒCobolç¨‹åºå‘˜ï¼‰éƒ½åˆ›å»ºäº†åŒ…å«å°è£…å‡½æ•°å’Œæ•°æ®ç»“æ„çš„ç³»ç»Ÿã€‚è¦åˆ›å»ºå’Œä½¿ç”¨è¿™ç§å°è£…çš„ç»“æ„å¹¶ä¸ä¸€å®šéå¾—éœ€è¦OOè¯­è¨€ã€‚å°è£…ï¼Œç”šè‡³ç®€å•çš„ç»§æ‰¿ï¼Œåœ¨æ­¤ç±»è¯­è¨€ä¸­éƒ½æ˜¯æ˜¾è€Œæ˜“è§ä¸”è‡ªç„¶çš„ã€‚ï¼ˆåœ¨Cå’ŒPascalä¸­æ¯”å…¶ä»–æ›´è‡ªç„¶ã€‚ï¼‰</p><p>å› æ­¤ï¼ŒçœŸæ­£å°†OOç¨‹åºä¸éOOç¨‹åºåŒºåˆ†å¼€çš„æ˜¯å¤šæ€æ€§ã€‚</p><p>æ‚¨å¯èƒ½ä¼šè¯´å¯ä»¥é€šè¿‡åœ¨få†…éƒ¨ä½¿ç”¨switchè¯­å¥æˆ–if&#x2F;elseæ¥å®ç°å¤šæ€ã€‚çš„ç¡®å¦‚æ­¤ï¼Œå› æ­¤æˆ‘å¿…é¡»å‘OOæ·»åŠ ä¸€ä¸ªçº¦æŸã€‚</p><blockquote><p>å¤šæ€æœºåˆ¶ä¸€å®šä¸èƒ½åˆ›å»ºä»è°ƒç”¨æ–¹åˆ°è¢«è°ƒç”¨æ–¹çš„æºç ä¾èµ–å…³ç³»ã€‚</p></blockquote><p>ä¸ºäº†è§£é‡Šè¿™ä¸€ç‚¹ï¼Œè¯·å†æ¬¡çœ‹çœ‹ä¸Šæ–‡çš„ä¸¤ä¸ªè¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼1ï¼šf(o)ä¼¼ä¹å¯¹få‡½æ•°çš„æºç æœ‰ä¾èµ–ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥å¦‚æ­¤æ¨æ–­æ˜¯å› ä¸ºæˆ‘ä»¬æ¨æ–­åªæœ‰ä¸€ä¸ªfï¼Œæ‰€ä»¥è°ƒç”¨è€…å¿…é¡»è®¤è¯†è¢«è°ƒç”¨è€…ã€‚</p><p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬çœ‹è¡¨è¾¾å¼2æ—¶ï¼Œä»o.f()æˆ‘ä»¬æ¨æ–­å‡ºä¸€äº›ä¸åŒçš„ä¸œè¥¿ã€‚æˆ‘ä»¬çŸ¥é“å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªfçš„å®ç°ï¼Œè€Œä¸”æˆ‘ä»¬ä¸çŸ¥é“çœŸæ­£è¦è¢«è°ƒç”¨åˆ°çš„æ˜¯å…¶ä¸­å“ªä¸ªã€‚å› æ­¤è¡¨è¾¾å¼2å¯¹äºfå‡½æ•°çš„æºç æ²¡æœ‰ä¾èµ–ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œè¿™æ„å‘³ç€åŒ…å«å¯¹å‡½æ•°è¿›è¡Œå¤šæ€è°ƒç”¨çš„æ¨¡å—ï¼ˆæºæ–‡ä»¶ï¼‰ç»å¯¹ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼å¼•ç”¨åŒ…å«è¿™äº›å‡½æ•°å®ç°çš„æ¨¡å—ï¼ˆæºæ–‡ä»¶ï¼‰ã€‚ä¸å¯ä»¥æœ‰ä»»ä½•includeæˆ–useæˆ–requireæˆ–ä»»ä½•å…¶å®ƒè¿™æ ·çš„å£°æ˜ä½¿å¾—ä¸€ä¸ªæºæ–‡ä»¶ä¾èµ–å¦ä¸€ä¸ªã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯¹OOçš„ç®€åŒ–å®šä¹‰æ˜¯ï¼š</p><blockquote><p>è°ƒç”¨è€…çš„æºç å¯¹äºè¢«è°ƒç”¨è€…çš„æºç ä¸äº§ç”Ÿä¾èµ–çš„ä¸€ç§åŠ¨æ€å¤šæ€æŠ€å·§ã€‚</p></blockquote><h1 id="ä»€ä¹ˆæ˜¯FPï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯FPï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯FPï¼Ÿ"></a>ä»€ä¹ˆæ˜¯FPï¼Ÿ</h1><p>åŒæ ·ï¼Œæˆ‘å°†é‡‡ç”¨è¿˜åŸä¸»ä¹‰ã€‚FPå…·æœ‰æ‚ ä¹…çš„å†å²å’Œä¼ ç»Ÿï¼Œå¯è¿½æº¯åˆ°è½¯ä»¶ä¹‹å¤–çš„å…¶ä»–é¢†åŸŸã€‚FPèŒƒå¼é‡Œå­˜åœ¨å¾ˆå¤šåŸç†ï¼ŒæŠ€æœ¯ï¼Œå®šç†ï¼Œå“²å­¦å’Œæ¦‚å¿µã€‚æˆ‘å°†å¿½ç•¥æ‰€æœ‰è¿™äº›å†…å®¹ï¼Œç›´æ¥è¿›å…¥å°†FPä¸ä»»ä½•å…¶ä»–èŒƒå¼åŒºåˆ†å¼€çš„ä¸å¯åˆ†å‰²çš„å±æ€§ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å½“ a<span class="operator">=</span><span class="operator">=</span>b æ—¶ f(a)<span class="operator">=</span><span class="operator">=</span>f(b)</span><br></pre></td></tr></table></figure><p>åœ¨å‡½æ•°å¼ç¨‹åºä¸­ï¼Œæ¯æ¬¡è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°å¹¶ç»™å‡ºåŒä¸€ä¸ªå‚æ•°æ—¶ï¼Œéƒ½ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚æ— è®ºç¨‹åºæ‰§è¡Œäº†å¤šé•¿æ—¶é—´ã€‚è¿™å«åšå¼•ç”¨é€æ˜æ€§ã€‚</p><p>è¿™æ„å‘³ç€å‡½æ•°fä¸å¯ä»¥æ›´æ”¹ä»»ä½•å½±å“å‡½æ•°fè¡Œä¸ºæ–¹å¼çš„å…¨å±€çŠ¶æ€ã€‚è€Œä¸”ï¼Œå¦‚æœæˆ‘ä»¬è¯´å‡½æ•°få¯ä»¥ä»£è¡¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰å‡½æ•° â€“ ç³»ç»Ÿä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½å¿…é¡»æ˜¯å¼•ç”¨é€æ˜çš„ â€“ é‚£ä¹ˆç³»ç»Ÿä¸­çš„ä»»ä½•å‡½æ•°éƒ½æ— æ³•æ”¹å˜ä»»ä½•å…¨å±€çŠ¶æ€ã€‚ç³»ç»Ÿä¸­çš„ä»»ä½•å‡½æ•°éƒ½æ— æ³•æ‰§è¡Œä»»ä½•æ“ä½œï¼Œæ¥å¯¼è‡´ç³»ç»Ÿä¸­çš„å¦ä¸€ä¸ªå‡½æ•°å¯¹ç›¸åŒçš„è¾“å…¥è¿”å›ä¸åŒçš„å€¼ã€‚</p><p>å…¶æ›´æ·±çš„å«ä¹‰æ˜¯ï¼Œä»»ä½•å‘½åå€¼éƒ½æ— æ³•æ›´æ”¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½æœ‰èµ‹å€¼è¿ç®—ç¬¦ã€‚</p><p>ç°åœ¨ï¼Œå¦‚æœæ‚¨ä»”ç»†åœ°è€ƒè™‘ä¸€ä¸‹ï¼Œæ‚¨å¯èƒ½ä¼šå¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šä»…ç”±å¼•ç”¨é€æ˜çš„å‡½æ•°ç»„æˆçš„ç¨‹åºæ ¹æœ¬æ— æ³•æ‰§è¡Œä»»ä½•æ“ä½œ-å› ä¸ºä»»ä½•æœ‰ç”¨çš„ç³»ç»Ÿè¡Œä¸ºéƒ½ä¼šæ”¹å˜æŸäº›äº‹ç‰©çš„çŠ¶æ€ã€‚å³ä½¿åªæ˜¯æ‰“å°æœºæˆ–æ˜¾ç¤ºå™¨çš„çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä»å¼•ç”¨é€æ˜æ€§çº¦æŸä¸­æ’é™¤ç¡¬ä»¶ä»¥åŠå¤–ç•Œçš„ä»»ä½•å…ƒç´ ï¼Œé‚£ä¹ˆäº‹å®è¯æ˜æˆ‘ä»¬ç¡®å®å¯ä»¥åˆ›å»ºéå¸¸æœ‰ç”¨çš„ç³»ç»Ÿã€‚</p><p>è¯€çªå½“ç„¶æ˜¯é€’å½’ã€‚è€ƒè™‘ä¸€ä¸ªä»¥stateæ•°æ®ç»“æ„ä½œä¸ºå‚æ•°çš„å‡½æ•°ã€‚æ­¤å‚æ•°åŒ…å«å‡½æ•°å·¥ä½œéœ€è¦çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ã€‚è¯¥å‡½æ•°å°†åˆ›å»ºä¸€ä¸ªæ–°çš„stateï¼Œé‡Œé¢åŒ…å«æ›´æ–°è¿‡çš„å€¼ã€‚è¯¥å‡½æ•°åšçš„æœ€åä¸€ä»¶äº‹å°±æ˜¯è°ƒç”¨å®ƒè‡ªå·±å¹¶æŠŠæ–°çš„stateä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ã€‚</p><p>è¿™æ˜¯å‡½æ•°å¼ç¨‹åºå¯ä»¥ç”¨æ¥è·Ÿè¸ªå†…éƒ¨çŠ¶æ€çš„å˜åŒ–è€Œæ— éœ€çœŸæ­£æ”¹å˜ä»»ä½•å†…éƒ¨çŠ¶æ€çš„ç®€å•æŠ€å·§ä¹‹ä¸€ã€‚</p><p>å› æ­¤ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„ç®€åŒ–å®šä¹‰ä¸ºï¼š</p><blockquote><p>å¼•ç”¨é€æ˜ â€“ æ²¡æœ‰é‡æ–°èµ‹å€¼ã€‚</p></blockquote><h1 id="FP-vs-OO"><a href="#FP-vs-OO" class="headerlink" title="FP vs OO"></a>FP vs OO</h1><p>ç°åœ¨OOå’ŒFPç¤¾åŒºéƒ½è¦å‘æˆ‘å¼€ç‚®äº†ã€‚è¿˜åŸä¸»ä¹‰ä¸æ˜¯èµ¢å¾—æœ‹å‹çš„å¥½æ–¹æ³•ã€‚ä½†è¿™æœ‰æ—¶å¾ˆæœ‰ç”¨ã€‚æˆ‘è®¤ä¸ºæœ‰å¿…è¦åœ¨ä¼¼ä¹æ­£åœ¨ä¼ æ’­çš„FP vs OOçš„è¿·å› ä¸Šè¯´ä¸¤å¥ã€‚</p><p>æ˜¾ç„¶ï¼Œæˆ‘é€‰æ‹©çš„ä¸¤ä¸ªå½’çº¦å®šä¹‰æ˜¯å®Œå…¨æ­£äº¤çš„ã€‚å¤šæ€å’Œå¼•ç”¨é€æ˜ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚å®ƒä»¬ä¹‹é—´æ²¡æœ‰äº¤é›†ã€‚</p><p>ä½†æ˜¯æ­£äº¤å¹¶ä¸æ„å‘³ç€ç›¸äº’æ’æ–¥ï¼ˆé—®é—®éº¦å…‹æ–¯éŸ¦å°±çŸ¥é“äº†ï¼‰ã€‚å»ºç«‹åŒæ—¶ä½¿ç”¨åŠ¨æ€å¤šæ€æ€§å’Œå¼•ç”¨é€æ˜æ€§çš„ç³»ç»Ÿæ˜¯å®Œå…¨å¯èƒ½çš„ã€‚ä¸ä»…å¯èƒ½ï¼Œè€Œä¸”æ˜¯å¯å–çš„ï¼</p><p>ä¸ºä»€ä¹ˆæ˜¯å¯å–çš„ï¼ŸäºŒè€…å„è‡ªç‹¬ç«‹å¯å–ï¼Œåˆä¸€ä»å¯å–ï¼æˆ‘ä»¬å¸Œæœ›ç³»ç»Ÿå…·æœ‰åŠ¨æ€å¤šæ€æ€§ï¼Œä¸ºäº†è§£è€¦ã€‚ä¾èµ–å…³ç³»å¯ä»¥è·¨æ¶æ„è¾¹ç•Œåè½¬ã€‚å¯ä»¥ä½¿ç”¨Mocks and Fakeså’Œå…¶ä»–ç±»å‹çš„Test Doublesè¿›è¡Œæµ‹è¯•ã€‚å¯ä»¥åœ¨ä¸å¼ºåˆ¶æ›´æ”¹å…¶ä»–æ¨¡å—çš„æƒ…å†µä¸‹ä¿®æ”¹æ¨¡å—ã€‚è¿™ä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºæ›´æ”¹å’Œæ”¹è¿›ã€‚</p><p>æˆ‘ä»¬è¿˜å¸Œæœ›ç³»ç»Ÿå…·æœ‰å¼•ç”¨é€æ˜æ€§ï¼Œä¸ºäº†å¯é¢„æµ‹æ€§ã€‚æ— æ³•æ›´æ”¹å†…éƒ¨çŠ¶æ€ä½¿ç³»ç»Ÿæ›´æ˜“äºç†è§£ï¼Œæ›´æ”¹å’Œæ”¹è¿›ã€‚å®ƒå¤§å¤§å‡å°‘äº†ç«æ€å’Œå…¶ä»–å¹¶å‘æ›´æ–°é—®é¢˜çš„æœºä¼šã€‚</p><p>åº•çº¿æ˜¯ï¼š</p><p>æ²¡æœ‰FP vs OOã€‚</p><p>FPå’ŒOOå¯ä»¥å¾ˆå¥½åœ°åˆä½œã€‚è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯ç°ä»£ç³»ç»Ÿæ‰€å¸Œæœ›å…·æœ‰çš„ã€‚åŒæ—¶åŸºäºOOå’ŒFPåŸç†æ„å»ºçš„ç³»ç»Ÿå°†æœ€å¤§é™åº¦åœ°æé«˜çµæ´»æ€§ï¼Œå¯ç»´æŠ¤æ€§ï¼Œå¯æµ‹è¯•æ€§ï¼Œç®€å•æ€§å’Œå¥å£®æ€§ã€‚æ’æ–¥ä¸€ä¸ªèµæˆå¦ä¸€ä¸ªåªä¼šå‰Šå¼±ç³»ç»Ÿçš„ç»“æ„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://blog.cleancoder.com/uncle-bob/2018/04/13/FPvsOO.html&quot;&gt;https://blog.cleancoder.com/uncle-bob/2018/04/13/FPvsOO.html&lt;</summary>
      
    
    
    
    
    <category term="Uncle Bob" scheme="https://cuipengfei.me/tags/Uncle-Bob/"/>
    
  </entry>
  
  <entry>
    <title>è¢«è¯…å’’çš„ä¸è¢«ç¥ç¦çš„</title>
    <link href="https://cuipengfei.me/blog/2019/06/20/zxz-swd/"/>
    <id>https://cuipengfei.me/blog/2019/06/20/zxz-swd/</id>
    <published>2019-06-20T14:06:00.000Z</published>
    <updated>2019-06-20T14:06:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>èº«é™·å—æ´‹å›¹åœ„ï¼Œå¿ƒç³»æ•…å›­é£ç‰©ï¼Œæ— ä»¥èŠèµ–ä¹‹ä¸­ï¼Œæ’°æ–‡æƒä½œæ…°è—‰ã€‚</p><h1 id="ä»Neal-Fordçš„ä¸€æ®µè¯è®²å¼€å»"><a href="#ä»Neal-Fordçš„ä¸€æ®µè¯è®²å¼€å»" class="headerlink" title="ä»Neal Fordçš„ä¸€æ®µè¯è®²å¼€å»"></a>ä»Neal Fordçš„ä¸€æ®µè¯è®²å¼€å»</h1><p>å‰æ®µæ—¶é—´çœ‹äº†Neal Fordçš„ä¸€ä¸ªæ¼”è®²ï¼Œ<a href="https://player.oreilly.com/videos/9781491901137">åŸè§†é¢‘</a></p><p>å…¶ä¸­ä¸€æ®µè®²åˆ°äº†ä¼ ç»Ÿå·¥ç¨‹ä¸è½¯ä»¶å·¥ç¨‹çš„åŒºåˆ«ã€‚</p><p>æ–¼æˆ‘å¿ƒç”šæœ‰æˆšæˆšç„‰ã€‚</p><p>è¯‘å¦‚ä¸‹ï¼š</p><blockquote><p>è½¯ä»¶å·¥ç¨‹å’Œä¼ ç»Ÿå·¥ç¨‹æ˜¯æˆªç„¶ä¸åŒçš„ã€‚</p></blockquote><blockquote><p>åœ¨ä¼ ç»Ÿå·¥ç¨‹çš„ä¸–ç•Œä¸­ï¼Œå½“ä½ è¿›å…¥æ–½å·¥é˜¶æ®µæ—¶ï¼Œä½ åŸºæœ¬ä¸Šæ˜¯åœ¨ç»™åŸå­å¡‘å½¢ï¼ŒåŸå­ç»“æ„æ˜¯å¾ˆéš¾é‡æ„çš„ã€‚ä¸€æ—¦ä½ å°†å®ƒä»¬å¡‘é€ æˆç‰¹å®šçš„å½¢çŠ¶ï¼Œå®ƒä»¬å¾€å¾€ä¼šä¿æŒè¿™ç§å½¢çŠ¶ï¼Œå¾ˆéš¾å°†å®ƒä»¬å˜æˆå…¶ä»–å½¢çŠ¶ã€‚é™¤éä½ ç†”åŒ–å®ƒä»¬å†å›ç‚‰é‡é€ ã€‚å› æ­¤ï¼Œåˆ¶é€ ç‰©ç†ç‰©å“æ˜¯ä¸€ä¸ªéå¸¸æ˜‚è´µçš„è¿‡ç¨‹ã€‚è¿™å°±æ„å‘³ç€ï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›åœ¨æ–½å·¥å¼€å§‹ä¹‹å‰æ­£ç¡®åšå‡ºè®¾è®¡ã€‚</p></blockquote><blockquote><p>ä½†åœ¨è½¯ä»¶ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬ä¸æ˜¯åœ¨é“¸é€ åŸå­ã€‚æˆ‘ä»¬åœ¨æ¯”ç‰¹ï¼ˆbitï¼‰çš„ä¸–ç•Œé‡Œï¼Œè¿™äº›æ¯”ç‰¹ï¼ˆbitï¼‰éƒ½éå¸¸å…·æœ‰å¯å¡‘æ€§ã€‚å¯¹æ¯”ç‰¹ï¼ˆbitï¼‰è¿›è¡Œæ›´æ”¹éå¸¸å®¹æ˜“ã€‚æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹ï¼Œä¼ ç»Ÿå·¥ç¨‹ä¸­æœ‰æ–½å·¥ï¼Œè½¯ä»¶ä¸–ç•Œä¸­ä¸ä¹‹å¯¹åº”çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé‚£å°±æ˜¯æ˜¯ç¼–è¯‘å’Œéƒ¨ç½²ã€‚ç¼–è¯‘å’Œéƒ¨ç½²å®é™…ä¸Šæ˜¯æˆ‘ä»¬æ‰€è®¾è®¡çš„ä¸œè¥¿åœ¨ç°å®ä¸–ç•Œä¸­çš„è¡¨å¾ï¼Œç”µå­æ²¿å¯¼ç”µçº¿è·¯ç§»åŠ¨ï¼Œå¯¹ç°å®ä¸–ç•Œæ–½åŠ å½±å“åŠ›ã€‚è¿™å°±è¡¨æ˜ï¼Œå¯¹äºæˆ‘ä»¬è½¯ä»¶ä¸–ç•Œè€Œè¨€ï¼Œæˆ‘ä»¬çš„è®¾è®¡è“å›¾å°±æ˜¯æˆ‘ä»¬çš„æºä»£ç ã€‚</p></blockquote><blockquote><p>åœ¨ä¼ ç»Ÿå·¥ç¨‹ä¸šä¸­ï¼Œæœ€æ˜‚è´µçš„éƒ¨åˆ†æ˜¯æ–½å·¥é˜¶æ®µã€‚åœ¨æ¡¥æ¢å’Œå…¶ä»–ç§ç±»çš„ç‰©ç†åˆ¶é€ ä¸­å­˜åœ¨è®¸å¤šé¢„æµ‹æ€§æ•°å­¦ï¼Œè¿™æ ·åšçš„åŸå› å¹¶ä¸æ˜¯ä¸ºäº†è·å¾—æ›´å®‰å…¨çš„ç»“æ„ï¼Œè™½è¯´å®ƒåœ¨å®¢è§‚ä¸Šç¡®å®ä¼šè¾¾æˆè¿™ä¸€ç‚¹ã€‚åˆè¡·å…¶å®æ˜¯ä¸ºäº†èŠ‚çº¦æˆæœ¬ã€‚é€ å®Œäº†ä¸€åº§æ¡¥æ¢ï¼Œç„¶åè®©é‡ç‰©ç¢¾å‹è¿‡å»ï¼Œè§‚å¯Ÿæ¡¥æ¢æ˜¯å¦ä¼šå´©å¡Œï¼Œä»è€Œæ¥ç¡®è®¤æ¡¥æ¢è´¨é‡è¾¾æ ‡ä¸å¦ï¼Œè¿™æ ·åšï¼Œä¸‡ä¸€å®å¡Œäº†ï¼Œè¿™æˆæœ¬å°±å®åœ¨æ˜¯å¤ªæ˜‚è´µäº†ã€‚æ‰€ä»¥ä½ éœ€è¦å¯é¢„æµ‹æ€§ï¼Œå› ä¸ºåˆ¶é€ è¿™äº›ä¸œè¥¿å¤ªè´µäº†ã€‚</p></blockquote><blockquote><p>ä½†åœ¨è½¯ä»¶ä¸–ç•Œä¸­ï¼Œå› ä¸ºæ–½å·¥è¿‡ç¨‹å¯¹åº”çš„æ˜¯ç¼–è¯‘å’Œéƒ¨ç½²ï¼Œæ‰€ä»¥æ”¹å˜çš„æˆæœ¬éå¸¸ä½ï¼Œå¯ä»¥éšæ—¶è¿›è¡Œã€‚æˆ‘ä»¬ç”šè‡³ä¸å¿…ä¸ºæ­¤æ“å¿ƒï¼Œæ¯å½“æˆ‘ä»¬åœæ­¢æ‰“å­—æ—¶ï¼Œæˆ‘ä»¬çš„è®¡ç®—æœºå†…éƒ½ä¼šæ¶Œç°å‡ºä¸€å°ç¾¤ç²¾çµæŠŠæˆ‘ä»¬è®¾è®¡çš„ä¸œè¥¿ç»™åˆ¶é€ å‡ºæ¥ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿä»¥ä¸€ç§é€¼çœŸçš„æ–¹å¼å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚</p></blockquote><blockquote><p>æ‰€ä»¥Reeveså…ˆç”Ÿè¯´ï¼Œâ€œé‰´äºè½¯ä»¶è®¾è®¡ç›¸å¯¹å®¹æ˜“å¹¶ä¸”åŸºæœ¬ä¸Šå¯ä»¥å…è´¹æ„å»ºï¼Œä¸€ä¸ªä¸è¶³ä¸ºå¥‡çš„å¯ç¤ºæ˜¯ï¼Œè½¯ä»¶è®¾è®¡å¾€å¾€éå¸¸åºå¤§å’Œå¤æ‚ã€‚â€</p></blockquote><blockquote><p>æˆ‘ç›¸ä¿¡è½¯ä»¶æ˜¯ç°åœ¨äººç±»æ€ç»´åˆ›é€ å‡ºæ¥çš„æœ€å¤æ‚çš„ä¸œè¥¿ï¼Œæœ‰å‡ ä¸ªåŸå› å¯¼è‡´å®ƒä»¬å¦‚æ­¤å¤æ‚ï¼Œå…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯ç‰©ç†ä¸–ç•Œä¸­å­˜åœ¨è®¸å¤šæœ‰ç”¨çš„çº¦æŸï¼Œè€Œè½¯ä»¶çš„ä¸–ç•Œä¸­è¿™æ ·çš„çº¦æŸå¤ªå°‘ã€‚</p></blockquote><hr><p>è“å›¾è®¾è®¡å¯¹åº”æºç ç¼–å†™ï¼Œå»ºé€ æ–½å·¥å¯¹åº”ç¼–è¯‘éƒ¨ç½²ï¼Œè¿™ç€å®æœ‰è¶£ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨å»ºç­‘è¿™ä¸ªéšå–»æ¥å…³ç…§è½¯ä»¶çš„æ—¶å€™ï¼Œé€šå¸¸éƒ½æ˜¯æŠŠæ¶æ„è®¾è®¡å¯¹ç…§åˆ°è“å›¾ä¸Šå»ï¼Œè€ŒæŠŠæºç ç¼–å†™å¯¹ç…§åˆ°å»ºé€ æ–½å·¥ä¸Šå»ã€‚</p><p>è€ŒNeal Fordä¸æ˜¯è¿™æ ·ä½¿ç”¨å»ºç­‘éšå–»çš„ã€‚</p><p><img data-src="http://i1.fuimg.com/691355/770eef4285d59e81.png" alt="Markdown"></p><p>å¯ä»¥çœ‹å‡ºæ¥ï¼ŒNeal Fordè¿™ä¸ªéšå–»åœ¨è½åœ°ç¨‹åº¦ä¸Šæ›´è¿›ä¸€å±‚ã€‚</p><h1 id="ç‰›è€çˆµçˆ·çš„è¯…å’’"><a href="#ç‰›è€çˆµçˆ·çš„è¯…å’’" class="headerlink" title="ç‰›è€çˆµçˆ·çš„è¯…å’’"></a>ç‰›è€çˆµçˆ·çš„è¯…å’’</h1><p>Neal Fordè¿™æ®µè¯çš„å†…å®¹éå¸¸ä¸°å¯Œã€‚</p><p>é™¤äº†ä¸Šè¿°éšå–»ä¹‹å¤–ï¼Œè¿˜æœ‰æ¡¥æ¢ä¸èƒ½åƒè½¯ä»¶ä¸€æ ·æµ‹è¯•ï¼Œè½¯ä»¶å¦‚æ­¤å¤æ‚çš„åŸå› æ˜¯æˆ‘ä»¬ç¼ºä¹çœŸå®ä¸–ç•Œä¸­çš„ç‰©ç†é™åˆ¶ã€‚</p><p>è¯šå“‰æ–¯è¨€ï¼Œä¸åœŸæœ¨å·¥ç¨‹å¸ˆæ¯”èµ·æ¥ï¼Œæˆ‘ä»¬è½¯ä»¶å·¥ç¨‹å¸ˆç¡®å®æ˜¯å…·æœ‰éå¸¸å¥¢ä¾ˆçš„ç¯å¢ƒã€‚è¿™ä¸ªä»£ç æ€æ ·ï¼Ÿè·‘è·‘æµ‹è¯•å°±çŸ¥é“äº†ã€‚</p><p>èƒ½æƒ³è±¡åœŸæœ¨å·¥ç¨‹å¸ˆè¯´è¿™ç§è¯å—ï¼Ÿ</p><p>è€æ¿å¨˜: é‚£æ ‹æ¥¼è®¾è®¡æçš„æ€ä¹ˆæ ·äº†ï¼Ÿæœ‰æ²¡æœ‰ä»”ç»†çš„æ£€æŸ¥è¿‡ï¼Ÿ</p><p>å·¥ç¨‹å¸ˆ: æˆ‘è§‰å¾—æ²¡é—®é¢˜ï¼Œç›´æ¥æ–½å·¥å»ºé€ å‡ºæ¥çœ‹çœ‹å°±å¥½äº†ã€‚</p><p>è€æ¿å¨˜: å¥½ï¼Œæˆ‘ç›¸ä¿¡ä½ ï¼Œæ—¢ç„¶ä½ è¿™ä¹ˆæœ‰ä¿¡å¿ƒï¼Œé‚£å°±æ¥å§ã€‚</p><p><img data-src="http://i2.tiimg.com/691355/b18dcdf9861e98bb.png" alt="Markdown"></p><p><img data-src="http://i2.tiimg.com/691355/809c6a1b7c0c142f.png" alt="Markdown"></p><p>å·¥ç¨‹å¸ˆ: ğŸ˜³ ğŸ˜³ ğŸ˜³</p><p>è€æ¿å¨˜: è¯·é—®æ‚¨ä¿¡å¿ƒçš„æ¥æºæ˜¯å•¥ï¼Ÿæœ‰ä¾æ®å—ï¼Ÿä½ è¿™ä¹ˆä¹±æï¼Œæˆ‘å¾—é™ªå¤šå°‘é’±ï¼Ÿ</p><p>å·¥ç¨‹å¸ˆ: è¿™æ˜¯ä¸ªå°å·¥ç¨‹ï¼Œæœ‰ç‚¹ç²—å¿ƒäº†ã€‚å¦ä¸€ä¸ªï¼Œé‚£ä¸ªå¤§æ¡¥çš„é¡¹ç›®ï¼Œæˆ‘ä¸€å®šç”¨å¿ƒï¼</p><p><img data-src="http://i2.tiimg.com/691355/0373758da912bbbd.png" alt="Markdown"></p><p>è€æ¿å¨˜: åˆé¾™è¿™éƒ¨åˆ†ï¼Œä½ æ˜¯ä¸æ˜¯å¿˜äº†è®¾è®¡å–œé¹Šäº†ï¼Ÿä½ æ‰“ç®—è®©ç‰›éƒç»‡å¥³è‡ªå·±ç»„æˆä¸€ä¸ªå¹³è¡Œå››è¾¹å½¢å—ï¼Ÿ</p><p>å·¥ç¨‹å¸ˆ: å’</p><p>è€æ¿å¨˜: ç ´äº§</p><p>ä¸€æ—¦å‘ç°å¤±è¯¯ï¼Œæ‹†æ‰é‡é€ å¤ªè´µï¼ŒåœŸæœ¨å·¥ç¨‹å¸ˆæ²¡æ³•åƒæˆ‘ä»¬è½¯ä»¶å·¥ç¨‹å¸ˆä¸€æ ·åŠ¨ä¸åŠ¨å°±è·‘æµ‹è¯•ï¼ŒåŠ¨ä¸åŠ¨å°±debugï¼Œåªèƒ½äº‹å…ˆæŠŠè®¾è®¡åšå¥½ã€‚</p><p>ä¸è¿‡ï¼Œä¹Ÿæ­£æ˜¯ç”±äºç‰›é¡¿è€çˆµçˆ·è®¾ä¸‹äº†è¯…å’’ï¼ŒåœŸæœ¨å·¥ç¨‹å¸ˆè¢«é€¼ç»ƒå°±äº†ä¸¥è°¨çš„ä½œé£ï¼Œæ‰å®çš„æ¨ç®—èƒ½åŠ›ã€‚</p><p>ï¼ˆæ­¤å¤„ç”¨ç‰›è€çˆµçˆ·ä»£è¡¨åŒ…æ‹¬éº¦å…‹æ–¯éŸ¦åœ¨å†…çš„è¯¸å¤šå…ˆè´¤ï¼‰</p><h1 id="è›®è’è¥¿éƒ¨-ç‰›é¡¿ç®¡ä¸äº†-å›¾çµæ²¡æ¥å¾—åŠç«‹æ³•"><a href="#è›®è’è¥¿éƒ¨-ç‰›é¡¿ç®¡ä¸äº†-å›¾çµæ²¡æ¥å¾—åŠç«‹æ³•" class="headerlink" title="è›®è’è¥¿éƒ¨ ç‰›é¡¿ç®¡ä¸äº† å›¾çµæ²¡æ¥å¾—åŠç«‹æ³•"></a>è›®è’è¥¿éƒ¨ ç‰›é¡¿ç®¡ä¸äº† å›¾çµæ²¡æ¥å¾—åŠç«‹æ³•</h1><p>ç‰›çˆ·çš„è¯…å’’æŒä¹…è€Œåšå›ºï¼Œä¸è¿‡ï¼Œè¿˜æ˜¯æœ‰å®ƒç®¡ä¸åˆ°çš„æ³•å¤–ä¹‹åœ°ã€‚</p><p>å¼•åŠ›ï¼Œç”µç£åŠ›ï¼Œå¼ºåŠ›ï¼Œå¼±åŠ›ï¼Œä½ ä»¬èƒ½è€ç¨‹åºå‘˜ä½•ï¼Ÿç¨‹åºå‘˜å°±æ˜¯è¦ä»»æ€§åœ°ç©å¼„bitsã€‚</p><p>ç¥–å¸ˆçˆ·æ­»å¾—æ—©ï¼Œä¸€å£è‹¹æœå•ƒå®Œï¼Œç•™å¾…æˆ‘ç­‰ç¨‹åºå‘˜é£˜é›¶çºµæ¬²è‡³ä»Šã€‚</p><p>ç¦å…®ï¼Ÿç¥¸å…®ï¼Ÿ</p><h1 id="Robert-C-Martinï¼šè¿˜æ˜¯è¦è®¾ç«‹å¹¶éµå®ˆåŸºæœ¬æ³•"><a href="#Robert-C-Martinï¼šè¿˜æ˜¯è¦è®¾ç«‹å¹¶éµå®ˆåŸºæœ¬æ³•" class="headerlink" title="Robert C. Martinï¼šè¿˜æ˜¯è¦è®¾ç«‹å¹¶éµå®ˆåŸºæœ¬æ³•"></a>Robert C. Martinï¼šè¿˜æ˜¯è¦è®¾ç«‹å¹¶éµå®ˆåŸºæœ¬æ³•</h1><p>æ— ç‹¬æœ‰å¶ã€‚æœ€è¿‘çœ‹äº†ã€Šæ¶æ„æ•´æ´ä¹‹é“ã€‹è¿™æœ¬ä¹¦ã€‚ä½œè€…Robert C. Martinè®²è¿°äº†ç¼–ç¨‹èŒƒå¼çš„å‘å±•å†å²ï¼Œå­—é‡Œè¡Œé—´è¡¨è¾¾äº†ä¸Neal Fordé¢‡ä¸ºç¥ä¼¼çš„ä¸€äº›è§‚ç‚¹ã€‚</p><p>æ‘˜æŠ„å¦‚ä¸‹ï¼š</p><blockquote><p>ç»“æ„åŒ–ç¼–ç¨‹æ˜¯ç¬¬ä¸€ä¸ªæ™®éè¢«é‡‡ç”¨çš„ç¼–ç¨‹èŒƒå¼ï¼ˆä½†æ˜¯å´ä¸æ˜¯ç¬¬ä¸€ä¸ªè¢«æå‡ºçš„ï¼‰ï¼Œç”±Edsger Wybe Dijkstraäº1968å¹´æœ€å…ˆæå‡ºã€‚ä¸æ­¤åŒæ—¶ï¼ŒDijkstraè¿˜è®ºè¯äº†ä½¿ç”¨gotoè¿™æ ·çš„æ— é™åˆ¶è·³è½¬è¯­å¥å°†ä¼šæŸå®³ç¨‹åºçš„æ•´ä½“ç»“æ„ã€‚æ¥ä¸‹æ¥çš„ç« èŠ‚æˆ‘ä»¬è¿˜ä¼šè¯´åˆ°ï¼Œä¹Ÿæ˜¯è¿™ä½Dijkstraæœ€å…ˆä¸»å¼ ç”¨æˆ‘ä»¬ç°åœ¨ç†ŸçŸ¥çš„if&#x2F;then&#x2F;elseè¯­å¥å’Œdo&#x2F;while&#x2F;untilè¯­å¥æ¥ä»£æ›¿è·³è½¬è¯­å¥çš„ã€‚æˆ‘ä»¬å¯ä»¥å°†ç»“æ„åŒ–ç¼–ç¨‹èŒƒå¼å½’ç»“ä¸ºä¸€å¥è¯ï¼šç»“æ„åŒ–ç¼–ç¨‹å¯¹ç¨‹åºæ§åˆ¶æƒçš„ç›´æ¥è½¬ç§»è¿›è¡Œäº†é™åˆ¶å’Œè§„èŒƒã€‚</p></blockquote><blockquote><p>é¢å‘å¯¹è±¡ç¼–ç¨‹å¯¹ç¨‹åºæ§åˆ¶æƒçš„é—´æ¥è½¬ç§»è¿›è¡Œäº†é™åˆ¶å’Œè§„èŒƒã€‚</p></blockquote><blockquote><p>å‡½æ•°å¼ç¼–ç¨‹å¯¹ç¨‹åºä¸­çš„èµ‹å€¼è¿›è¡Œäº†é™åˆ¶å’Œè§„èŒƒã€‚</p></blockquote><blockquote><p>å®ƒä»¬éƒ½ä»æŸä¸€æ–¹é¢é™åˆ¶å’Œè§„èŒƒäº†ç¨‹åºå‘˜çš„èƒ½åŠ›ã€‚æ²¡æœ‰ä¸€ä¸ªèŒƒå¼æ˜¯å¢åŠ æ–°èƒ½åŠ›çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªç¼–ç¨‹èŒƒå¼çš„ç›®çš„éƒ½æ˜¯è®¾ç½®é™åˆ¶ã€‚è¿™äº›èŒƒå¼ä¸»è¦æ˜¯ä¸ºäº†å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯å¯ä»¥åšä»€ä¹ˆã€‚</p></blockquote><blockquote><p>è¿™ä¸‰ä¸ªç¼–ç¨‹èŒƒå¼åˆ†åˆ«é™åˆ¶äº†gotoè¯­å¥ã€å‡½æ•°æŒ‡é’ˆå’Œèµ‹å€¼è¯­å¥çš„ä½¿ç”¨ã€‚é‚£ä¹ˆé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä»€ä¹ˆå¯ä»¥å»é™¤çš„å—</p></blockquote><blockquote><p>è¿™äº›ç¼–ç¨‹èŒƒå¼çš„å†å²çŸ¥è¯†ä¸è½¯ä»¶æ¶æ„æœ‰å…³ç³»å—ï¼Ÿå½“ç„¶æœ‰ï¼Œè€Œä¸”å…³ç³»ç›¸å½“å¯†åˆ‡ã€‚è­¬å¦‚è¯´ï¼Œå¤šæ€æ˜¯æˆ‘ä»¬è·¨è¶Šæ¶æ„è¾¹ç•Œçš„æ‰‹æ®µï¼Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯æˆ‘ä»¬è§„èŒƒå’Œé™åˆ¶æ•°æ®å­˜æ”¾ä½ç½®ä¸è®¿é—®æƒé™çš„æ‰‹æ®µï¼Œç»“æ„åŒ–ç¼–ç¨‹åˆ™æ˜¯å„æ¨¡å—çš„ç®—æ³•å®ç°åŸºç¡€ã€‚è¿™å’Œè½¯ä»¶æ¶æ„çš„ä¸‰å¤§å…³æ³¨é‡ç‚¹ä¸è°‹è€Œåˆï¼šåŠŸèƒ½æ€§ã€ç»„ä»¶ç‹¬ç«‹æ€§ä»¥åŠæ•°æ®ç®¡ç†ã€‚</p></blockquote><hr><p>åŸæ–‡çš„æ„æ€éå¸¸æ˜ç™½ï¼ŒStructured programmingï¼ŒOOï¼ŒFPéƒ½æ˜¯åœ¨çº¦æŸæˆ‘ä»¬ä½œä¸ºç¨‹åºå‘˜çš„è¡Œä¸ºï¼Œç»™æˆ‘ä»¬ç«‹ä¸‹åŸºæœ¬æ³•ï¼Œå…å¾—æˆ‘ä»¬çæã€‚</p><p>Neal Ford: è‡ªç„¶ç•Œçš„ç‰©ç†å®šå¾‹æ˜¯ä¸ªå¥½ä¸œè¥¿å•Šï¼Œå¯ä»¥é™åˆ¶åœŸæœ¨å·¥ç¨‹å¸ˆï¼Œè®©ä»–ä»¬æ— æ³•ä¹±æã€‚æˆ‘ä»¬è½¯ä»¶ä¸–ç•Œé‡Œç¼ºçš„å°±æ˜¯è¿™ä¸ªã€‚</p><p>Robert C. Martin: è€å¼Ÿæ‰€è¨€ç”šæ˜¯ã€‚ç¼ºå°‘è‡ªç„¶çš„é¦ˆèµ ï¼Œæˆ‘ä»¬å°±æäººä¸ºçš„è§„çº¦ã€‚è¯¸å¤šç¼–ç¨‹èŒƒå¼éƒ½å·²ç»å°è¯•è¿‡åšè¿™ä»¶äº‹äº†ã€‚å¤©ä¸ç«‹æ³•äººç«‹æ³•ã€‚</p><h1 id="å¼ ä¿¡å“²è¡¨ç¤ºåŒæ„"><a href="#å¼ ä¿¡å“²è¡¨ç¤ºåŒæ„" class="headerlink" title="å¼ ä¿¡å“²è¡¨ç¤ºåŒæ„"></a>å¼ ä¿¡å“²è¡¨ç¤ºåŒæ„</h1><p>å¼ ä¿¡å“²ï¼šä½ ä¿©è¯´çš„å¯¹ï¼Œè‡ªç”±æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œä½†æ˜¯ä¸èƒ½ã€Šè¿‡ç«ã€‹ï¼Œå…å¾—è¿‡çŠ¹ä¸åŠã€‚</p><p><img data-src="http://i2.tiimg.com/691355/7f1e9d0fcf5aeaa9.png" alt="Markdown"></p><h1 id="å·¥ç¨‹å¸ˆä¹‹è£å…‰-æ¼”ç»-å½’çº³"><a href="#å·¥ç¨‹å¸ˆä¹‹è£å…‰-æ¼”ç»-å½’çº³" class="headerlink" title="å·¥ç¨‹å¸ˆä¹‹è£å…‰ æ¼”ç» å½’çº³"></a>å·¥ç¨‹å¸ˆä¹‹è£å…‰ æ¼”ç» å½’çº³</h1><blockquote><p>äººç±»99%çš„æœºç‡éƒ½åœ¨ä½¿ç”¨å½’çº³æ³•ï¼Œåªæœ‰1%çš„æœºç‡ä½¿ç”¨æ¼”ç»æ³•å› ä¸ºæ¼”ç»æ³•éœ€è¦æ¶ˆè€—è®¤çŸ¥èƒ½é‡ï¼Œæ‰€ä»¥é»˜è®¤ä½¿ç”¨å½’çº³æ³•ã€‚</p></blockquote><p>åœŸæœ¨å·¥ç¨‹å¸ˆè¦ä»°ä»—æ¼”ç»æ¨ç†ï¼Œè¿™æ˜¯ç†å·¥ç§‘ä¹‹è£å…‰ã€‚</p><p>æ­¤ä¹ƒå¾è¾ˆåæ‰§ä¹‹éª„å‚²ã€‚</p><p>æ€å¥ˆæ²¦è½ä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬è¦é‡åº¦ä¾èµ–å½’çº³æ‰èƒ½å‹‰å¼ºç»´æŒç”Ÿæ´»è¿™æ ·å­ã€‚</p><p>ä»£ç æœ‰é—®é¢˜ï¼Ÿè·‘ä¸€è·‘testsï¼Œæ”¹ä¸€æ”¹ã€‚è¿˜ä¸è¡Œï¼Ÿå†æ”¹æ”¹ï¼Œå†è·‘è·‘ã€‚ä»ç„¶ä¸è¡Œï¼Ÿé‚£æˆ‘å¯è¦debugäº†ï¼ï¼ï¼</p><p>åå¤åˆ©ç”¨run testså’Œdebugçš„æ–¹å¼æ¥è§‚å¯Ÿç°è±¡ï¼Œæ”¶é›†ç°è±¡ï¼Œæ€»ç»“ç°è±¡ï¼Œåæ¨åŸç†ã€‚</p><p>è¿™æ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆåœ¨è„‘åŠ›ä¸æ–­å¤±è´¥çš„ç»æœ›ä¸­ä¸æ–­é™ä½è‡ªå·±èº«æ®µçš„æ…·æ…¨æ‚²æ­Œã€‚</p><p>ç¦å…®ï¼Ÿç¥¸å…®ï¼Ÿ</p><h1 id="æµ‹è¯•è¦å…ˆå†™-åˆ«ç€æ€¥è·‘-debugä¸åˆ°ä¸‡ä¸å¾—å·²æœ€å¥½åˆ«ç”¨"><a href="#æµ‹è¯•è¦å…ˆå†™-åˆ«ç€æ€¥è·‘-debugä¸åˆ°ä¸‡ä¸å¾—å·²æœ€å¥½åˆ«ç”¨" class="headerlink" title="æµ‹è¯•è¦å…ˆå†™ åˆ«ç€æ€¥è·‘ debugä¸åˆ°ä¸‡ä¸å¾—å·²æœ€å¥½åˆ«ç”¨"></a>æµ‹è¯•è¦å…ˆå†™ åˆ«ç€æ€¥è·‘ debugä¸åˆ°ä¸‡ä¸å¾—å·²æœ€å¥½åˆ«ç”¨</h1><p>ä¸ºäº†ä¿æŠ¤æˆ‘ä»¬å®è´µçš„æ™ºå•†ä¸è£å…‰ï¼Œåœ¨æ­¤ä½œå‡ºå¦‚ä¸‹å»ºè®®ã€‚</p><p>æµ‹è¯•å†™å®Œï¼Œç„¶åå»å†™å®ç°ä»£ç çš„æ—¶å€™è¦å°½åŠ›å»äº‰å–ä¸€éè¿‡ã€‚</p><p>åœ¨è¯•å›¾ç”¨run testå»éªŒè¯åˆšåˆšå†™å®Œçš„å®ç°ä»£ç ä¹‹å‰ï¼Œåˆ«ç€æ€¥ï¼Œå¯ä»¥å…ˆå›å¤´æŠŠä»£ç æ‹ä¸€éï¼Œç”¨è‚‰è„‘è·‘ä¸€éå…ˆã€‚</p><p>ä¸åˆ°ä¸‡ä¸å¾—å·²ï¼Œåˆ«ç”¨debugã€‚å› ä¸ºä¸€æ—¦ä½ å¼€å§‹debugï¼Œå°±æ˜¯è®¤è¾“äº†ï¼Œè®¤æ€‚äº†ã€‚æ‰¿è®¤æ— æ³•é€šè¿‡è‚‰è„‘æ¥æ¼”ç»æ¨ç†æ˜ç™½äº†ã€‚</p><p>ä¸è¦è¿‡äºéª„çºµï¼Œä¸è¦è¿‡é‡æœç”¨è½¯ä»¶ä¸–ç•Œç»™æˆ‘ä»¬çš„è‡ªç”±ï¼Œå¤šç»™è‡ªå·±ä¸€äº›äººä¸ºè®¾ç½®çš„é™åˆ¶ï¼Œå‘åœŸæœ¨å·¥ç¨‹å¸ˆçœ‹é½ã€‚</p><p>æ²¡æƒ³åˆ°å§ï¼Ÿå‰é¢å†™çš„ç¥ç¥å¨å¨ï¼Œæœ€åæ¥åˆ°äº†å¦‚æ­¤æ¥åœ°æ°”çš„å»ºè®®ä¸Šã€‚</p><h1 id="åˆ«è¯¯ä¼š-ä¸æ˜¯é‚£ä¸ªæ„æ€"><a href="#åˆ«è¯¯ä¼š-ä¸æ˜¯é‚£ä¸ªæ„æ€" class="headerlink" title="åˆ«è¯¯ä¼š ä¸æ˜¯é‚£ä¸ªæ„æ€"></a>åˆ«è¯¯ä¼š ä¸æ˜¯é‚£ä¸ªæ„æ€</h1><p>ä¸æ˜¯å®£æ‰¬big upfront designã€‚</p><p>ä¸æ˜¯åå¯¹short feedback loopã€‚</p><p>ä¸æ˜¯åå¯¹è·‘æµ‹è¯•ï¼Œåªæ˜¯å»ºè®®åˆ«ç€æ€¥è·‘ï¼Œä¸è¦å¤ªè¿‡ä¾èµ–è·‘æµ‹è¯•ï¼Œä¼˜å…ˆç”¨è‚‰è„‘ï¼Œç„¶åæ‰è·‘æµ‹è¯•ã€‚</p><p>ä¸æ˜¯å¦è®¤debugçš„ä»·å€¼ï¼Œåªæ˜¯å¸Œæœ›å¤§å®¶å°½åŠ›æ”¾æ…¢åšå‡ºè¦å»debugçš„å†³å®šçš„é€Ÿåº¦ï¼Œè®©å­å¼¹é£ä¸€ä¼šï¼Œç»™è‚‰è„‘æœºä¼šï¼Œè®©å®ƒè·‘ä¸€ä¼šã€‚</p><p>ä¸æ˜¯å¦è®¤å½’çº³çš„ä»·å€¼ï¼Œåªæ˜¯å»ºè®®æ¼”ç»ä¸å½’çº³ä¸å¯ååºŸï¼Œä¸è¦è¿‡åº¦ä¾èµ–å½’çº³è€Œå†·è½æ¼”ç»ã€‚</p><hr><p>è°¨ä»¥æ­¤æ–‡ä¸è¯¸å›å…±å‹‰ã€‚For the serious hardcore programmersã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;èº«é™·å—æ´‹å›¹åœ„ï¼Œå¿ƒç³»æ•…å›­é£ç‰©ï¼Œæ— ä»¥èŠèµ–ä¹‹ä¸­ï¼Œæ’°æ–‡æƒä½œæ…°è—‰ã€‚&lt;/p&gt;
&lt;h1 id=&quot;ä»Neal-Fordçš„ä¸€æ®µè¯è®²å¼€å»&quot;&gt;&lt;a href=&quot;#ä»Neal-Fordçš„ä¸€æ®µè¯è®²å¼€å»&quot; class=&quot;headerlink&quot; title=&quot;ä»Neal Fordçš„ä¸€æ®µè¯è®²å¼€å»&quot;&gt;&lt;/a</summary>
      
    
    
    
    
    <category term="Uncle Bob" scheme="https://cuipengfei.me/tags/Uncle-Bob/"/>
    
  </entry>
  
</feed>
